{"version":3,"sources":["components/App/logo4x.png","components/MainPage/MainPage.jsx","components/ModalForms/TemplateFolder/AddTemplateElement.jsx","components/ModalForms/TemplateFolder/AddTemplateFolder.jsx","components/ModalForms/Folder/ExportFolder.jsx","components/Toolbar/ToolbarTemplateFolder.jsx","components/TemplatePage/TemplatePage.jsx","components/ModalForms/Folder/AddElement.jsx","components/ModalForms/Folder/AddFolder.jsx","components/ModalForms/Folder/DeleteFolder.jsx","components/ModalForms/Folder/EditFolder.jsx","components/ModalForms/Folder/ImportFolder.jsx","components/Toolbar/ToolbarFolder.jsx","components/FolderPage/FolderPage.jsx","components/ModalForms/Element/AddCharacteristics.jsx","components/ModalForms/Element/AddTemplateElement.jsx","components/ModalForms/Element/DeleteElement.jsx","components/ModalForms/Element/EditElement.jsx","components/ModalForms/Element/ExportElement.jsx","components/ModalForms/Element/AddRelation.jsx","components/Toolbar/ToolbarElement.jsx","components/ElementPage/arrow.png","components/ElementPage/ElementPage.jsx","components/ElementPage/reverse arrow.png","components/ModalForms/TemplateElement/DeleteTemplateElement.jsx","components/Toolbar/ToolBarTemplateElement.jsx","components/TemplateElementPage/TemplateElementPage.jsx","components/Login/Login.jsx","components/Registration/Registration.jsx","components/Settings/Settings.jsx","components/GeneralLibrary/GeneralLibrary.jsx","components/App/App.js","components/App/useToken.js","reportWebVitals.js","index.js"],"names":["MainPage","props","console","log","state","user","mainfolders","handleClick","bind","e","preventDefault","this","history","push","localStorage","clear","window","location","reload","userid","a","fetch","process","then","response","json","data","setState","catch","err","login","password","body","loginUser","Mail","Password","GetMainFolders","Id","breadCrumbs","title","path","className","map","bc","to","pathname","onClick","src","logo","alt","mf","Name","Component","SaveTemplateElement","elwithimg","method","headers","status","AddElement","name","filepath","file","onChange","sendImage","handleImageChange","val","target","value","event","onClose","form","FormData","index","files","length","element","append","folder","URL","createObjectURL","show","stopPropagation","type","SaveFolder","parentfolderid","Number","JSON","stringify","changedirectory","param","handleSubmit","folders","ExportToUser","folderid","usermail","ExportToLibrary","ExportToFolder","newrootid","ExportFolder","exporttype","indexOf","prevpages","text","setTypeOfExport","onMailChange","onPasswordChange","showlocation","prevProps","slice","Toolbar","useState","showAddElement","set_showAddElement","showAddFolder","set_showAddFolder","showDeleteComponent","set_showDeleteComponent","showEditComponent","set_showEditComponent","showExportComponent","set_showExportComponent","showImportComponent","set_showImportComponent","parent","previouspages","component","TemplatePage","elements","parentid","GetFolders","GetElements","Image","typeof_parentel","SaveElement","pfid","elemid","SaveImage","id","AddFolder","DeleteFolder","DeleteElement","elementid","DeleteComponent","typeofcomponent","isdeleted","newparentfolderid","subfolders","IdFolder","IdParent","Accept","EditFolder","RemoveSubfolder","prevState","filter","sf","RemoveElement","el","ChangeShow","typeofedit","needupate","isupdated","Close","f","GetSubFoldersAndElements","ImportFromFolder","importcompid","ImportFromLibrary","ImportFolder","importtype","selcomp","alert","selectelement","selectcomponent","libcomponents","setTypeOfImport","libcomps","lc","Typeofcomponent","FolderPage","SaveCharacteristics","arrayofcharacteristics","idel","box","AddCharacteristics","ChangeName","newItems","characteristics","ChangeValue","currentchar","CreateNew","CreateNewName","CreateNewValue","Save","array","char","AddTemplate","templateid","AddTemplateElement","Selecttelement","GetFoldersAndElements","isneedupdate","telements","CloseWindow","idparent","EditElement","DeleteChar","DeleteClass","templatecharacteristics","DeleteRelation","relations","rel","tchars","chars","GetFoldersElementsRelations","item","NameParent","setObj","Set","groups","reduce","acc","has","add","group","Value","NameFirstElement","NameSecondElement","Rel1to2","Rel2to1","IdFirst","AddRelationTwoLines","firstelement","secondelement","firsttosec","sectofirst","Firstelementid","Secondelementid","AddRelationOneLine","AddRelation","typeofrel","defaultdirection","firstrel","secondrel","changedirection","changeonelinerel","changesecondlinerel","changetypeofrel","showRelation","set_showRelation","ElementPage","showcharacreristics","GetTemplateCharacteristics","GetCharacteristics","GetRelations","number","NameCharacter","ValueCharacter","IdCharacter","arrow","TemplateElementPage","savepath","Login","setToken","username","setUserName","setPassword","useHistory","token","onSubmit","placeholder","SingUp","mail","Registration","ifregister","onChangeMail","onChangePassword","ChangeData","Settings","DeleteAcc","Library","showelements","components","withRouter","tokenString","getItem","userToken","parse","getToken","setItem","useToken","GeneralLibrary","from","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6558a8bc.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo4x.bffe58ac.png\";","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./MainPage.css\";\r\nimport logo from \"../App/logo4x.png\";\r\n\r\nexport default class MainPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(props);\r\n    this.state = { user: null, mainfolders: null };\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n  handleClick(e) {\r\n    e.preventDefault();\r\n    this.props.history.push(\"/\");\r\n    localStorage.clear();\r\n    window.location.reload();\r\n  }\r\n\r\n  async GetMainFolders(userid) {\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/main/${userid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ mainfolders: data });\r\n        console.log(data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n  async loginUser(login, password) {\r\n    return await fetch(\r\n      process.env.REACT_APP_API_USERS + `?mail=${login}&pass=${password}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ user: data });\r\n        return data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (this.props.location.state.body == null) {\r\n      localStorage.clear();\r\n      window.location.reload();\r\n    }\r\n    const user = await this.loginUser(\r\n      this.props.location.state.body.Mail,\r\n      this.props.location.state.body.Password\r\n    );\r\n    if (user) {\r\n      await this.GetMainFolders(user.Id);\r\n    } else {\r\n      localStorage.clear();\r\n      window.location.reload();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.user || !this.state.mainfolders) {\r\n      return <div />;\r\n    }\r\n    const mainfolders = this.state.mainfolders;\r\n    const breadCrumbs = [\r\n      {\r\n        title: \"Главная\",\r\n        path: \"/\",\r\n        body: {\r\n          Mail: this.state.user.Mail,\r\n          Password: this.state.user.Password,\r\n        },\r\n      },\r\n    ];\r\n    return (\r\n      <div>\r\n        <div className=\"Header\">\r\n          <div className=\"BreadCrumbs\">\r\n            {breadCrumbs.map((bc) => (\r\n              <div key={bc.title} className=\"gt\">\r\n                {/* <Link to={{pathname: `/template/${folder.Id}/${folder.Name}`}}> */}\r\n                <Link\r\n                  className=\"BreadCrumb\"\r\n                  to={{\r\n                    pathname: bc.path,\r\n                    state: { body: bc.body, breadCrumbs: breadCrumbs },\r\n                  }}\r\n                >\r\n                  {bc.title}\r\n                </Link>\r\n                &ensp;&rarr;&ensp;\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"settingsinheader\">\r\n            <Link\r\n              to={{ pathname: `/library`, state: { breadCrumbs: breadCrumbs } }}\r\n            >\r\n              {<button className=\"btn_logout\">общая библиотека</button>}\r\n            </Link>\r\n            <Link to={{ pathname: \"/settings\" }}>\r\n              {<button className=\"btn_logout\">настройки</button>}\r\n            </Link>\r\n            {\r\n              <button className=\"btn_logout\" onClick={this.handleClick}>\r\n                выход\r\n              </button>\r\n            }\r\n            <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"mainfolders\">\r\n          {mainfolders.map((mf) => (\r\n            <div key={mf.Id} className=\"mfolder\">\r\n              {mf.Name === \"Проекты\" ? (\r\n                <Link\r\n                  to={{\r\n                    pathname: `/projects`,\r\n                    state: {\r\n                      breadCrumbs: breadCrumbs,\r\n                      body: { Id: mf.Id, Name: mf.Name },\r\n                    },\r\n                  }}\r\n                >\r\n                  <button className=\"buttonfolder\">Проекты</button>\r\n                </Link>\r\n              ) : (\r\n                <Link\r\n                  to={{\r\n                    pathname: `/template`,\r\n                    state: {\r\n                      breadCrumbs: breadCrumbs,\r\n                      body: { Id: mf.Id, Name: mf.Name },\r\n                    },\r\n                  }}\r\n                >\r\n                  <button className=\"buttonfolder\">Библиотека</button>\r\n                </Link>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\nasync function SaveTemplateElement (elwithimg)\r\n{ \r\n    await fetch(process.env.REACT_APP_API_TEMPLATEELEMENTS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: elwithimg, // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Accept': 'application/json',\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n    }\r\n\r\nexport default class AddElement extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={name:\"\", filepath:null, file: null}\r\n        this.onChange = this.onChange.bind(this);\r\n        this.sendImage = this.sendImage.bind(this); \r\n        this.handleImageChange = this.handleImageChange.bind(this);     \r\n    }   \r\n    onChange(e) {\r\n        var val = e.target.value;\r\n        this.setState({name: val});\r\n    }\r\n\r\n    async sendImage(event) {\r\n        event.preventDefault();\r\n        await SaveTemplateElement(this.state.file);\r\n        this.props.onClose();        \r\n        window.location.reload();\r\n    };\r\n    \r\n    handleImageChange(e) {\r\n        e.preventDefault();\r\n        let form = new FormData();\r\n        for (var index = 0; index < e.target.files.length; index++) {\r\n            var element = e.target.files[index];\r\n            form.append('image', element);\r\n        }\r\n        form.append('parentfolderid', this.props.folder.Id);\r\n        form.append('Name', this.state.name);\r\n        this.setState({ file: form, filepath: URL.createObjectURL(e.target.files[0])});\r\n    };  \r\n\r\n    render(){\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Создание шаблонного элемента</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.name} onChange={this.onChange}/>\r\n                <label className=\"formlabel\">Расположение:</label>\r\n                <div className=\"place\">\r\n                <label>{this.props.folder.Name}</label> <button className=\"button arrow\"> -{'>'} </button>\r\n                </div>\r\n                {/* <div className=\"modal-image\">\r\n                <label className=\"formlabel\">Фото:</label>                \r\n                <input type=\"file\" onChange={(e)=>this.handleImageChange(e)}/>                \r\n                <img className=\"downloadimage\" src={this.state.filepath}/>\r\n                </div> */}\r\n                </div>                \r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\" onClick={this.sendImage}>Сохранить</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Назад</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\n\r\nasync function SaveFolder (name, parentfolderid)\r\n{   \r\n    const folder =   {\r\n      \"Name\": name,\r\n      \"ParentfolderId\": Number(parentfolderid)\r\n   }\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(folder), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\nexport default class AddElement extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={name:\"\", folders:null, breadCrumbs:null}\r\n        this.onChange = this.onChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);   \r\n        this.changedirectory = this.changedirectory.bind(this);\r\n    }   \r\n    onChange(e) {\r\n        var val = e.target.value;\r\n        this.setState({name: val});\r\n    }\r\n\r\n    changedirectory = param => async e => {\r\n\r\n    };\r\n   \r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        console.log(this.props);\r\n        await SaveFolder(this.state.name,this.props.folder.Id );\r\n        this.props.onClose();\r\n        window.location.reload();\r\n      }\r\n\r\n    render(){\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Создание папки</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.name} onChange={this.onChange}/>\r\n                <label className=\"formlabel\">Расположение:</label>\r\n                <div className=\"place\">\r\n                <label>{this.props.folder.Name}</label> <button className=\"button arrow\"> -{'>'} </button>\r\n                </div>\r\n                {/* <div>\r\n                <div>\r\n                {this.props.prevpages.map(bc=>\r\n                        <div key={bc.title} className=\"gt\">\r\n                            <button className=\"BreadCrumb\" onClick={this.changedirectory({body:bc.body})}>\r\n                             {bc.title} \r\n                              </button>\r\n                              &gt;&gt;\r\n                        </div>)}\r\n                        </div>                              \r\n\r\n                </div> */}\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\" onClick={this.handleSubmit}>Сохранить</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Назад</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function ExportToUser(folderid, usermail) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_FOLDERS +\r\n      `/exporttouser?folderid=${folderid}&usermail=${usermail}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nasync function ExportToLibrary(folderid,name, password) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_FOLDERS +\r\n      `/exporttolibrary?folderid=${folderid}&name=${name}&password=${password}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nasync function ExportToFolder(folderid, newrootid) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_FOLDERS +\r\n      `/exporttofolder?folderid=${folderid}&newrootid=${newrootid}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\nexport default class ExportFolder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(this.props);\r\n    this.state = {\r\n      exporttype: null,\r\n      body: '',\r\n      path: { Name: this.props.folder.Name, Id: this.props.folder.Id },\r\n      folders: null,\r\n      breadCrumbs: this.props.prevpages,\r\n      text: \"Показать\",\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.setTypeOfExport = this.setTypeOfExport.bind(this);\r\n    this.onMailChange = this.onMailChange.bind(this);\r\n    this.onPasswordChange = this.onPasswordChange.bind(this);\r\n    this.showlocation = this.showlocation.bind(this);\r\n    this.changedirectory = this.changedirectory.bind(this);\r\n  }\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (this.state.exporttype === \"user\") {\r\n      await ExportToUser(this.props.folder.Id, this.state.body);\r\n    } else if (this.state.exporttype === \"library\") {\r\n      await ExportToLibrary(this.props.folder.Id, this.props.folder.Name, this.state.body);\r\n    } else if (this.state.exporttype === \"folder\") {\r\n      await ExportToFolder(this.props.folder.Id, this.state.path.Id);\r\n    }\r\n    this.props.onClose();\r\n  };\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/projects`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({\r\n          folders: data,\r\n          breadCrumbs: breadCrumbs,\r\n          path: { Name: param.Name, Id: param.Id },\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  };\r\n\r\n  async showlocation(event) {\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.state.text === \"Показать\"\r\n          ? this.setState({ text: \"Свернуть\", folders: data })\r\n          : this.setState({ text: \"Показать\" });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  setTypeOfExport(event) {\r\n    if (event.target.value === \"folder\") {\r\n      this.setState({\r\n        exporttype: event.target.value,\r\n        path: { Name: this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Name, Id: this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Id },\r\n      });\r\n    } else {\r\n      this.setState({ exporttype: event.target.value, body:'' });\r\n    }\r\n    console.log(\"wow\");\r\n  }\r\n  onMailChange(event) {\r\n    this.setState({ body: event.target.value });\r\n  }\r\n  onPasswordChange(event) {\r\n    this.setState({ body: event.target.value });\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (prevProps.folder.Id !== this.props.folder.Id) {\r\n      this.setState({\r\n        exporttype: null,\r\n        body: '',\r\n        path: { Name: this.props.folder.Name, Id: this.props.folder.Id },\r\n        folders: null,\r\n        breadCrumbs: this.props.prevpages,\r\n        text: \"Показать\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {  \r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">\r\n              Экспорт папки {this.props.folder.Name}\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <div className=\"formwithradio\">\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"user\" name=\"gender\" /> Другому\r\n                пользователю\r\n              </div>\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"folder\" name=\"gender\" /> В другую\r\n                папку\r\n              </div>\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"library\" name=\"gender\" /> В общую\r\n                библиотеку\r\n              </div>\r\n            </div>\r\n          \r\n          {this.state.exporttype === \"user\" ? (\r\n            <div className=\"exportdiv\">\r\n              <label className=\"formlabel\"> Введите почту получателя:</label>\r\n              <input\r\n                className=\"forminput\"\r\n                type=\"text\"\r\n                value={this.state.body}\r\n                onChange={this.onMailChange}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {this.state.exporttype === \"library\" ? (\r\n            <div className=\"exportdiv\">\r\n              <label className=\"formlabel\"> Задайте пароль:</label>\r\n              <input\r\n                className=\"forminput\"\r\n                type=\"text\"\r\n                value={this.state.body}\r\n                onChange={this.onPasswordChange}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {this.state.exporttype === \"folder\" ? (\r\n            <div className=\"exportdiv\">\r\n              <label className=\"formlabel\">Экспорт в папку:</label>\r\n              <div className=\"selectedpath\">\r\n                <label>{this.state.path.Name}</label>{\" \"}\r\n                <button className=\"arrow\" onClick={this.showlocation}>\r\n                  {\" \"}\r\n                  {this.state.text}{\" \"}\r\n                  {this.state.text === \"Показать\" ? (\r\n                    <div>&ensp;&darr;</div>\r\n                  ) : (\r\n                    <div>&ensp;&uarr;</div>\r\n                  )}{\" \"}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"place\">\r\n                {this.state.text === \"Показать\" ? null : (\r\n                  <div className=\"parentwindowforselectingpath\">\r\n                    <div className=\"modalbreadcrumbs\">\r\n                      {this.state.breadCrumbs.slice(1).map((bc) => (\r\n                        <div key={bc.title} className=\"gt\">\r\n                          <button\r\n                            className=\"BreadCrumb withoutframe\"\r\n                            onClick={this.changedirectory({\r\n                              Id: bc.body.Id,\r\n                              Name: bc.body.Name,\r\n                            })}\r\n                          >\r\n                            {bc.title}\r\n                          </button>\r\n                          &ensp;&rarr;&ensp;\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    <div className=\"windowforselectingpath\">\r\n                      <div className=\"modalfolders\">\r\n                        {this.state.folders.map((folder) => (\r\n                          <div key={folder.Id}>\r\n                            <button\r\n                              className=\"modalbuttonfolder\"\r\n                              onClick={this.changedirectory({\r\n                                Id: folder.Id,\r\n                                Name: folder.Name,\r\n                              })}\r\n                            >\r\n                              <div>{folder.Name}</div>\r\n                            </button>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.handleSubmit}>\r\n              Экспортировать\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.props.onClose}>\r\n              Отменить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from 'react';\r\nimport AddElement from '../ModalForms/TemplateFolder/AddTemplateElement';\r\nimport AddFolder from '../ModalForms/TemplateFolder/AddTemplateFolder';\r\nimport DeleteComponent from '../ModalForms/TemplateFolder/DeleteTemplateFolder';\r\nimport EditFolder from '../ModalForms/TemplateFolder/EditTemplateFolder';\r\nimport ImportFolder from '../ModalForms/TemplateFolder/ImportTemplateFolder';\r\nimport ExportFolder from '../ModalForms/Folder/ExportFolder';\r\n\r\nimport './Toolbar.css';\r\n\r\nexport default function Toolbar(props) {\r\n\r\n    const [showAddElement, set_showAddElement] = useState(false);\r\n    const [showAddFolder, set_showAddFolder] = useState(false);\r\n    const [showDeleteComponent, set_showDeleteComponent] = useState(false);\r\n    const [showEditComponent, set_showEditComponent] = useState(false);\r\n    const [showExportComponent, set_showExportComponent] = useState(false);\r\n    const [showImportComponent, set_showImportComponent] = useState(false);\r\n    \r\n    \r\n        return(\r\n            <div className=\"ToolbarRelative\">\r\n            <div className=\"Toolbar\">\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddElement(true)}>Добавить класс</button>\r\n            <AddElement folder={props.parent} prevpages={props.previouspages} onClose={()=>set_showAddElement(false)} show={showAddElement}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddFolder(true)}>Добавить папку</button>\r\n            <AddFolder folder={props.parent} prevpages={props.previouspages} onClose={()=>set_showAddFolder(false)} show={showAddFolder}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showDeleteComponent(true)}>Удалить папку</button>\r\n            <DeleteComponent prevpages={props.previouspages} component={props.parent} onClose={()=>set_showDeleteComponent(false)} show={showDeleteComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showEditComponent(true)}>Изменить папку</button>\r\n            <EditFolder folder={props.parent} prevpages={props.previouspages} onClose={()=>set_showEditComponent(false)} show={showEditComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showExportComponent(true)}>Экспорт папки</button>\r\n            <ExportFolder component={props.parent} onClose={()=>set_showExportComponent(false)} show={showExportComponent}/>\r\n            <button className=\"Toolbarbutton\">Импорт в папку</button>\r\n            <ImportFolder component={props.parent} onClose={()=>set_showImportComponent(false)} show={showImportComponent}/>\r\n            </div>\r\n            </div>\r\n          )\r\n    \r\n  \r\n}","import React, {Component} from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport './TemplatePage.css';\r\nimport Toolbar from '../Toolbar/ToolbarTemplateFolder';\r\nimport logo from '../App/logo4x.png';\r\n\r\nexport default class TemplatePage extends Component{\r\n    constructor(props){\r\n        super(props); \r\n        this.state={folders:null, elements:null,  breadCrumbs:null};\r\n        this.handleClick = this.handleClick.bind(this)\r\n    }\r\n    handleClick(e) {\r\n        e.preventDefault();\r\n        this.props.history.push(\"/\");\r\n        localStorage.clear();    \r\n        window.location.reload();      \r\n      }      \r\n    \r\n    async GetFolders(parentid){\r\n        const breadCrumbs = this.props.location.state.breadCrumbs; \r\n        const index = breadCrumbs.map(function(e) { return e.body.Id; }).indexOf(this.props.location.state.body.Id);\r\n        // const index=breadCrumbs.indexOf(elem => elem.path==`/template/${this.props.match.params.id}/${this.props.match.params.name}`);\r\n        if(index===-1)\r\n        {\r\n        breadCrumbs.push({\r\n            title: this.props.location.state.body.Name,\r\n            path: `/template`,\r\n            body:{\r\n                \"Name\":this.props.location.state.body.Name,\r\n                \"Id\":this.props.location.state.body.Id\r\n            }\r\n          });\r\n        }\r\n        else\r\n        {\r\n            breadCrumbs.length=index+1;\r\n        }\r\n        console.log(process.env.REACT_APP_API_TEMPLATEFOLDERS+`/${parentid}`);\r\n        await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS+`/${parentid}`) \r\n        .then(response=>{ return response.json()})\r\n        .then(data=>{\r\n            this.setState({folders:data, breadCrumbs:breadCrumbs});\r\n        }).catch(err => console.log(err));  \r\n        console.log(this.state);\r\n    }\r\n    GetElements(parentid){\r\n        console.log(process.env.REACT_APP_API_TEMPLATEELEMENTS+`/${parentid}`);\r\n        fetch(process.env.REACT_APP_API_TEMPLATEELEMENTS+`/${parentid}`) \r\n        .then(response=>{ return response.json()})\r\n        .then(data=>{\r\n            this.setState({elements:data});\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n    async componentDidMount(){\r\n        await this.GetFolders(this.props.location.state.body.Id);\r\n        await this.GetElements(this.props.location.state.body.Id);\r\n    }\r\n    async componentDidUpdate(prevProps){\r\n        console.log(\"Я в обновлении темплэйта\");\r\n      if (prevProps.location.state.body.Id !== this.props.location.state.body.Id)      \r\n      {\r\n        await this.GetFolders(this.props.location.state.body.Id);\r\n        await this.GetElements(this.props.location.state.body.Id);\r\n        // window.location.reload();\r\n      }\r\n  }\r\n\r\n    render(){\r\n        if ((!this.state.folders)||(!this.state.elements)) {\r\n            return <div />\r\n          }\r\n        const {folders, elements,breadCrumbs}=this.state;//сначала\r\n        return(\r\n            <div className=\"folderPage\">\r\n                <div className=\"Header\">\r\n                <div className=\"BreadCrumbs\">\r\n                {breadCrumbs.map(bc=>\r\n                        <div key={bc.title} className=\"gt\">      \r\n                            <Link className=\"BreadCrumb\" to={{pathname:bc.path, state:{body:bc.body, breadCrumbs:breadCrumbs}}} >\r\n                             {bc.title} \r\n                              </Link>\r\n                              &ensp;&rarr;&ensp;\r\n                        </div>)}\r\n                        </div> \r\n                        <div className=\"settingsinheader\">\r\n              {<button className=\"btn_logout\" onClick={this.handleClick}>настройки</button>}\r\n              {<button className=\"btn_logout\" onClick={this.handleClick}>выход</button>}\r\n              <img className=\"logo\" src={logo} alt=\"toolbaritem\"/>\r\n              </div>\r\n                        </div>   \r\n                                               \r\n            <div className=\"listview\">              \r\n                        {folders.map(folder=>\r\n                        <div key={folder.Id}>\r\n                            <Link className=\"folderinlist\" to={{pathname:`/template`, state: {breadCrumbs:breadCrumbs, body:folder}}}>\r\n                             <div className=\"NameElementOfList\"> \r\n                             {folder.Name}\r\n                              </div>\r\n                              </Link>\r\n                        </div>)} \r\n                        {elements.map(folder=>\r\n                        <div key={folder.Id}>                            \r\n                            <Link className=\"elementinlist\" to={{pathname:`/telement`, state: {breadCrumbs:breadCrumbs, body:folder}}}>\r\n                            {/* {folder.Image===undefined} */}\r\n                            <img className=\"elementimage\" src={`data:image/jpeg;base64,${folder.Image}`} />\r\n                            <div className=\"NameElementOfList\"> \r\n                             {folder.Name}\r\n                              </div>\r\n                              </Link>\r\n                        </div>)}          \r\n                                      \r\n                           <div className=\"foldercomponents\">\r\n                        </div>  \r\n                        \r\n                        </div>\r\n                        <div className=\"foldercomponents\">\r\n                        <Toolbar previouspages={breadCrumbs} typeof_parentel=\"folder\" parent={this.props.location.state.body}></Toolbar>\r\n                        </div>\r\n                        </div>  \r\n        )\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\nasync function SaveElement (name, pfid)\r\n{ \r\n    const element =   {\r\n        \"Name\": name,\r\n        \"ParentfolderId\": Number(pfid)\r\n     }\r\n     let elemid;\r\n    await fetch(process.env.REACT_APP_API_ELEMENTS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(element), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(response=>{ return response.json()})\r\n          .then(data=>{\r\n              elemid=data;\r\n          }).catch(err => console.log(err));\r\n    return elemid\r\n    }\r\n    async function SaveImage (id,elwithimg){\r\n        await fetch(process.env.REACT_APP_API_ELEMENTS+`/image/${id}`,{\r\n            method: 'POST', // или 'PUT'\r\n            body: elwithimg, // данные могут быть 'строкой' или {объектом}!\r\n            headers: {\r\n                'Accept': 'application/json'\r\n              }}).then(function(response) {\r\n                console.log(response.status)});\r\n    }\r\n\r\nexport default class AddElement extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={name:\"\", filepath:null, file: null}\r\n        this.onChange = this.onChange.bind(this);\r\n        this.sendImage = this.sendImage.bind(this); \r\n        this.handleImageChange = this.handleImageChange.bind(this);     \r\n    }   \r\n    onChange(e) {\r\n        var val = e.target.value;\r\n        this.setState({name: val});\r\n    }\r\n\r\n    async sendImage(event) {\r\n        event.preventDefault();\r\n        const elemid=await SaveElement(this.state.name, this.props.folder.Id);\r\n        if (this.state.file!=null)\r\n        await SaveImage(elemid, this.state.file);\r\n        this.props.onClose();        \r\n        window.location.reload();\r\n    };\r\n    \r\n    handleImageChange(e) {\r\n        e.preventDefault();\r\n        if(e.target.files.length>0)\r\n        {\r\n        let form = new FormData();\r\n        for (var index = 0; index < e.target.files.length; index++) {\r\n            var element = e.target.files[index];\r\n            form.append('image', element);\r\n        }\r\n        form.append('parentfolderid', this.props.folder.Id);\r\n        this.setState({ file: form, filepath: URL.createObjectURL(e.target.files[0])});\r\n    }\r\n    else if (this.state.file!=null)\r\n    {\r\n        this.setState({ file: null, filepath: null})\r\n    }\r\n    };  \r\n\r\n    render(){\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Создание элемента</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.name} onChange={this.onChange}/>\r\n                {/* <label className=\"formlabel\">Расположение:</label>\r\n                <div className=\"place\">\r\n                <label>{this.props.folder.Name}</label> <button className=\"button arrow\"> -{'>'} </button>\r\n                </div> */}\r\n                <div className=\"modal-image\">\r\n                <label className=\"formlabel\">Фото:</label>   \r\n                <label className=\"custom-file-upload\">Загрузить изображение           \r\n                <input type=\"file\" onChange={(e)=>this.handleImageChange(e)}/>  \r\n                </label>  \r\n                {this.state.filepath===null ? <div/> :<img className=\"downloadimage\" src={this.state.filepath}/>}             \r\n                \r\n                </div>\r\n                </div>                \r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\" onClick={this.sendImage}>Сохранить</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Назад</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\n\r\nasync function SaveFolder (name, parentfolderid)\r\n{   \r\n    const folder =   {\r\n      \"Name\": name,\r\n      \"ParentfolderId\": Number(parentfolderid)\r\n   }\r\n    await fetch(process.env.REACT_APP_API_FOLDERS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(folder), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\nexport default class AddFolder extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={name:\"\", folders:null, breadCrumbs:null}\r\n        this.onChange = this.onChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);   \r\n        this.changedirectory = this.changedirectory.bind(this);\r\n    }   \r\n    onChange(e) {\r\n        var val = e.target.value;\r\n        this.setState({name: val});\r\n    }\r\n\r\n    changedirectory = param => async e => {\r\n\r\n    };\r\n   \r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        console.log(this.props);\r\n        await SaveFolder(this.state.name,this.props.folder.Id );\r\n        this.props.onClose();\r\n        window.location.reload();\r\n      }\r\n\r\n    render(){\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Создание папки</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.name} onChange={this.onChange}/>\r\n                {/* <label className=\"formlabel\">Расположение:</label>\r\n                <div className=\"place\">\r\n                <label>{this.props.folder.Name}</label> <button className=\"button arrow\"> -{'>'} </button>\r\n                </div> */}\r\n                {/* <div>\r\n                <div>\r\n                {this.props.prevpages.map(bc=>\r\n                        <div key={bc.title} className=\"gt\">\r\n                            <button className=\"BreadCrumb\" onClick={this.changedirectory({body:bc.body})}>\r\n                             {bc.title} \r\n                              </button>\r\n                              &gt;&gt;\r\n                        </div>)}\r\n                        </div>                              \r\n\r\n                </div> */}\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\" onClick={this.handleSubmit}>Сохранить</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Назад</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nasync function DeleteFolder (folderid)\r\n{\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${folderid}`,{\r\n        method: 'DELETE', // или 'PUT'\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\nasync function DeleteElement (elementid)\r\n{   \r\n    await fetch(process.env.REACT_APP_API_ELEMENTS + `/${elementid}`,{\r\n        method: 'DELETE', // или 'PUT'\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\nexport default class DeleteComponent extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        console.log(this.props);\r\n        this.state={isdeleted:null}\r\n        this.handleSubmit = this.handleSubmit.bind(this);        \r\n    }\r\n   \r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        if(this.props.typeofcomponent===\"folder\")\r\n        {\r\n          await DeleteFolder(this.props.component.Id);  \r\n        }        \r\n        else\r\n        {\r\n            await DeleteElement(this.props.component.Id);\r\n        }        \r\n        this.props.onClose();\r\n        this.setState({isdeleted:true});\r\n      }\r\n\r\n    render(){\r\n        console.log(\"рендер удаления\");\r\n        if(this.state.isdeleted)\r\n        {\r\n            let bc=this.props.prevpages;\r\n            bc.length=bc.length-1;\r\n            this.setState({isdeleted: false});\r\n            console.log(\"Я в удалении\");\r\n            return <Redirect to={{pathname: bc[bc.length-1].path, state: { body: bc[bc.length-1].body, breadCrumbs:bc}            \r\n  }}/>\r\n        }\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }     \r\n        \r\n        console.log(this.props);\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Удаление папки {this.props.component.Name}</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Вы действительно хотите удалить папку {this.props.component.Name}?</label>\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\"  onClick={this.handleSubmit}>Да</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Отменить</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function SaveFolder(folderid, name, newparentfolderid,subfolders,elements) {\r\n  const folder = {\r\n    IdFolder: Number(folderid),\r\n    Name: name,\r\n    IdParent: Number(newparentfolderid),\r\n    subfolders: subfolders,\r\n    elements:elements\r\n  };\r\n  await fetch(process.env.REACT_APP_API_FOLDERS, {\r\n    method: \"PUT\", // или 'PUT'\r\n    body: JSON.stringify(folder), // данные могут быть 'строкой' или {объектом}!\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  }).then(function (response) {\r\n    console.log(response.status);\r\n  });\r\n}\r\n\r\nexport default class EditFolder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: null,\r\n      folders: null,\r\n      isupdated: null,\r\n      breadCrumbs: null,\r\n      typeofedit:null,\r\n      path: null,\r\n      text: null,\r\n      needupate:true,\r\n      subfolders:null,\r\n      elements:null\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.showlocation = this.showlocation.bind(this);\r\n    this.Close = this.Close.bind(this);\r\n    this.onChange=this.onChange.bind(this);\r\n  }\r\n\r\n  Close(e) {    \r\n    this.props.onClose();\r\n    this.setState({needupate:true})\r\n  }\r\n  onChange(e) {\r\n    var val = e.target.value;\r\n    this.setState({ name: val });\r\n  }\r\n\r\n  RemoveSubfolder= (param) => e => {\r\n    this.setState((prevState) => ({\r\n        subfolders: prevState.subfolders.filter(\r\n          (sf) => sf.Id !== param\r\n        ),\r\n      }));   \r\n    }\r\n    RemoveElement= (param) => e => {\r\n        this.setState((prevState) => ({\r\n            elements: prevState.elements.filter(\r\n              (el) => el.Id !== param\r\n            ),\r\n          }));   \r\n        }\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/projects`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    \r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({\r\n          folders: data,\r\n          breadCrumbs: breadCrumbs,\r\n          path: { Name: param.Name, Id: param.Id },\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  };\r\n\r\n  async GetSubFoldersAndElements(parentid){\r\n      let subfolders;\r\n      let elements;    \r\n    await fetch(process.env.REACT_APP_API_FOLDERS+`/${parentid}`) \r\n    .then(response=>{ return response.json()})\r\n    .then(data=>{\r\n        subfolders=data;\r\n    }).catch(err => console.log(err));  \r\n    console.log(this.state);\r\n    await fetch(process.env.REACT_APP_API_ELEMENTS+`/${parentid}`) \r\n    .then(response=>{ return response.json()})\r\n    .then(data=>{\r\n        elements=data;\r\n    }).catch(err => console.log(err));\r\n    this.setState({subfolders:subfolders, elements:elements});\r\n}\r\n\r\nChangeShow = (param) => (e) => {\r\n    this.setState({ typeofedit: param });\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await SaveFolder(this.props.folder.Id,this.state.name,this.state.path.Id,this.state.subfolders,this.state.elements)\r\n    this.props.onClose();\r\n    this.setState({needupate:true})\r\n    window.location.reload();\r\n  };\r\n\r\n  async showlocation(event) {\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.state.text === \"Показать\"\r\n          ? this.setState({ text: \"Свернуть\", folders: data })\r\n          : this.setState({ text: \"Показать\" });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n  \r\n  async componentDidUpdate(prevProps) {\r\n    if ((this.props.show)&&(this.state.needupate)) {\r\n      this.setState({\r\n        name: this.props.folder.Name,\r\n        folders: null,\r\n        typeofedit:\"folder\",\r\n        isupdated: null,\r\n        needupate:false,\r\n        breadCrumbs: this.props.prevpages.filter((f) => f.body.Id !== this.props.folder.Id),\r\n        path: {Name: this.props.prevpages[this.props.prevpages.length-2].body.Name, Id: this.props.prevpages[this.props.prevpages.length-2].body.Id },\r\n        text: \"Показать\",\r\n      });\r\n      await this.GetSubFoldersAndElements(this.props.folder.Id)\r\n    }\r\n  }\r\n  render() {\r\n    // if (this.state.isupdated) {\r\n    //   let bc = this.props.prevpages;\r\n    //   bc[bc.length - 1].title = this.state.name;\r\n    //   bc[bc.length - 1].body.Name = this.state.name;\r\n    //   this.setState({ isupdated: false });\r\n    //   return (\r\n    //     <Redirect\r\n    //       to={{\r\n    //         pathname: bc[bc.length - 1].path,\r\n    //         state: { body: bc[bc.length - 1].body, breadCrumbs: bc },\r\n    //       }}\r\n    //     />\r\n    //   );\r\n    // }\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    if((!this.state.elements)||(!this.state.subfolders)){\r\n        return null;\r\n    }\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.Close}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">Редактировать папку</div>\r\n          </div>\r\n          {this.state.typeofedit === \"folder\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal current\">папка</button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"subfolders\")}\r\n                >\r\n                  подпапки\r\n                </button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"elements\")}\r\n                >\r\n                  элементы\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n          {this.state.typeofedit === \"subfolders\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal\" onClick={this.ChangeShow(\"folder\")}>\r\n                  папка\r\n                </button>\r\n                <button className=\"button-selector-modal current\">подпапки</button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"elements\")}\r\n                >\r\n                  элементы\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"elements\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal\" onClick={this.ChangeShow(\"folder\")}>\r\n                  папка\r\n                </button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"subfolders\")}\r\n                >\r\n                  подпапки\r\n                </button>\r\n                <button className=\"button-selector-modal current\">элементы</button>\r\n              </div>\r\n            ) : null}\r\n\r\n            {this.state.typeofedit === \"folder\" ? (<div className=\"modal-body\">\r\n            <label className=\"formlabel\"> Название:</label>\r\n            <input\r\n              className=\"forminput\"\r\n              type=\"text\"\r\n              value={this.state.name}\r\n              onChange={this.onChange}\r\n            />\r\n            <label className=\"formlabel\">Расположение:</label>\r\n            <div className=\"selectedpath\">\r\n              <label>{this.state.path.Name}</label>{\" \"}\r\n              <button className=\"arrow\" onClick={this.showlocation}>\r\n                {\" \"}\r\n                {this.state.text}{\" \"}\r\n                {this.state.text === \"Показать\" ? (\r\n                  <div>&ensp;&darr;</div>\r\n                ) : (\r\n                  <div>&ensp;&uarr;</div>\r\n                )}{\" \"}\r\n              </button>\r\n            </div>                \r\n              <div className=\"place\">\r\n              {this.state.text === \"Показать\" ? null : (\r\n                <div className=\"parentwindowforselectingpath\">\r\n                  <div className=\"modalbreadcrumbs\">\r\n                    {this.state.breadCrumbs.slice(1).map((bc) => (\r\n                      <div key={bc.title} className=\"gt\">\r\n                        <button\r\n                          className=\"BreadCrumb withoutframe\"\r\n                          onClick={this.changedirectory({\r\n                            Id: bc.body.Id,\r\n                            Name: bc.body.Name,\r\n                          })}\r\n                        >\r\n                          {bc.title}\r\n                        </button>\r\n                        &ensp;&rarr;&ensp;\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  <div className=\"windowforselectingpath\">\r\n                    <div className=\"modalfolders\">\r\n                      {this.state.folders.filter((f) => f.Id !== this.props.folder.Id).map((folder) => (\r\n                        <div key={folder.Id}>\r\n                          <button\r\n                            className=\"modalbuttonfolder\"\r\n                            onClick={this.changedirectory({\r\n                              Id: folder.Id,\r\n                              Name: folder.Name,\r\n                            })}\r\n                          >\r\n                            <div>{folder.Name}</div>\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div></div>) : null}\r\n            {this.state.typeofedit === \"subfolders\" ? (\r\n              <div className=\"modal-body-withoutcenter\">\r\n                {this.state.subfolders.map((folder) => (\r\n                          <div key={folder.Id} className=\"element-with-delete-button\">\r\n                              <button className=\"arrow\" onClick={this.RemoveSubfolder(folder.Id)}>&otimes;</button>\r\n                            <label>\r\n                              {folder.Name}\r\n                            </label>\r\n                          </div>\r\n                        ))}\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"elements\" ? (\r\n              <div className=\"modal-body-withoutcenter\">\r\n                {this.state.elements.map((folder) => (\r\n                          <div key={folder.Id} className=\"element-with-delete-button\">\r\n                              <button className=\"arrow\" onClick={this.RemoveElement(folder.Id)}>&otimes;</button>\r\n                            <label>\r\n                              {folder.Name}\r\n                            </label>\r\n                          </div>\r\n                        ))}\r\n              </div>\r\n            ) : null}\r\n            \r\n\r\n          <div className=\"modal-footer\">\r\n            <button className=\"SaveButton button\" onClick={this.handleSubmit}>\r\n              Сохранить\r\n            </button>\r\n            <button className=\"CloseButton button\" onClick={this.Close}>\r\n              Назад\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function ImportFromFolder(folderid, importcompid, type) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_FOLDERS +\r\n      `/importfromfolder?folderid=${folderid}&importcompid=${importcompid}&type=${type}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nasync function ImportFromLibrary(folderid, importcompid, password) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_FOLDERS +\r\n      `/importfromlib?folderid=${folderid}&importcompid=${importcompid}&password=${password}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\nexport default class ImportFolder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(this.props);\r\n    this.state = {\r\n      importtype: null,\r\n      body: null,\r\n      path: {\r\n        Name: this.props.folder.Name,\r\n        Id: this.props.folder.Id,\r\n        type: \"folder\",\r\n      },\r\n      selcomp: { Id: null, Name: \"\", type:\"\" },\r\n      libcomponents: null,\r\n      folders: null,\r\n      elements: null,\r\n      breadCrumbs: this.props.prevpages,\r\n      text: \"Показать\",\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.setTypeOfImport = this.setTypeOfImport.bind(this);\r\n    this.showlocation = this.showlocation.bind(this);\r\n    this.onPasswordChange = this.onPasswordChange.bind(this);\r\n  }\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (this.state.importtype === \"fromfolder\") {\r\n      await ImportFromFolder(this.props.folder.Id, this.state.path.Id, this.state.path.type);\r\n      this.props.onClose();\r\n    } else if (this.state.importtype === \"fromlibrary\") {\r\n      await ImportFromLibrary(this.props.folder.Id,this.state.selcomp.Id,this.state.selcomp.type,this.state.body);\r\n      this.props.onClose();\r\n    } else alert(\"Выберите тип импорта\");\r\n  };\r\n\r\n  selectelement = (param) => async (event) => {\r\n    this.setState({\r\n      path: { Name: param.Name, Id: param.Id, type: \"element\" },\r\n    });\r\n  };\r\n  selectcomponent = (param) => async (event) => {\r\n    this.setState({ selcomp: { Name: param.Name, Id: param.Id, type: param.type } });\r\n  };\r\n\r\n  async setTypeOfImport(event) {\r\n    if (event.target.value === \"fromfolder\") {\r\n      let folders;\r\n      let elements;\r\n      await fetch(process.env.REACT_APP_API_FOLDERS + `/${this.state.path.Id}`)\r\n        .then((response) => {\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          folders = data;\r\n        })\r\n        .catch((err) => console.log(err));\r\n      await fetch(process.env.REACT_APP_API_ELEMENTS + `/${this.state.path.Id}`)\r\n        .then((response) => {\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          elements = data;\r\n        })\r\n        .catch((err) => console.log(err));\r\n      this.setState({\r\n        elements: elements,\r\n        folders: folders,\r\n        importtype: event.target.value,\r\n        path: {\r\n          Name: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body\r\n            .Name,\r\n          Id: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id,\r\n        },\r\n      });\r\n    } else {\r\n      let libcomps;\r\n      await fetch(process.env.REACT_APP_API_LIBRARY + `/папка`)\r\n        .then((response) => {\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          libcomps = data;\r\n        })\r\n        .catch((err) => console.log(err));\r\n      this.setState({\r\n        selcomp: { Id: null, Name: \"\" },\r\n        libcomponents: libcomps,\r\n        importtype: event.target.value,\r\n      });\r\n    }\r\n  }\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/projects`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    let folders;\r\n    let elements;\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        folders = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(process.env.REACT_APP_API_ELEMENTS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        elements = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    this.setState({\r\n      elements: elements,\r\n      folders: folders,\r\n      path: {\r\n        Name: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body\r\n          .Name,\r\n        Id: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id,\r\n        type: \"folder\",\r\n      },\r\n    });\r\n  };\r\n\r\n  async showlocation(event) {\r\n    let folders;\r\n    let elements;\r\n    await fetch(\r\n      process.env.REACT_APP_API_FOLDERS +\r\n        `/${this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        folders = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(\r\n      process.env.REACT_APP_API_ELEMENTS +\r\n        `/${this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        elements = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    this.state.text === \"Показать\"\r\n      ? this.setState({\r\n          text: \"Свернуть\",\r\n          folders: folders,\r\n          elements: elements,\r\n        })\r\n      : this.setState({ text: \"Показать\" });\r\n  }\r\n\r\n  onPasswordChange(event) {\r\n    this.setState({ body: event.target.value });\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (prevProps.folder.Id !== this.props.folder.Id) {\r\n      this.setState({\r\n        importtype: null,\r\n        body: \"\",\r\n        selcomp: { Id: null, Name: \"\" },\r\n        path: {\r\n          Name: this.props.folder.Name,\r\n          Id: this.props.folder.Id,\r\n          type: \"folder\",\r\n        },\r\n        libcomponents: null,\r\n        folders: null,\r\n        breadCrumbs: this.props.prevpages,\r\n        text: \"Показать\",\r\n      });\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  render() {\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">\r\n              Импорт в папку {this.props.folder.Name}\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <div className=\"formwithradio\">\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfImport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"fromfolder\" name=\"gender\" /> Из\r\n                другой папки\r\n              </div>\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfImport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"fromlibrary\" name=\"gender\" /> Из\r\n                общей библиотеки\r\n              </div>\r\n            </div>\r\n            {this.state.importtype === \"fromlibrary\" ? (\r\n              <div className=\"exportdiv\">\r\n                <label className=\"formlabel\">Импорт:</label>\r\n                <div className=\"selectedpath\">\r\n                  <label>{this.state.selcomp.Name}</label>{\" \"}\r\n                </div>\r\n                <div className=\"place\">\r\n                  <div className=\"parentwindowforselectingpath\">\r\n                    <div className=\"windowforselectingpath\">\r\n                      <div>\r\n                        {this.state.libcomponents.map((lc) => (\r\n                          <div key={lc.Id}>\r\n                            <div\r\n                              onClick={this.selectcomponent({\r\n                                Id: lc.Id,\r\n                                Name: lc.Name,\r\n                                type:lc.Typeofcomponent\r\n                              })}\r\n                              className=\"libcomponent\"\r\n                            >\r\n                              <div>{lc.Name}</div>{\" \"}\r\n                              <div>{lc.Typeofcomponent}</div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"exportdiv\">\r\n                  <label className=\"formlabel\"> Задайте пароль:</label>\r\n                  <input\r\n                    className=\"forminput\"\r\n                    type=\"text\"\r\n                    value={this.state.body}\r\n                    onChange={this.onPasswordChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n            {this.state.importtype === \"fromfolder\" ? (\r\n              <div className=\"exportdiv\">\r\n                <label className=\"formlabel\">Импорт:</label>\r\n                <div className=\"selectedpath\">\r\n                  <label>{this.state.path.Name}</label>{\" \"}\r\n                  <button className=\"arrow\" onClick={this.showlocation}>\r\n                    {\" \"}\r\n                    {this.state.text}{\" \"}\r\n                    {this.state.text === \"Показать\" ? (\r\n                      <div>&ensp;&darr;</div>\r\n                    ) : (\r\n                      <div>&ensp;&uarr;</div>\r\n                    )}{\" \"}\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"place\">\r\n                  {this.state.text === \"Показать\" ? null : (\r\n                    <div className=\"parentwindowforselectingpath\">\r\n                      <div className=\"modalbreadcrumbs\">\r\n                        {this.state.breadCrumbs.slice(1).map((bc) => (\r\n                          <div key={bc.title} className=\"gt\">\r\n                            <button\r\n                              className=\"BreadCrumb withoutframe\"\r\n                              onClick={this.changedirectory({\r\n                                Id: bc.body.Id,\r\n                                Name: bc.body.Name,\r\n                              })}\r\n                            >\r\n                              {bc.title}\r\n                            </button>\r\n                            &ensp;&rarr;&ensp;\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                      <div className=\"windowforselectingpath\">\r\n                        <div className=\"modalfolders import\">\r\n                          {this.state.folders.map((folder) => (\r\n                            <div key={folder.Id}>\r\n                              <button\r\n                                className=\"modalbuttonfolder\"\r\n                                onClick={this.changedirectory({\r\n                                  Id: folder.Id,\r\n                                  Name: folder.Name,\r\n                                })}\r\n                              >\r\n                                <div>{folder.Name}</div>\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n\r\n                          {this.state.elements.map((el) => (\r\n                            <div key={el.Id}>\r\n                              <button\r\n                                className=\"modalbuttonelement\"\r\n                                onClick={this.selectelement({\r\n                                  Id: el.Id,\r\n                                  Name: el.Name,\r\n                                })}\r\n                              >\r\n                                <div>{el.Name}</div>\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.handleSubmit}>\r\n              Импортировать\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.props.onClose}>\r\n              Отменить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from 'react';\r\nimport AddElement from '../ModalForms/Folder/AddElement';\r\nimport AddFolder from '../ModalForms/Folder/AddFolder';\r\nimport DeleteComponent from '../ModalForms/Folder/DeleteFolder';\r\nimport EditFolder from '../ModalForms/Folder/EditFolder';\r\nimport ImportFolder from '../ModalForms/Folder/ImportFolder';\r\nimport ExportFolder from '../ModalForms/Folder/ExportFolder';\r\n\r\nimport './Toolbar.css';\r\n\r\nexport default function Toolbar(props) {\r\n\r\n    const [showAddElement, set_showAddElement] = useState(false);\r\n    const [showAddFolder, set_showAddFolder] = useState(false);\r\n    const [showDeleteComponent, set_showDeleteComponent] = useState(false);\r\n    const [showEditComponent, set_showEditComponent] = useState(false);\r\n    const [showExportComponent, set_showExportComponent] = useState(false);\r\n    const [showImportComponent, set_showImportComponent] = useState(false);\r\n    \r\n    \r\n    return(\r\n            <div className=\"ToolbarRelative\">\r\n            <div className=\"Toolbar\">\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddElement(true)}>Добавить элемент</button>\r\n            <AddElement prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showAddElement(false)} show={showAddElement}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddFolder(true)}>Добавить папку</button>\r\n            <AddFolder prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showAddFolder(false)} show={showAddFolder}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showDeleteComponent(true)}>Удалить папку</button>\r\n            <DeleteComponent prevpages={props.previouspages} component={props.parent} onClose={()=>set_showDeleteComponent(false)} show={showDeleteComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showEditComponent(true)}>Изменить папку</button>\r\n            <EditFolder prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showEditComponent(false)} show={showEditComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showExportComponent(true)}>Экспорт папки</button>\r\n            <ExportFolder prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showExportComponent(false)} show={showExportComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showImportComponent(true)}>Импорт в папку</button>\r\n            <ImportFolder prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showImportComponent(false)} show={showImportComponent}/>\r\n            </div>\r\n            </div>\r\n    )    \r\n  \r\n}","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Toolbar from \"../Toolbar/ToolbarFolder\";\r\nimport logo from \"../App/logo4x.png\";\r\nimport \"./FolderPage.css\";\r\n\r\nexport default class FolderPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { folders: null, elements: null, breadCrumbs: null };\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n  handleClick(e) {\r\n    e.preventDefault();\r\n    this.props.history.push(\"/\");\r\n    localStorage.clear();\r\n    window.location.reload();\r\n  }\r\n\r\n  async GetFolders(parentid) {\r\n    const breadCrumbs = this.props.location.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(this.props.location.state.body.Id);\r\n    // const index=breadCrumbs.indexOf(elem => elem.path==`/template/${this.props.match.params.id}/${this.props.match.params.name}`);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: this.props.location.state.body.Name,\r\n        path: `/projects`,\r\n        body: {\r\n          Name: this.props.location.state.body.Name,\r\n          Id: this.props.location.state.body.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ folders: data, breadCrumbs: breadCrumbs });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  }\r\n  async GetElements(parentid) {\r\n    await fetch(process.env.REACT_APP_API_ELEMENTS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ elements: data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await this.GetFolders(this.props.location.state.body.Id);\r\n    await this.GetElements(this.props.location.state.body.Id);\r\n  }\r\n  async componentDidUpdate(prevProps) {\r\n    console.log(\"Я в обновлении темплэйта\");\r\n    if (\r\n      prevProps.location.state.body.Id !== this.props.location.state.body.Id\r\n    ) {\r\n      await this.GetFolders(this.props.location.state.body.Id);\r\n      await this.GetElements(this.props.location.state.body.Id);\r\n      // window.location.reload();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.folders || !this.state.elements) {\r\n      return <div />;\r\n    }\r\n    const { folders, elements, breadCrumbs } = this.state; //сначала\r\n    return (\r\n      <div className=\"folderPage\">\r\n        <div className=\"Header\">\r\n          <div className=\"BreadCrumbs\">\r\n            {breadCrumbs.map((bc) => (\r\n              <div key={bc.title} className=\"gt\">\r\n                <Link\r\n                  className=\"BreadCrumb\"\r\n                  to={{\r\n                    pathname: bc.path,\r\n                    state: { body: bc.body, breadCrumbs: breadCrumbs },\r\n                  }}\r\n                >\r\n                  {bc.title}\r\n                </Link>\r\n                &ensp;&rarr;&ensp;\r\n              </div>\r\n            ))}\r\n          </div>          \r\n          <div className=\"settingsinheader\">\r\n          <Link to={{pathname:`/library`, state: {breadCrumbs:breadCrumbs}}}>\r\n              {<button className=\"btn_logout\">общая библиотека</button>}\r\n              </Link>          \r\n          <Link to={{pathname:\"/settings\"}} >\r\n              {<button className=\"btn_logout\">настройки</button>}\r\n              </Link>    \r\n              {<button className=\"btn_logout\" onClick={this.handleClick}>выход</button>}                                        \r\n              <img className=\"logo\" src={logo} alt=\"toolbaritem\"/>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"listview\">\r\n          {folders.map((folder) => (\r\n            <div key={folder.Id}>\r\n              <Link\r\n                className=\"folderinlist\"\r\n                to={{\r\n                  pathname: `/projects`,\r\n                  state: { breadCrumbs: breadCrumbs, body: folder },\r\n                }}\r\n              >\r\n                <div className=\"NameElementOfList\">{folder.Name}</div>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n          {elements.map((el) => (\r\n            <div key={el.Id}>\r\n              <Link\r\n                className=\"elementinlist\"\r\n                to={{\r\n                  pathname: `/element`,\r\n                  state: { breadCrumbs: breadCrumbs, body: el },\r\n                }}\r\n              >\r\n                <img\r\n                  className=\"elementimage\"\r\n                  src={`data:image/jpeg;base64,${el.Image}`}\r\n                />\r\n                <div className=\"NameElementOfList\">{el.Name}</div>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"foldercomponents\">\r\n          <Toolbar\r\n            previouspages={breadCrumbs}\r\n            parent={this.props.location.state.body}\r\n          ></Toolbar>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\n\r\n\r\nasync function SaveCharacteristics (arrayofcharacteristics, idel)\r\n{\r\n    const box =   {\r\n        \"characteristics\": arrayofcharacteristics,\r\n        \"elementid\": Number(idel)\r\n     }\r\n    await fetch(process.env.REACT_APP_API_CHARACTERISTICS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(box), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\nexport default class AddCharacteristics extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={characteristics:null, currentchar:{name:'', value:''}}\r\n        this.ChangeName = this.ChangeName.bind(this);\r\n        this.ChangeValue = this.ChangeValue.bind(this);\r\n        this.CreateNew = this.CreateNew.bind(this);  \r\n        this.CreateNewName = this.CreateNewName.bind(this);\r\n        this.CreateNewValue = this.CreateNewValue.bind(this);   \r\n        this.Save = this.Save.bind(this);   \r\n    }  \r\n\r\n    async Save(e){\r\n        e.preventDefault();\r\n        let array=[];\r\n        if((this.state.currentchar.name!=='')||(this.state.currentchar.name!=='')){\r\n            if(this.state.characteristics===null)\r\n        {\r\n            array=[{name:this.state.currentchar.name, value:this.state.currentchar.value, id:0}]            \r\n        }  \r\n        else{\r\n            array=[...this.state.characteristics, {name:this.state.currentchar.name, value:this.state.currentchar.value, id:this.state.characteristics.length}];            \r\n        }               \r\n        }\r\n        else{\r\n            array=this.state.characteristics;\r\n        }\r\n        await SaveCharacteristics(array, this.props.element.Id);\r\n        this.props.onClose();        \r\n        window.location.reload();\r\n    }\r\n    CreateNewName(e){\r\n        var val = e.target.value;\r\n        this.setState(prevState => ({currentchar:{name:val, value:prevState.currentchar.value}}))\r\n    }\r\n    CreateNewValue(e){\r\n        var val = e.target.value;\r\n        this.setState(prevState => ({currentchar:{name:prevState.currentchar.name, value:val}}))\r\n    }\r\n    \r\n    ChangeName = param => e => {\r\n        this.setState(prevState => {\r\n            const newItems = [...prevState.characteristics];\r\n            newItems[param].name = e.target.value;\r\n            return {characteristics: newItems};\r\n        })\r\n    }\r\n    ChangeValue= param => e => {\r\n        this.setState(prevState => {\r\n            const newItems = [...prevState.characteristics];\r\n            newItems[param].value = e.target.value;\r\n            return {characteristics: newItems};\r\n        })\r\n    }\r\n    \r\n    CreateNew(e) {\r\n        e.preventDefault();  \r\n        if(this.state.characteristics===null)\r\n        {\r\n            this.setState(prevState => ({\r\n                characteristics: [{name:prevState.currentchar.name, value:prevState.currentchar.value, id:0}]\r\n              , currentchar:{name:'', value:''}}))\r\n        }  \r\n        else{\r\n            this.setState(prevState => ({\r\n                characteristics: [...prevState.characteristics, {name:prevState.currentchar.name, value:prevState.currentchar.value, id:prevState.characteristics.length}]\r\n              , currentchar:{name:'', value:''}}))\r\n        }        \r\n    }\r\n\r\n    render(){\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Добавление характеристик</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.currentchar.name} onChange={this.CreateNewName}/>\r\n                <label className=\"formlabel\"> Значение:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.currentchar.value} onChange={this.CreateNewValue}/>  \r\n                {this.state.characteristics!==null? this.state.characteristics.map(char=>\r\n                        <div key={char.id}>\r\n                            <label className=\"formlabel\"> Название:</label>\r\n                            <input className=\"forminput\" type=\"text\" value={char.name} onChange={this.ChangeName(char.id)}/>\r\n                            <label className=\"formlabel\"> Значение:</label>\r\n                            <input className=\"forminput\" type=\"text\" value={char.value} onChange={this.ChangeValue(char.id)}/>  \r\n                        </div>):null} \r\n                </div>  \r\n                <button onClick={this.CreateNew}>Добавить еще одну</button>              \r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\" onClick={this.Save}>Сохранить</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Назад</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nasync function AddTemplate (templateid, elementid)\r\n{   \r\n    // await fetch(process.env.REACT_APP_API_ELEMENTS + `/templatefolder?templateid=${templateid}&elementid=${elementid}`,{\r\n    //     method: 'GET', // или 'PUT'\r\n    //     headers: {\r\n    //         'Content-Type':'application/json'\r\n    //     }}).then(data => data.json());\r\n    console.log(templateid)\r\n}\r\n\r\nexport default class AddTemplateElement extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        console.log(this.props);\r\n        this.state={path:{Name:'', Id:null}, isneedupdate:true, folders:null, telements:null, breadCrumbs:null}\r\n        this.handleSubmit = this.handleSubmit.bind(this); \r\n        this.changedirectory = this.changedirectory.bind(this); \r\n        this.Selecttelement = this.Selecttelement.bind(this);   \r\n        this.CloseWindow = this.CloseWindow.bind(this);\r\n\r\n    }\r\n\r\n    CloseWindow(){\r\n        this.props.onClose();\r\n        this.setState({isneedupdate:true});\r\n    }\r\n\r\n    Selecttelement = param => async event =>{\r\n        this.setState({path:{Name:param.Name, Id:param.Id}})\r\n    }\r\n\r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        await AddTemplate(this.state.path.Id,this.props.element.Id)\r\n        this.props.onClose();\r\n      }\r\n    \r\n    async GetFoldersAndElements (idparent, breadCrumbs) {\r\n        let folders;\r\n        let elements;\r\n        await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS+`/${idparent}`) \r\n        .then(response=>{ return response.json()})\r\n        .then(data=>{\r\n            this.setState({folders:data});\r\n        }).catch(err => console.log(err));  \r\n        await fetch(process.env.REACT_APP_API_TEMPLATEELEMENTS+`/${idparent}`) \r\n        .then(response=>{ return response.json()})\r\n        .then(data=>{\r\n            this.setState({telements:data});\r\n        }).catch(err => console.log(err));  \r\n    }\r\n\r\n    changedirectory= param => async event => {\r\n        const breadCrumbs = this.state.breadCrumbs;         \r\n        const index = breadCrumbs.map(function(e) { return e.body.Id; }).indexOf(param.Id);\r\n        if(index===-1)\r\n        {\r\n        breadCrumbs.push({\r\n            title: param.Name,\r\n            path: `/templates`,\r\n            body:{\r\n                \"Name\":param.Name,\r\n                \"Id\":param.Id\r\n            }\r\n          });\r\n        }\r\n        else\r\n        {\r\n            breadCrumbs.length=index+1;\r\n        }  \r\n        this.setState({breadCrumbs:breadCrumbs})\r\n        await this.GetFoldersAndElements(param.Id,breadCrumbs)\r\n    };  \r\n    \r\n    async componentDidUpdate(prevProps){\r\n    if (this.props.show)\r\n    {\r\n    if (this.state.isneedupdate === true)\r\n    {\r\n        this.setState({path:{Name:'', Id:null}, folders:null, telements:null, breadCrumbs:[{\r\n            title: 'Библиотека',\r\n            path: '/templae',  \r\n            body: {\r\n                \"Name\":\"Библиотека\",\r\n                \"Id\":0\r\n            }            \r\n          }], isneedupdate:false})\r\n          await this.GetFoldersAndElements(0, null);\r\n    }\r\n    }\r\n  }\r\n\r\n    render(){\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }\r\n        if((!this.state.breadCrumbs)||(!this.state.folders)||(!this.state.telements)){\r\n            return null\r\n        }\r\n        console.log(this.props);\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Добавление класса</div>\r\n                </div>\r\n                <div className=\"modal-body\">   \r\n                <label className=\"formlabel\">Расположение класса:</label>\r\n                <div className=\"selectedpath\"><label>{this.state.path.Name}</label></div>\r\n                <div className=\"place\">        \r\n                <div className=\"parentwindowforselectingpath\">\r\n                    <div className=\"modalbreadcrumbs\">\r\n                {this.state.breadCrumbs.map(bc=>\r\n                        <div key={bc.title} className=\"gt\">\r\n                            <button className=\"BreadCrumb withoutframe\" onClick={this.changedirectory({Id:bc.body.Id, Name:bc.body.Name})}>\r\n                             {bc.title} \r\n                              </button>\r\n                              &ensp;&rarr;&ensp;\r\n                        </div>)}\r\n                        </div>\r\n                <div className=\"windowforselectingpath\">     \r\n                {this.state.folders.length>0?<div className=\"modalfolders\">        \r\n                        {this.state.folders.map(folder=>\r\n                        <div key={folder.Id} >\r\n                            <button className=\"modalbuttonfolder\" onClick={this.changedirectory({Id:folder.Id, Name:folder.Name})}>\r\n                             <div> \r\n                             {folder.Name}\r\n                              </div>\r\n                              </button>\r\n                        </div>)} \r\n                        </div>:null}     \r\n\r\n                {this.state.telements.length>0?<div className=\"modalfolders\">              \r\n                        {this.state.telements.map(el=>\r\n                        <div key={el.Id}>\r\n                            <button className=\"modalbuttonelement\" onClick={this.Selecttelement({Id:el.Id, Name:el.Name})}>\r\n                             <div> \r\n                             {el.Name}\r\n                              </div>\r\n                              </button>\r\n                        </div>)}                         \r\n                        </div>:null}\r\n                        </div>                              \r\n\r\n                </div>\r\n                \r\n                </div>\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\"  onClick={this.handleSubmit}>Экспортировать</button>\r\n                <button className=\"button CloseButton\" onClick={this.CloseWindow}>Отменить</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nasync function DeleteElement (elementid)\r\n{   \r\n    await fetch(process.env.REACT_APP_API_ELEMENTS + `/${elementid}`,{\r\n        method: 'DELETE', // или 'PUT'\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\nexport default class DeleteComponent extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        console.log(this.props);\r\n        this.state={isdeleted:null}\r\n        this.handleSubmit = this.handleSubmit.bind(this);        \r\n    }\r\n   \r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        await DeleteElement(this.props.element.Id);\r\n        this.props.onClose();\r\n        this.setState({isdeleted:true});\r\n      }\r\n\r\n    render(){\r\n        console.log(\"рендер удаления\");\r\n        if(this.state.isdeleted)\r\n        {\r\n            let bc=this.props.prevpages;\r\n            bc.length=bc.length-1;\r\n            this.setState({isdeleted: false});\r\n            console.log(\"Я в удалении\");\r\n            return <Redirect to={{pathname: bc[bc.length-1].path, state: { body: bc[bc.length-1].body, breadCrumbs:bc}            \r\n  }}/>\r\n        }\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }     \r\n        \r\n        console.log(this.props);\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Удаление элемента {this.props.element.Name}</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Вы действительно хотите удалить элемент {this.props.element.Name}?</label>\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\"  onClick={this.handleSubmit}>Да</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Отменить</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\n\r\nasync function Edit(arrayofcharacteristics, idel) {\r\n  const box = {\r\n    characteristics: arrayofcharacteristics,\r\n    elementid: Number(idel),\r\n  };\r\n  await fetch(process.env.REACT_APP_API_CHARACTERISTICS, {\r\n    method: \"POST\", // или 'PUT'\r\n    body: JSON.stringify(box), // данные могут быть 'строкой' или {объектом}!\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  }).then(function (response) {\r\n    console.log(response.status);\r\n  });\r\n}\r\n\r\nexport default class EditElement extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      templatecharacteristics: null,\r\n      characteristics: null,\r\n      typeofedit: \"element\",\r\n      relations: null,\r\n      element: this.props.element,\r\n      isneedupdate: true,\r\n    };\r\n    this.onChange = this.onChange.bind(this);\r\n    this.Save = this.Save.bind(this);\r\n    this.handleImageChange = this.handleImageChange.bind(this);\r\n  }\r\n  //Для характеристик: изменить название характеристики\r\n  ChangeName = (param) => (e) => {\r\n    this.setState((prevState) => {\r\n      const newItems = [...prevState.characteristics];\r\n      newItems[param].name = e.target.value;\r\n      return { characteristics: newItems };\r\n    });\r\n  };\r\n\r\n  ChangeShow = (param) => (e) => {\r\n    this.setState({ typeofedit: param });\r\n  };\r\n\r\n  //Для характеристик: удалить характеристику\r\n  DeleteChar = (param) => (e) => {\r\n    this.setState((prevState) => ({\r\n      characteristics: prevState.characteristics.filter(\r\n        (char) => char.Id !== param\r\n      ),\r\n    }));\r\n  };\r\n  //Для классов: удалить класс\r\n  DeleteClass = (param) => (e) => {\r\n    this.setState((prevState) => ({\r\n      templatecharacteristics: prevState.templatecharacteristics.filter(\r\n        (char) => char.Id !== param\r\n      ),\r\n    }));\r\n  };\r\n  //Для характеристик: изменить значение характеристики\r\n  ChangeValue = (param) => (e) => {\r\n    this.setState((prevState) => {\r\n      const newItems = [...prevState.characteristics];\r\n      newItems[param].value = e.target.value;\r\n      return { characteristics: newItems };\r\n    });\r\n  };\r\n\r\n  //Для свзяли: удалить связь\r\n  DeleteRelation = (param) => (e) => {\r\n    this.setState((prevState) => ({\r\n      relations: prevState.relations.filter((rel) => rel.Id !== param),\r\n    }));\r\n  };\r\n  //Для элемента: изменить имя\r\n  onChange(e) {\r\n    var val = e.target.value;\r\n    this.setState({ name: val });\r\n  }\r\n  //Для элемента: изменить фото\r\n  async Save(event) {\r\n    event.preventDefault();\r\n    // await SaveElement(this.state.name, this.props.folder.Id);\r\n    // if (this.state.file != null) await SaveImage(this.state.file);\r\n    this.props.onClose();\r\n    window.location.reload();\r\n  }\r\n\r\n  handleImageChange(e) {\r\n    e.preventDefault();\r\n    if (e.target.files.length > 0) {\r\n      let form = new FormData();\r\n      for (var index = 0; index < e.target.files.length; index++) {\r\n        var element = e.target.files[index];\r\n        form.append(\"image\", element);\r\n      }\r\n      form.append(\"parentfolderid\", this.props.folder.Id);\r\n      this.setState({\r\n        file: form,\r\n        filepath: URL.createObjectURL(e.target.files[0]),\r\n      });\r\n    } else if (this.state.file != null) {\r\n      this.setState({ file: null, filepath: null });\r\n    }\r\n  }\r\n  async GetFoldersElementsRelations(parentid) {\r\n    let tchars;\r\n    let chars;\r\n    let relations;\r\n    await fetch(\r\n      process.env.REACT_APP_API_CHARACTERISTICS + `?idelement=${parentid}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n          tchars=data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(process.env.REACT_APP_API_CHARACTERISTICS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        chars=data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(process.env.REACT_APP_API_RELATIONS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        relations=data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    this.setState({\r\n      templatecharacteristics: tchars,\r\n      characteristics: chars,\r\n      relations: relations,\r\n    });\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (this.props.show) {\r\n      if (this.state.isneedupdate === true) {\r\n        this.setState({\r\n            templatecharacteristics: null,\r\n            characteristics: null,\r\n            typeofedit: \"element\",\r\n            relations: null,\r\n            element: this.props.element,\r\n            isneedupdate: false,\r\n          });\r\n        await this.GetFoldersElementsRelations(this.props.element.Id);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    if ((!this.state.characteristics)||(!this.state.templatecharacteristics)||(!this.state.relations)) {\r\n        return null;\r\n      }\r\n\r\n    const array = this.state.templatecharacteristics.map(function (item) {\r\n      return { idparent: item.IdParent, name: item.NameParent };\r\n    });\r\n    var setObj = new Set(); // create key value pair from array of array\r\n\r\n    var groups = array.reduce((acc, item) => {\r\n      if (!setObj.has(item.idparent)) {\r\n        setObj.add(item.idparent, item);\r\n        acc.push(item);\r\n      }\r\n      return acc;\r\n    }, []);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">Редактирование элемента</div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            {this.state.typeofedit === \"element\" ? (\r\n              <div className=\"ShowMenu\">\r\n                <button className=\"button current\">элемент</button>\r\n                <button\r\n                  className=\"button\"\r\n                  onClick={this.ChangeShow(\"characteristics\")}\r\n                >\r\n                  харакеристики\r\n                </button>\r\n                <button\r\n                  className=\"button\"\r\n                  onClick={this.ChangeShow(\"relations\")}\r\n                >\r\n                  связи\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"characteristics\" ? (\r\n              <div className=\"ShowMenu\">\r\n                <button className=\"button\" onClick={this.ChangeShow(\"element\")}>\r\n                  элемент\r\n                </button>\r\n                <button className=\"button current\">харакеристики</button>\r\n                <button\r\n                  className=\"button\"\r\n                  onClick={this.ChangeShow(\"relations\")}\r\n                >\r\n                  связи\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"relations\" ? (\r\n              <div className=\"ShowMenu\">\r\n                <button className=\"button\" onClick={this.ChangeShow(\"element\")}>\r\n                  элемент\r\n                </button>\r\n                <button\r\n                  className=\"button\"\r\n                  onClick={this.ChangeShow(\"characteristics\")}\r\n                >\r\n                  харакеристики\r\n                </button>\r\n                <button className=\"button current\">связи</button>\r\n              </div>\r\n            ) : null}\r\n\r\n            {this.state.typeofedit === \"element\" ? (\r\n              <div>\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input\r\n                  className=\"forminput\"\r\n                  type=\"text\"\r\n                  value={this.state.name}\r\n                  onChange={this.onChange}\r\n                />\r\n                <div className=\"modal-image\">\r\n                  <label className=\"formlabel\">Изображение:</label>\r\n                  <input\r\n                    type=\"file\"\r\n                    onChange={(e) => this.handleImageChange(e)}\r\n                  />\r\n                  {this.state.filepath === null ? (\r\n                    <div />\r\n                  ) : (\r\n                    <img className=\"downloadimage\" src={this.state.filepath} />\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"characteristics\" ? (\r\n              <div>\r\n                {groups.map((group) => (\r\n                  <div key={group.idparent} className=\"ParentElement\">\r\n                    <button className=\"button arrow\">&otimes;</button>{group.name}\r\n                    {/* {templatecharacteristics\r\n                    .filter((number) => number.IdParent === group.idparent)\r\n                    .map((number) => (\r\n                      <div\r\n                        key={number.IdCharacter}\r\n                        className=\"ParentCharacteristic\"\r\n                      >\r\n                        {number.NameCharacter}: {number.ValueCharacter}\r\n                      </div>\r\n                    ))} */}\r\n                  </div>\r\n                ))}\r\n\r\n                {this.state.characteristics.map((folder) => (\r\n                  <div key={folder.Id}>\r\n                    <button className=\"button arrow\">&otimes;</button> {folder.Name}: {folder.Value}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"relations\" ? (\r\n              <div>\r\n                {this.state.relations.map((folder) => (\r\n                  <div key={folder.IdFirst}>\r\n                      <button className=\"button arrow\">&otimes;</button>\r\n                    {folder.NameFirstElement}&ensp;&rarr;&ensp;\r\n                    {folder.NameSecondElement}: {folder.Rel1to2}\r\n                    {folder.Rel2to1 !== null ? (\r\n                      <div>\r\n                        {folder.NameSecondElement}&ensp;&rarr;&ensp;\r\n                        {folder.NameFirstElement}: {folder.Rel2to1}\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.Save}>\r\n              Сохранить изменения\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.props.onClose}>\r\n              Назад\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\nasync function SaveElement (name, pfid)\r\n{ \r\n    const element =   {\r\n        \"Name\": name,\r\n        \"ParentfolderId\": Number(pfid)\r\n     }\r\n    await fetch(process.env.REACT_APP_API_ELEMENTS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(element), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n    }\r\n    async function SaveImage (elwithimg){\r\n        await fetch(process.env.REACT_APP_API_ELEMENTS+\"/image\",{\r\n            method: 'POST', // или 'PUT'\r\n            body: elwithimg, // данные могут быть 'строкой' или {объектом}!\r\n            headers: {\r\n                'Accept': 'application/json'\r\n              }}).then(function(response) {\r\n                console.log(response.status)});\r\n    }\r\n\r\nexport default class AddElement extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={name:\"\", filepath:null, file: null}\r\n        this.onChange = this.onChange.bind(this);\r\n        this.sendImage = this.sendImage.bind(this); \r\n        this.handleImageChange = this.handleImageChange.bind(this);     \r\n    }   \r\n    onChange(e) {\r\n        var val = e.target.value;\r\n        this.setState({name: val});\r\n    }\r\n\r\n    async sendImage(event) {\r\n        event.preventDefault();\r\n        await SaveElement(this.state.name, this.props.folder.Id);\r\n        if (this.state.file!=null)\r\n        await SaveImage(this.state.file);\r\n        this.props.onClose();        \r\n        window.location.reload();\r\n    };\r\n    \r\n    handleImageChange(e) {\r\n        e.preventDefault();\r\n        if(e.target.files.length>0)\r\n        {\r\n        let form = new FormData();\r\n        for (var index = 0; index < e.target.files.length; index++) {\r\n            var element = e.target.files[index];\r\n            form.append('image', element);\r\n        }\r\n        form.append('parentfolderid', this.props.folder.Id);\r\n        this.setState({ file: form, filepath: URL.createObjectURL(e.target.files[0])});\r\n    }\r\n    else if (this.state.file!=null)\r\n    {\r\n        this.setState({ file: null, filepath: null})\r\n    }\r\n    };  \r\n\r\n    render(){\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Создание элемента</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.name} onChange={this.onChange}/>\r\n                <label className=\"formlabel\">Расположение:</label>\r\n                <div className=\"place\">\r\n                <label>{this.props.folder.Name}</label> <button className=\"button arrow\"> -{'>'} </button>\r\n                </div>\r\n                <div className=\"modal-image\">\r\n                <label className=\"formlabel\">Фото:</label>                \r\n                <input type=\"file\" onChange={(e)=>this.handleImageChange(e)}/>  \r\n                {this.state.filepath===null ? <div/> :<img className=\"downloadimage\" src={this.state.filepath}/>}             \r\n                \r\n                </div>\r\n                </div>                \r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\" onClick={this.sendImage}>Сохранить</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Назад</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function AddRelationTwoLines(\r\n  firstelement,\r\n  secondelement,\r\n  firsttosec,\r\n  sectofirst\r\n) {\r\n  const box = {\r\n    Firstelementid: Number(firstelement),\r\n    Secondelementid: Number(secondelement),\r\n    Rel1to2: firsttosec,\r\n    Rel2to1: sectofirst,\r\n  };\r\n  await fetch(process.env.REACT_APP_API_RELATIONS + `/relation2`, {\r\n    method: \"POST\", // или 'PUT'\r\n    body: JSON.stringify(box), // данные могут быть 'строкой' или {объектом}!\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  }).then(function (response) {\r\n    console.log(response.status);\r\n  });\r\n}\r\n\r\nasync function AddRelationOneLine(firstelement, secondelement, firsttosec) {\r\n  const box = {\r\n    Firstelementid: Number(firstelement),\r\n    Secondelementid: Number(secondelement),\r\n    Rel1to2: firsttosec,\r\n    Rel2to1: null,\r\n  };\r\n  await fetch(process.env.REACT_APP_API_RELATIONS + `/relation1`, {\r\n    method: \"POST\", // или 'PUT'\r\n    body: JSON.stringify(box), // данные могут быть 'строкой' или {объектом}!\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  }).then(function (response) {\r\n    console.log(response.status);\r\n  });\r\n}\r\n\r\nexport default class AddRelation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(this.props);\r\n    this.state = {\r\n      path: { Name: \"\", Id: null },\r\n      typeofrel: \"Односторонняя\",\r\n      firstrel: null,\r\n      secondrel: null,\r\n      defaultdirection: true,\r\n      isneedupdate: true,\r\n      folders: null,\r\n      elements: null,\r\n      breadCrumbs: this.props.prevpages.slice(0, -1),\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.changedirectory = this.changedirectory.bind(this);\r\n    this.Selecttelement = this.Selecttelement.bind(this);\r\n    this.CloseWindow = this.CloseWindow.bind(this);\r\n    this.changedirection = this.changedirection.bind(this);\r\n    this.changeonelinerel = this.changeonelinerel.bind(this);\r\n    this.changesecondlinerel = this.changesecondlinerel.bind(this);\r\n    this.changetypeofrel = this.changetypeofrel.bind(this);\r\n  }\r\n\r\n  changetypeofrel(e) {\r\n    this.state.typeofrel === \"Односторонняя\"\r\n      ? this.setState({ typeofrel: \"Двусторонняя\" })\r\n      : this.setState({ typeofrel: \"Односторонняя\" });\r\n  }\r\n\r\n  changeonelinerel(e) {\r\n    this.setState({ firstrel: e.target.value });\r\n  }\r\n\r\n  changesecondlinerel(e) {\r\n    this.setState({ secondrel: e.target.value });\r\n  }\r\n\r\n  changedirection(e) {\r\n    this.state.defaultdirection\r\n      ? this.setState({ defaultdirection: false })\r\n      : this.setState({ defaultdirection: true });\r\n  }\r\n\r\n  CloseWindow() {\r\n    this.props.onClose();\r\n    this.setState({ isneedupdate: true });\r\n  }\r\n\r\n  Selecttelement = (param) => async (event) => {\r\n    this.setState({ path: { Name: param.Name, Id: param.Id } });\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (this.state.typeofrel === \"Односторонняя\") {\r\n      if (this.state.defaultdirection) {\r\n        await AddRelationOneLine(\r\n          this.props.element.Id,\r\n          this.state.path.Id,\r\n          this.state.firstrel\r\n        );\r\n      } else {\r\n        await AddRelationOneLine(\r\n          this.state.path.Id,\r\n          this.props.element.Id,\r\n          this.state.firstrel\r\n        );\r\n      }\r\n    } else {\r\n      if (this.state.defaultdirection) {\r\n        await AddRelationTwoLines(\r\n          this.props.element.Id,\r\n          this.state.path.Id,\r\n          this.state.firstrel,\r\n          this.state.secondrel\r\n        );\r\n      } else {\r\n        await AddRelationTwoLines(\r\n          this.state.path.Id,\r\n          this.props.element.Id,\r\n          this.state.firstrel,\r\n          this.state.secondrel\r\n        );\r\n      }\r\n    }\r\n    window.location.reload();    \r\n    this.props.onClose();\r\n  };\r\n\r\n  async GetFoldersAndElements(idparent) {\r\n    let folders;\r\n    let elements;\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${idparent}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        folders = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(process.env.REACT_APP_API_ELEMENTS + `/${idparent}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        elements = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    this.setState({ folders: folders, elements: elements });\r\n  }\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/templates`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    this.setState({ breadCrumbs: breadCrumbs });\r\n    await this.GetFoldersAndElements(param.Id, breadCrumbs);\r\n  };\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (this.props.show) {\r\n      if (this.state.isneedupdate === true) {\r\n        this.setState({\r\n          path: { Name: \"\", Id: null },\r\n          defaultdirection: true,\r\n          isneedupdate: false,\r\n          folders: null,\r\n          elements: null,\r\n          breadCrumbs: this.props.prevpages.slice(0, -1),\r\n        });\r\n        await this.GetFoldersAndElements(\r\n          this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    if (\r\n      !this.state.breadCrumbs ||\r\n      !this.state.folders ||\r\n      !this.state.elements\r\n    ) {\r\n      return null;\r\n    }\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">Добавление связи</div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <label className=\"formlabel\">Связать элемент с:</label>\r\n            <div className=\"selectedpath\">\r\n              <label>\r\n                {this.state.path.Name !== \"\" ? (\r\n                  <div>{this.state.path.Name}</div>\r\n                ) : (\r\n                  <div>Элемент не выбран</div>\r\n                )}\r\n              </label>\r\n            </div>\r\n            <div className=\"place\">\r\n              <div className=\"parentwindowforselectingpath\">\r\n                <div className=\"modalbreadcrumbs\">\r\n                  {this.state.breadCrumbs.slice(1).map((bc) => (\r\n                    <div key={bc.title} className=\"gt\">\r\n                      <button\r\n                        className=\"BreadCrumb withoutframe\"\r\n                        onClick={this.changedirectory({\r\n                          Id: bc.body.Id,\r\n                          Name: bc.body.Name,\r\n                        })}\r\n                      >\r\n                        {bc.title}\r\n                      </button>\r\n                      &ensp;&rarr;&ensp;\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                <div className=\"windowforselectingpath\">\r\n                  {this.state.folders.length > 0 ? (\r\n                    <div className=\"modalfolders\">\r\n                      {this.state.folders.map((folder) => (\r\n                        <div key={folder.Id}>\r\n                          <button\r\n                            className=\"modalbuttonfolder\"\r\n                            onClick={this.changedirectory({\r\n                              Id: folder.Id,\r\n                              Name: folder.Name,\r\n                            })}\r\n                          >\r\n                            <div>{folder.Name}</div>\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : null}\r\n\r\n                  {this.state.elements.length > 0 ? (\r\n                    <div className=\"modalfolders\">\r\n                      {this.state.elements.map((el) => (\r\n                        <div key={el.Id}>\r\n                          <button\r\n                            className=\"modalbuttonelement\"\r\n                            onClick={this.Selecttelement({\r\n                              Id: el.Id,\r\n                              Name: el.Name,\r\n                            })}\r\n                          >\r\n                            <div>{el.Name}</div>\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {this.state.path.Name !== \"\" ? (\r\n              <div className=\"Relations\">\r\n                {this.state.defaultdirection ? (\r\n                  <label className=\"formlabel\">\r\n                    Связь {this.props.element.Name} с {this.state.path.Name}\r\n                  </label>\r\n                ) : (\r\n                  <label className=\"formlabel\">\r\n                    Связь {this.state.path.Name} с {this.props.element.Name}\r\n                  </label>\r\n                )}\r\n                <button className=\"button arrow\" onClick={this.changedirection}>\r\n                  &harr;\r\n                </button>\r\n                <input\r\n                  className=\"forminput\"\r\n                  type=\"text\"\r\n                  value={this.state.firstrel}\r\n                  onChange={this.changeonelinerel}\r\n                />\r\n                {this.state.typeofrel === \"Двусторонняя\" ? (\r\n                  <div>\r\n                    {this.state.defaultdirection ? (\r\n                      <label className=\"formlabel\">\r\n                        Связь {this.state.path.Name} с {this.props.element.Name}\r\n                      </label>\r\n                    ) : (\r\n                      <label className=\"formlabel\">\r\n                        Связь {this.props.element.Name} с {this.state.path.Name}\r\n                      </label>\r\n                    )}\r\n                    <input\r\n                      className=\"forminput\"\r\n                      type=\"text\"\r\n                      value={this.state.secondrel}\r\n                      onChange={this.changesecondlinerel}\r\n                    />\r\n                  </div>\r\n                ) : null}\r\n                <div className=\"selectedpath\">\r\n                  <label className=\"formlabel\">\r\n                    Тип связи: {this.state.typeofrel}\r\n                  </label>\r\n                  <button\r\n                    className=\"button arrow\"\r\n                    onClick={this.changetypeofrel}\r\n                  >\r\n                    Изменить\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.handleSubmit}>\r\n              Экспортировать\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.CloseWindow}>\r\n              Отменить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from 'react';\r\nimport AddCharacteristics from '../ModalForms/Element/AddCharacteristics';\r\nimport AddTemplateElement from '../ModalForms/Element/AddTemplateElement';\r\nimport DeleteElement from '../ModalForms/Element/DeleteElement';\r\nimport EditElement from '../ModalForms/Element/EditElement';\r\nimport ExportElement from '../ModalForms/Element/ExportElement';\r\nimport AddRelation from '../ModalForms/Element/AddRelation';\r\n\r\n\r\nimport './Toolbar.css';\r\n\r\nexport default function Toolbar(props) {\r\n\r\n    const [showAddElement, set_showAddElement] = useState(false);\r\n    const [showAddFolder, set_showAddFolder] = useState(false);\r\n    const [showDeleteComponent, set_showDeleteComponent] = useState(false);\r\n    const [showExportComponent, set_showExportComponent] = useState(false);\r\n    const [showEditComponent, set_showEditComponent] = useState(false);\r\n    const [showRelation, set_showRelation] = useState(false);\r\n    \r\n        return(\r\n            <div className=\"ToolbarRelative\">\r\n            <div className=\"Toolbar\">\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddElement(true)}>Добавить характеристики</button>\r\n            <AddCharacteristics element={props.parent} prevpages={props.previouspages} onClose={()=>set_showAddElement(false)} show={showAddElement}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddFolder(true)}>Добавить класс</button>            \r\n            <AddTemplateElement element={props.parent} prevpages={props.previouspages} onClose={()=>set_showAddFolder(false)} show={showAddFolder}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showRelation(true)}>Добавить связь</button>\r\n            <AddRelation element={props.parent} prevpages={props.previouspages} onClose={()=>set_showRelation(false)} show={showRelation}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showDeleteComponent(true)}>Удалить элемент</button>\r\n            <DeleteElement prevpages={props.previouspages} element={props.parent} onClose={()=>set_showDeleteComponent(false)} show={showDeleteComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showEditComponent(true)}>Изменить элемент</button>\r\n            <EditElement element={props.parent} prevpages={props.previouspages} onClose={()=>set_showEditComponent(false)} show={showEditComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showExportComponent(true)}>Экспорт элемента</button>\r\n            <ExportElement element={props.parent} prevpages={props.previouspages} onClose={()=>set_showExportComponent(false)} show={showExportComponent}/>\r\n            </div>\r\n            </div>\r\n          )\r\n  \r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAxYAAAAoCAYAAABjJmznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPESURBVHgB7d2xbhN3HMDx3/8SOWVq3qDmCZqlE6rkhE4VQ/IEOCPQChiSsgFbm1ZKhkLGJk9AO7QSC3YHJLbyBvgR0i3Q5v69MyKiwQ4YuxVwn8/m+50jK4Plr+7+908BAAA0RufadrtonbmaU17KTw/X+jvXD2IGUgAAAB+8zsb2UlF8dDVy7r44VsXA46NnT5dnERdFAAAAH7witVZfjopajliaay30qqsYizElYQEAAA1QFsVeFRKDk8dnFRduhQIAgIbo3NhtpzL3qghon5xNe1uUsAAAgAap46Ioyz+qFBh1hWJQPo+LQUzIrVAAANAg/W8vDcocyxF51JWJdvH8tqh2TEhYAABAw/S/v/K4LMu1MeO3igthAQAADdT/4et+mfP6mPHEcSEsAACgoaorF3sR+faY8URxMRcAAEBjPXn4W//suS9TROqMGC+mufnVTz774pfBo/unPi3KU6EAAIBY2bizEyldHTMelDmv1Wszxr1fWAAAAEPLmz/upSgujhkfVHGxPC4uhAUAAHDs/MZuL6fcGTcvI7r9rcv7J49bvA0AABw7+utwLUeMveWpCoi9lc3dmyePW7wNAAAcGzy6f9j+/ML9yLGaIhbHnNY5e+5CPHn46+8vDqSVjTvdUWemlA6OyqNTV37DG/t7fhAwtcOD/s5130sA8D/o3NhtpzL3qrhojz8r3XqwdWn4uNq0snk3BwA0Sq4CNYlUppZzGgTMQPXjfRDvoBS5nVN0XnPSzoPvLl8XFgAAwHRy3rN4GwAAmE5KXWEBAABMpX6KlLAAAADeWh0V+dmZ5fkAAIBXvD8POah+2B4U+T35rKn6v74nn7XyZxTxceTcPeWcn6uoWO/vrB/YeRsAAHhF59p2u2gt9GLM42ZzlPu9ra+6L14LCwAA4F8mjYqaNRYAAMCxKioW51oL92KCqKgJCwAA4FgVFb0csTR6mm+PioqasAAAAIZWvrnz02lR8WDryq1x7xUWAABArGzu3oycuqOnp0dFzeJtAABouGFURL41evr6qKgJCwAAaLBZREVNWAAAQEN1Nu9eLCL2Rk/fPCpqwgIAABro/Obd1Rxxb/R0sqioCQsAAGiYzsb2UpFavSoHFl+dTh4VtfkAAAAaY7irdhpugDezqKi5YgEAAA0xjIrWQnWlYtSu2m8fFTVhAQAADXBaVOQo98ftqP2mbJAHAAANULRa3fiPomL49wMAAPjglUWxlyP2Xz5WvX48i6iouRUKAAAapHNjt53K4YZ4n+ZnZ5b7O+sHMQP/AMBKP3wl6wERAAAAAElFTkSuQmCC\"","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Toolbar from \"../Toolbar/ToolbarElement\";\r\nimport \"./ElementPage.css\";\r\nimport logo from \"../App/logo4x.png\";\r\nimport arrow from \"./arrow.png\";\r\nimport reversearrow from \"./reverse arrow.png\";\r\n\r\nexport default class ElementPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      templatecharacteristics: null,\r\n      breadCrumbs: null,\r\n      characteristics: null,\r\n      showcharacreristics: true,\r\n      relations: null,\r\n    };\r\n  }\r\n\r\n  ChangeShow = (param) => (e) => {\r\n    this.setState({ showcharacreristics: param });\r\n  };\r\n\r\n  async GetTemplateCharacteristics(parentid) {\r\n    const breadCrumbs = this.props.location.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(this.props.location.state.body.Id);\r\n    // const index=breadCrumbs.indexOf(elem => elem.path==`/template/${this.props.match.params.id}/${this.props.match.params.name}`);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: this.props.location.state.body.Name,\r\n        path: `/element`,\r\n        body: {\r\n          Name: this.props.location.state.body.Name,\r\n          Id: this.props.location.state.body.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    console.log(\r\n      process.env.REACT_APP_API_CHARACTERISTICS + `?idelement=${parentid}`\r\n    );\r\n    await fetch(\r\n      process.env.REACT_APP_API_CHARACTERISTICS + `?idelement=${parentid}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({\r\n          templatecharacteristics: data,\r\n          breadCrumbs: breadCrumbs,\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  }\r\n  async GetCharacteristics(parentid) {\r\n    await fetch(process.env.REACT_APP_API_CHARACTERISTICS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ characteristics: data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  async GetRelations(parentid) {\r\n    await fetch(process.env.REACT_APP_API_RELATIONS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ relations: data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await this.GetTemplateCharacteristics(this.props.location.state.body.Id);\r\n    await this.GetCharacteristics(this.props.location.state.body.Id);\r\n    await this.GetRelations(this.props.location.state.body.Id);\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.templatecharacteristics || !this.state.characteristics) {\r\n      return <div />;\r\n    }\r\n    const {\r\n      templatecharacteristics,\r\n      characteristics,\r\n      breadCrumbs,\r\n      showcharacreristics,\r\n      relations,\r\n    } = this.state; //сначала\r\n    const array = templatecharacteristics.map(function (item) {\r\n      return { idparent: item.IdParent, name: item.NameParent };\r\n    });\r\n    var setObj = new Set(); // create key value pair from array of array\r\n\r\n    var groups = array.reduce((acc, item) => {\r\n      if (!setObj.has(item.idparent)) {\r\n        setObj.add(item.idparent, item);\r\n        acc.push(item);\r\n      }\r\n      return acc;\r\n    }, []); //converting back to array from mapobject\r\n    return (\r\n      <div>\r\n        <div className=\"Header\">\r\n          <div className=\"BreadCrumbs\">\r\n            {breadCrumbs.map((bc) => (\r\n              <div key={bc.title} className=\"gt\">\r\n                <Link\r\n                  className=\"BreadCrumb\"\r\n                  to={{\r\n                    pathname: bc.path,\r\n                    state: { body: bc.body, breadCrumbs: breadCrumbs },\r\n                  }}\r\n                >\r\n                  {bc.title}\r\n                </Link>\r\n                &ensp;&rarr;&ensp;\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"settingsinheader\">\r\n            <Link\r\n              to={{ pathname: `/library`, state: { breadCrumbs: breadCrumbs } }}\r\n            >\r\n              {<button className=\"btn_logout\">общая библиотека</button>}\r\n            </Link>\r\n            <Link to={{ pathname: \"/settings\" }}>\r\n              {<button className=\"btn_logout\">настройки</button>}\r\n            </Link>\r\n            {\r\n              <button className=\"btn_logout\" onClick={this.handleClick}>\r\n                выход\r\n              </button>\r\n            }            \r\n            <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"ElementBody\">\r\n          <div className=\"Characteristics\">\r\n            {showcharacreristics ? (\r\n              <div className=\"ShowMenu\">\r\n                <button className=\"button current\">характеристики</button>\r\n                <button className=\"button\" onClick={this.ChangeShow(false)}>\r\n                  связи\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <div className=\"ShowMenu\">\r\n                <button className=\"button\" onClick={this.ChangeShow(true)}>\r\n                  характеристики\r\n                </button>\r\n                <button className=\"button current\">связи</button>\r\n              </div>\r\n            )}\r\n            {showcharacreristics ? (\r\n              <div>\r\n                {groups.map((group) => (\r\n                  <div key={group.idparent} className=\"ParentElement\">\r\n                    {group.name}\r\n                    {templatecharacteristics\r\n                      .filter((number) => number.IdParent === group.idparent)\r\n                      .map((number) => (\r\n                        <div\r\n                          key={number.IdCharacter}\r\n                          className=\"ParentCharacteristic\"\r\n                        >\r\n                          {number.NameCharacter}: {number.ValueCharacter}\r\n                        </div>\r\n                      ))}\r\n                  </div>\r\n                ))}\r\n\r\n                {characteristics.map((folder) => (\r\n                  <div key={folder.Id}>\r\n                    {folder.Name}: {folder.Value}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"relations\">\r\n                {relations.map((folder) => (\r\n                  <div key={folder.IdFirst}>\r\n                    {folder.Rel2to1 == null ? <div className=\"onerelation\">\r\n                      {folder.NameFirstElement}\r\n                      <div className=\"relation\">\r\n                      <div className=\"firstelement\">\r\n                      {folder.Rel1to2}\r\n                      </div>\r\n                      <img src={arrow} className=\"imagearrow\" alt=\"toolbaritem\" />\r\n                      </div>\r\n                      {folder.NameSecondElement} \r\n                    </div>    \r\n                       :\r\n                       <div className=\"onerelation\">\r\n                       {folder.NameFirstElement}\r\n                       <div className=\"relation\">\r\n                         <div className=\"firstelement\">\r\n                       {folder.Rel1to2}\r\n                       </div>\r\n                       <img src={arrow} className=\"imagearrow\" alt=\"toolbaritem\" />\r\n                       <img src={reversearrow} className=\"imagearrow\" alt=\"toolbaritem\" />\r\n                       <div className=\"secondelement\">\r\n                       {folder.Rel2to1}\r\n                       </div>\r\n                       </div>\r\n                       {folder.NameSecondElement} \r\n                     </div> \r\n                     }\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <img\r\n            className=\"ImageElement\"\r\n            src={`data:image/jpeg;base64,${this.props.location.state.body.Image}`}\r\n          />\r\n        </div>\r\n        <Toolbar\r\n          previouspages={breadCrumbs}\r\n          parent={this.props.location.state.body}\r\n        ></Toolbar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAxYAAAAoCAYAAABjJmznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOsSURBVHgB7d2xbxtVHMDx37sUp2z+Dwj/QTowsdiGBSb4D9wxCYh0aMrWdKtcpGRJOyaMTO2ExBJ7QWIjbGz4T8jYVuDHXUmhLTk7sQNqcp/PFN+9WCdHivzVu/cuxQXpbO60l1rLw5zS0eTZ03uj3VvjAAAAGiHFBflo6+HPOWL1n3dOBwIDAACaoYgL0Luzt/9aVFRy7hetVj8AAIAr71osqIqKyKn/5vEyNMa5KA4CAAC48haasehtPbpbHxWpO7q/Ng4AAODKm3uNxYuoiLz95nFRAQAAzbMUc6iLivLYcc7xyWiw/msAAACNce41FvVRUU1/pJujB+tHAQAANMq5wmJaVExyLqNi40kAAACNc+bF29Oiojx+r4yKgwAAABrpTIu3Z0XF4WBjOwAAgMaaGRaiAgAAmGVqWEyLihyTb4eDL/oBAAA0Xm1YTI+KOBoO1m8EAABA1OwK1buztx859087V0VFfv5uNwAAAE78a1eov6Ii9U8bfPJU7c9HuzePAwAA4MRrt0KdISq6o/tr4wAAAHjFi7DobO60i9byfvnjZ/Uj00EZHceRczsug5TbOadLca1Fda0Rl+Nzjervfzk+VwAA/j+pioql1vKw/GK7GgAAAHMoRAUAALCoQlQAAACLKqoH3QUAAMACXize7t3e242Uvpo2MOc0KgeP4y1UXtdKwAXIKa8ELMwmBwA0z9/bzfa29rbLl3enjB1Pnj/rjnZvjQMA+M91NvfLQH0qUlnctd9XAi5CjnZRFKf+X3r9ORbiAgAAmMPSqy9++/H70fsffpqqXWhrxreLpWud9z74+LvxTz88DQAAgFLx5oHDwcb2JOebdb9Q7SKV3rn+OAAAAE6kuhOd23urRYph7QLEnA8OH2zUBggAANAcRd2J0YONo0mObq7bCSqlfu/Ow50AAAAar5h2soqLXKT6uMix2dt6NG2xNwAA0ADpLIM6Xz9aSZM8rH9eRNo+HKzdCwAAoJHOFBaVWXExieiPBuue4g0AAA105rCozIyLyR/d0TdfjgIAAGiUc4VFZUZcHE9y7lZrMwIAAGiMc4dFZWZcPH92w9O5AQCgOYqYw+j+2jiX8ZAjTpuZaBet5WFnc2clAACARphrxuKlMh7aqYyI8k1WTzk9LmcuumYuAADg6ptrxuKlMhqOy5mLbs3MxUrRavUDAAC48hYKi0ptXKR0MMnxJAAAgCtvoVuhXlXdFrW0fP1xnsQvk6XYrdZhBAAA0Ah/AtYESHtuzTU8AAAAAElFTkSuQmCC\"","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nasync function DeleteFolder (folderid)\r\n{\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${folderid}`,{\r\n        method: 'DELETE', // или 'PUT'\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\nasync function DeleteElement (elementid)\r\n{   \r\n    await fetch(process.env.REACT_APP_API_ELEMENTS + `/${elementid}`,{\r\n        method: 'DELETE', // или 'PUT'\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\nexport default class DeleteComponent extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        console.log(this.props);\r\n        this.state={isdeleted:null}\r\n        this.handleSubmit = this.handleSubmit.bind(this);        \r\n    }\r\n   \r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        if(this.props.typeofcomponent===\"folder\")\r\n        {\r\n          await DeleteFolder(this.props.component.Id);  \r\n        }        \r\n        else\r\n        {\r\n            await DeleteElement(this.props.component.Id);\r\n        }        \r\n        this.props.onClose();\r\n        this.setState({isdeleted:true});\r\n      }\r\n\r\n    render(){\r\n        console.log(\"рендер удаления\");\r\n        if(this.state.isdeleted)\r\n        {\r\n            let bc=this.props.prevpages;\r\n            bc.length=bc.length-1;\r\n            this.setState({isdeleted: false});\r\n            console.log(\"Я в удалении\");\r\n            return <Redirect to={{pathname: bc[bc.length-1].path, state: { body: bc[bc.length-1].body, breadCrumbs:bc}            \r\n  }}/>\r\n        }\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }     \r\n        \r\n        console.log(this.props);\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <h4 className=\"modal-title\">Удаление {this.props.component.Name}</h4>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Вы действительно хотите удалить {this.props.typeofcomponent===\"template\" ? 'папку' : 'элемент'} {this.props.component.Name}?</label>\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                <button className=\"button\" onClick={this.handleSubmit}>Да</button>\r\n                <button className=\"button\" onClick={this.props.onClose}>Отменить</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { useState } from 'react';\r\nimport AddCharacteristics from '../ModalForms/TemplateElement/AddTemplateCharecterisctics';\r\nimport AddTemplateElement from '../ModalForms/TemplateElement/AddTemplateElement';\r\nimport DeleteElement from '../ModalForms/TemplateElement/DeleteTemplateElement';\r\nimport EditElement from '../ModalForms/TemplateElement/EditTemplateElement';\r\nimport ExportElement from '../ModalForms/TemplateElement/ExportTemplateElement';\r\n\r\n\r\nimport './Toolbar.css';\r\n\r\nexport default function Toolbar(props) {\r\n\r\n    const [showAddElement, set_showAddElement] = useState(false);\r\n    const [showAddFolder, set_showAddFolder] = useState(false);\r\n    const [showDeleteComponent, set_showDeleteComponent] = useState(false);\r\n    const [showExportComponent, set_showExportComponent] = useState(false);\r\n    const [showEditComponent, set_showEditComponent] = useState(false);\r\n    \r\n        return(\r\n            <div className=\"ToolbarRelative\">\r\n            <div className=\"Toolbar\">\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddElement(true)}>Добавить характеристики</button>\r\n            <AddCharacteristics element={props.parent} prevpages={props.previouspages} onClose={()=>set_showAddElement(false)} show={showAddElement}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddFolder(true)}>Добавить класс</button>\r\n            <AddTemplateElement element={props.parent} prevpages={props.previouspages} onClose={()=>set_showAddFolder(false)} show={showAddFolder}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showDeleteComponent(true)}>Удалить класс</button>\r\n            <DeleteElement prevpages={props.previouspages} component={props.parent} onClose={()=>set_showDeleteComponent(false)} show={showDeleteComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showEditComponent(true)}>Изменить класс</button>\r\n            <EditElement element={props.parent} prevpages={props.previouspages} onClose={()=>set_showEditComponent(false)} show={showEditComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showExportComponent(true)}>Экспорт класса</button>\r\n            <ExportElement component={props.parent} typeofcomponent={props.typeof_parentel} onClose={()=>set_showExportComponent(false)} show={showExportComponent}/>\r\n            </div>\r\n            </div>\r\n          )\r\n  \r\n}","import React, {Component} from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport Toolbar from '../Toolbar/ToolBarTemplateElement';\r\nimport './TempateElementPage.css';\r\n\r\nexport default class TemplateElementPage extends Component{\r\n    constructor(props){\r\n        super(props); \r\n        this.state={templatecharacteristics: null, breadCrumbs:null, characteristics:null, savepath:null};\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }    \r\n    handleClick(e) {\r\n        e.preventDefault();\r\n        this.props.history.push(\"/\");\r\n        localStorage.clear();    \r\n        window.location.reload();      \r\n      }  \r\n    \r\n    async GetTemplateCharacteristics(parentid){\r\n        const breadCrumbs = this.props.location.state.breadCrumbs; \r\n        const index = breadCrumbs.map(function(e) {if (e.path==='/telement') return e.body.Id; else return 0;}).indexOf(this.props.location.state.body.Id);\r\n        // const index=breadCrumbs.indexOf(elem => elem.path==`/template/${this.props.match.params.id}/${this.props.match.params.name}`);\r\n        if(index===-1)\r\n        {\r\n        breadCrumbs.push({\r\n            title: this.props.location.state.body.Name,\r\n            path: `/telement`,\r\n            body:{\r\n                \"Name\":this.props.location.state.body.Name,\r\n                \"Id\":this.props.location.state.body.Id\r\n            }\r\n          });\r\n        }\r\n        else\r\n        {\r\n            breadCrumbs.length=index+1;\r\n        }\r\n        console.log(process.env.REACT_APP_API_TEMPLATECHARACTERISTICS+`?idelement=${parentid}`)\r\n        await fetch(process.env.REACT_APP_API_TEMPLATECHARACTERISTICS+`?idelement=${parentid}`) \r\n        .then(response=>{ return response.json()})\r\n        .then(data=>{\r\n            this.setState({templatecharacteristics:data, breadCrumbs:breadCrumbs});\r\n        }).catch(err => console.log(err));  \r\n        console.log(this.state);\r\n    }\r\n    GetCharacteristics(parentid){\r\n        fetch(process.env.REACT_APP_API_TEMPLATECHARACTERISTICS+`/${parentid}`) \r\n        .then(response=>{ return response.json()})\r\n        .then(data=>{\r\n            this.setState({characteristics:data});\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n    async componentDidMount(){\r\n        await this.GetTemplateCharacteristics(this.props.location.state.body.Id);\r\n        await this.GetCharacteristics(this.props.location.state.body.Id);\r\n    }\r\n    async componentDidUpdate(prevProps){\r\n    console.log(\"Я в обновлении темплэйта\");\r\n      if (prevProps.location.state.body.path !== this.props.location.state.body.path)      \r\n      {\r\n        await this.GetTemplateCharacteristics(this.props.location.state.body.Id);\r\n        await this.GetCharacteristics(this.props.location.state.body.Id);\r\n        // window.location.reload();\r\n      }\r\n  }\r\n\r\n    render(){\r\n        if ((!this.state.templatecharacteristics)||(!this.state.characteristics)) {\r\n            return <div />\r\n          }\r\n        const {templatecharacteristics, characteristics,breadCrumbs}=this.state;//сначала\r\n        const array = templatecharacteristics.map(function(item) {\r\n            return {idparent: item.IdParent, name: item.NameParent};\r\n          });\r\n        var setObj = new Set(); // create key value pair from array of array\r\n\r\n        var groups = array.reduce((acc,item)=>{\r\n            if(!setObj.has(item.idparent)){\r\n    setObj.add(item.idparent,item)\r\n    acc.push(item)\r\n  }\r\n  return acc;\r\n},[]);//converting back to array from mapobject     \r\n        return(\r\n            <div>\r\n                <div className='header2'>{breadCrumbs[breadCrumbs.length-1]?.title}</div>\r\n                <div className=\"BreadCrumbs\">\r\n                {breadCrumbs.map(bc=>\r\n                        <div key={bc.title} className=\"gt\">                            \r\n                            {/* <Link to={{pathname: `/template/${folder.Id}/${folder.Name}`}}> */}\r\n                            <Link className=\"BreadCrumb\" to={{pathname:bc.path, state:{body:bc.body, breadCrumbs:breadCrumbs}}} >\r\n                             {bc.title} \r\n                              </Link>\r\n                              &ensp;&rarr;&ensp;\r\n                        </div>)}\r\n                        </div> \r\n                        <Toolbar previouspages={breadCrumbs} typeof_parentel=\"templateelement\" parent={this.props.location.state.body}></Toolbar>   \r\n                        <div className=\"Characteristics\">\r\n                        {/* <Toolbar previouspages={breadCrumbs} typeof_parentel=\"template\" parent={this.props.location.state.body}></Toolbar>         */}\r\n                        {groups.map(group=>\r\n                        <div key={group.idparent} className=\"Element\">\r\n                            {group.name}\r\n                            {templatecharacteristics.filter(number => number.IdParent === group.idparent)\r\n        .map(number => <div key={number.IdCharacter} className=\"Characteristic\">{number.NameCharacter}: {number.ValueCharacter}</div>)}\r\n                        </div>)} \r\n\r\n                        {characteristics.map(folder=>\r\n                        <div key={folder.Id}>\r\n                        {folder.Name}: {folder.Value}\r\n                    </div>)} \r\n                        \r\n                           \r\n                        </div>  \r\n                        </div>\r\n        )\r\n    }\r\n}","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useHistory } from \"react-router\";\r\nimport {Link} from \"react-router-dom\";\r\nimport logo from '../App/logo4x.png';\r\nimport './Login.css';\r\n\r\nasync function loginUser (login, password)\r\n{\r\n    return fetch(process.env.REACT_APP_API_USERS+`?mail=${login}&pass=${password}`,{\r\n        method:'GET',\r\n        headers: {\r\n          'Content-Type':'application/json'\r\n      }}).then(data => data.json())\r\n}\r\n\r\n\r\nexport default function Login({ setToken }) {\r\n  const [username, setUserName] = useState();\r\n  const [password, setPassword] = useState();\r\n  const history = useHistory();\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    const user = await loginUser(\r\n      username,\r\n      password\r\n    );\r\n    const token={\r\n      \"Mail\": user.Mail,\r\n      \"Password\": user.Password \r\n    }\r\n    history.push({\r\n      pathname:  \"/\"\r\n   });\r\n    console.log(token);\r\n    setToken(token)\r\n  }\r\n\r\n  return(\r\n    <div className=\"body\">  \r\n    <div className=\"border\">       \r\n      <form className='login-wrapper' onSubmit={handleSubmit}>\r\n      <img className=\"logologin\" src={logo} alt=\"toolbaritem\"/>\r\n      <div className='header'>Creapedia</div>\r\n        <label className=\"form-row\">\r\n          <p>почта</p>\r\n          <input type=\"text\" placeholder=\"exapmle@email.com\" onChange={e => setUserName(e.target.value)} />\r\n        </label>\r\n        <label className=\"form-row\">\r\n          <p>пароль</p>\r\n          <input type=\"password\" placeholder=\"•••••••••••••\" onChange={e => setPassword(e.target.value)} />\r\n        </label>\r\n        <div className=\"loginlinks\">\r\n        <Link className=\"RegistrationLink\" to={{pathname:`/registration`, state: {body:null}}}> \r\n                             регистрация\r\n                              </Link>\r\n        <Link className=\"ForgotPass\" to={{pathname:`/registration`, state: {body:null}}}> \r\n                             забыли пароль?\r\n                              </Link>\r\n                              </div>\r\n        <label className=\"form-row\">\r\n          <button type=\"submit\">войти</button>\r\n        </label>\r\n      </form>\r\n           \r\n                              </div>                          \r\n      </div>\r\n  )\r\n}\r\n\r\nLogin.propTypes = {\r\n  setToken: PropTypes.func.isRequired\r\n};","import React, {Component} from 'react';\r\nimport {Redirect, Link} from \"react-router-dom\";\r\nimport logo from '../App/logo4x.png';\r\n\r\nasync function SingUp (mail, password)\r\n{   \r\n    const user =   {\r\n      \"Mail\":mail,\r\n      \"Password\": password\r\n   }\r\n    await fetch(process.env.REACT_APP_API_USERS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(user), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Access-Control-Request-Method':'POST',\r\n            'Origin': 'http://localhost:3000',\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\n\r\nexport default class Registration extends Component{\r\n    constructor(props){\r\n        super(props); \r\n        this.state={mail:\"\", password:\"\", ifregister:null};\r\n        this.onChangeMail = this.onChangeMail.bind(this);\r\n        this.onChangePassword = this.onChangePassword.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    } \r\n\r\n    onChangeMail(e) {\r\n        var val = e.target.value;\r\n        this.setState({mail: val});\r\n    }\r\n    onChangePassword(e) {\r\n        var val = e.target.value;\r\n        this.setState({password: val});\r\n    }\r\n   \r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        await SingUp(this.state.mail,this.state.password);\r\n        alert(\"Вы зарегистрировались! Для подтверждения адреса, пожалуйста, перейдите по ссылке, отправленную вам на указанную почту\");  \r\n        this.setState({ifregister: true});\r\n      }\r\n    render(){\r\n        if(this.state.ifregister)\r\n        {\r\n            return <Redirect to={{pathname: '/', state: { body: null}            \r\n  }}/>}\r\n       return(\r\n<div className=\"body\">  \r\n    <div className=\"border\">       \r\n      <form className='login-wrapper' onSubmit={this.handleSubmit}>\r\n      <img className=\"logologin\" src={logo} alt=\"toolbaritem\"/>\r\n      <div className='header'>Регистрация</div>\r\n        <label className=\"form-row\">\r\n          <p>почта</p>\r\n          <input type=\"text\" value={this.state.mail} onChange={this.onChangeMail} placeholder=\"exapmle@email.com\"/>\r\n        </label>\r\n        <label className=\"form-row\">\r\n          <p>пароль</p>\r\n          <input type=\"password\" value={this.state.password} onChange={this.onChangePassword} placeholder=\"•••••••••••••\"/>\r\n        </label>\r\n        <div className=\"loginlinks\">\r\n        <Link className=\"RegistrationLink\" to={{pathname:`/login`, state: {body:null}}}> \r\n                             назад\r\n                              </Link>        \r\n                              </div>\r\n        <label className=\"form-row\">\r\n          <button type=\"submit\">зарегистрироваться</button>\r\n        </label>\r\n      </form>\r\n           \r\n                              </div>                          \r\n      </div>            \r\n        )\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport {Redirect, Link} from \"react-router-dom\";\r\nimport logo from '../App/logo4x.png';\r\n\r\nasync function ChangeData (mail, password)\r\n{   \r\n    const user =   {\r\n      \"Mail\":mail,\r\n      \"Password\": password\r\n   }\r\n    // await fetch(process.env.REACT_APP_API_USERS,{\r\n    //     method: 'PUT', // или 'PUT'\r\n    //     body: JSON.stringify(user), // данные могут быть 'строкой' или {объектом}!\r\n    //     headers: {\r\n    //         'Access-Control-Request-Method':'POST',\r\n    //         'Origin': 'http://localhost:3000',\r\n    //         'Accept': 'application/json',\r\n    //         'Content-Type': 'application/json'\r\n    //       }}).then(function(response) {\r\n    //         console.log(response.status)});\r\n}\r\n\r\nasync function DeleteAcc (mail, password)\r\n{   \r\n    const user =   {\r\n      \"Mail\":mail,\r\n      \"Password\": password\r\n   }\r\n    // await fetch(process.env.REACT_APP_API_USERS,{\r\n    //     method: 'PUT', // или 'PUT'\r\n    //     body: JSON.stringify(user), // данные могут быть 'строкой' или {объектом}!\r\n    //     headers: {\r\n    //         'Access-Control-Request-Method':'POST',\r\n    //         'Origin': 'http://localhost:3000',\r\n    //         'Accept': 'application/json',\r\n    //         'Content-Type': 'application/json'\r\n    //       }}).then(function(response) {\r\n    //         console.log(response.status)});\r\n}\r\n\r\n\r\nexport default class Settings extends Component{\r\n    constructor(props){\r\n        super(props); \r\n        this.state={mail:this.props.body.Mail, password:this.props.body.Password};\r\n        this.onChangeMail = this.onChangeMail.bind(this);\r\n        this.onChangePassword = this.onChangePassword.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.DeleteAcc = this.DeleteAcc.bind(this);\r\n    } \r\n\r\n    onChangeMail(e) {\r\n        var val = e.target.value;\r\n        this.setState({mail: val});\r\n    }\r\n    onChangePassword(e) {\r\n        var val = e.target.value;\r\n        this.setState({password: val});\r\n    }\r\n    DeleteAcc = async e => {\r\n        e.preventDefault();\r\n        await ChangeData(this.state.mail,this.state.password);\r\n        alert(\"Данные успешно обновлены\");  \r\n      }\r\n   \r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        await ChangeData(this.state.mail,this.state.password);\r\n        alert(\"Данные успешно обновлены\");  \r\n      }\r\n    render(){        \r\n       return(\r\n<div className=\"body\">  \r\n    <div className=\"border\">       \r\n      <form className='login-wrapper' onSubmit={this.handleSubmit}>\r\n      <img className=\"logo\" src={logo} alt=\"toolbaritem\"/>\r\n      <div className='header'>настройки</div>\r\n        <label className=\"form-row\">\r\n          <p>почта</p>\r\n          <input type=\"text\" value={this.state.mail} onChange={this.onChangeMail} placeholder=\"exapmle@email.com\"/>\r\n        </label>\r\n        <label className=\"form-row\">\r\n          <p>пароль</p>\r\n          <input type=\"password\" value={this.state.password} onChange={this.onChangePassword} placeholder=\"•••••••••••••\"/>\r\n        </label>\r\n        \r\n        <label className=\"form-row\">\r\n          <button type=\"submit\">изменить</button>\r\n          </label>\r\n          <label className=\"form-row\">\r\n          <button onClick={this.DeleteAcc}>удалить профиль</button>\r\n        </label>\r\n        <div className=\"loginlinks\">            \r\n        <Link className=\"RegistrationLink\" to={{pathname:`/main`, state: {body:{Mail:this.state.mail, Password:this.state.password}}}}> \r\n                             назад\r\n                              </Link>        \r\n                              </div>\r\n      </form>\r\n           \r\n                              </div>                          \r\n      </div>            \r\n        )\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport Toolbar from '../Toolbar/ToolbarFolder';\r\nimport logo from '../App/logo4x.png';\r\nimport './GeneralLibrary.css';\r\n\r\n\r\nexport default class Library extends Component{\r\n    constructor(props){\r\n        super(props); \r\n        this.state={showelements:true, components:null,  breadCrumbs:null};\r\n        this.handleClick = this.handleClick.bind(this)\r\n    }\r\n    handleClick(e) {\r\n        e.preventDefault();\r\n        this.props.history.push(\"/\");\r\n        localStorage.clear();    \r\n        window.location.reload();      \r\n      }    \r\n    \r\n    async GetFolders(parentid){\r\n        const breadCrumbs = this.props.location.state.breadCrumbs; \r\n        const index = breadCrumbs.map(function(e) { return e.body.Id; }).indexOf(this.props.location.state.body.Id);\r\n        // const index=breadCrumbs.indexOf(elem => elem.path==`/template/${this.props.match.params.id}/${this.props.match.params.name}`);\r\n        if(index===-1)\r\n        {\r\n        breadCrumbs.push({\r\n            title: this.props.location.state.body.Name,\r\n            path: `/projects`,\r\n            body:{\r\n                \"Name\":this.props.location.state.body.Name,\r\n                \"Id\":this.props.location.state.body.Id\r\n            }\r\n          });\r\n        }\r\n        else\r\n        {\r\n            breadCrumbs.length=index+1;\r\n        }\r\n        await fetch(process.env.REACT_APP_API_FOLDERS+`/${parentid}`) \r\n        .then(response=>{ return response.json()})\r\n        .then(data=>{\r\n            this.setState({folders:data, breadCrumbs:breadCrumbs});\r\n        }).catch(err => console.log(err));  \r\n        console.log(this.state);\r\n    }\r\n    GetElements(parentid){\r\n        fetch(process.env.REACT_APP_API_ELEMENTS+`/${parentid}`) \r\n        .then(response=>{ return response.json()})\r\n        .then(data=>{\r\n            this.setState({elements:data});\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n    async componentDidMount(){\r\n        await this.GetFolders(this.props.location.state.body.Id);\r\n        await this.GetElements(this.props.location.state.body.Id);\r\n    }\r\n    async componentDidUpdate(prevProps){\r\n    console.log(\"Я в обновлении темплэйта\");\r\n      if (prevProps.location.state.body.Id !== this.props.location.state.body.Id)      \r\n      {\r\n        await this.GetFolders(this.props.location.state.body.Id);\r\n        await this.GetElements(this.props.location.state.body.Id);\r\n        // window.location.reload();\r\n      }\r\n  }\r\n\r\n    render(){\r\n        if ((!this.state.folders)||(!this.state.elements)) {\r\n            return <div />\r\n          }\r\n        const {folders, elements,breadCrumbs}=this.state;//сначала\r\n        return(\r\n            <div className=\"folderPage\">\r\n                <div className=\"Header\">\r\n                <div className=\"BreadCrumbs\">\r\n                {breadCrumbs.map(bc=>\r\n                        <div key={bc.title} className=\"gt\">      \r\n                            <Link className=\"BreadCrumb\" to={{pathname:bc.path, state:{body:bc.body, breadCrumbs:breadCrumbs}}} >\r\n                             {bc.title} \r\n                              </Link>\r\n                              &ensp;&rarr;&ensp;\r\n                        </div>)}\r\n                        </div> \r\n                        <div className=\"settingsinheader\">\r\n              {<button className=\"btn_logout\" onClick={this.handleClick}>настройки</button>}\r\n              {<button className=\"btn_logout\" onClick={this.handleClick}>выход</button>}\r\n              <img className=\"logo\" src={logo} alt=\"toolbaritem\"/>\r\n              </div>\r\n                        </div>   \r\n                                               \r\n            <div className=\"listview\">              \r\n                        {folders.map(folder=>\r\n                        <div key={folder.Id}>\r\n                            <Link className=\"folderinlist\" to={{pathname:`/projects`, state: {breadCrumbs:breadCrumbs, body:folder}}}>\r\n                             <div className=\"NameElementOfList\"> \r\n                             {folder.Name}\r\n                              </div>\r\n                              </Link>\r\n                        </div>)} \r\n                        {elements.map(el=>\r\n                        <div key={el.Id}>                            \r\n                            <Link className=\"elementinlist\" to={{pathname:`/element`, state: {breadCrumbs:breadCrumbs, body:el}}}>\r\n                            <img className=\"elementimage\" src={`data:image/jpeg;base64,${el.Image}`} />\r\n                            <div className=\"NameElementOfList\"> \r\n                             {el.Name}\r\n                              </div>\r\n                              </Link>\r\n                        </div>)}                          \r\n                        </div>\r\n                        <div className=\"foldercomponents\">\r\n                        <Toolbar previouspages={breadCrumbs} parent={this.props.location.state.body}></Toolbar>\r\n                        </div>\r\n                        </div>  \r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport {BrowserRouter as Router,Switch,Route, Redirect, withRouter} from \"react-router-dom\";\r\nimport MainPage from '../MainPage/MainPage';\r\nimport TemplatePage from '../TemplatePage/TemplatePage';\r\nimport FolderPage from '../FolderPage/FolderPage';\r\nimport ElementPage from '../ElementPage/ElementPage';\r\nimport TemplateElementPage from '../TemplateElementPage/TemplateElementPage';\r\nimport Login from '../Login/Login';\r\nimport useToken from './useToken';\r\nimport Registration from '../Registration/Registration';\r\nimport Settings from '../Settings/Settings';\r\nimport GeneralLibrary from '../GeneralLibrary/GeneralLibrary';\r\nimport './App.css';\r\n\r\n\r\nfunction App(props) {\r\n  \r\n  const { token, setToken } = useToken();  //Получение данных из localstorage\r\n\r\n  if(!token) //при отсутствии данных в localstorage\r\n  {\r\n    return (\r\n        <Router>\r\n            <Switch>            \r\n            <Route path=\"/CreapediaWeb/registration\" component={Registration}></Route>  \r\n            <Route path=\"/CreapediaWeb/login\"><Login setToken={setToken}/></Route>     \r\n            <Redirect from=\"/\" to={{pathname: `/CreapediaWeb/login`}}></Redirect>\r\n            </Switch>\r\n            </Router>  \r\n    )\r\n  }  \r\n  //при наличии данных в localstorage\r\n  return (\r\n    <Router>\r\n            <Switch>\r\n            <Route path=\"/main\" component={MainPage}></Route>\r\n            <Route path=\"/template\" component={TemplatePage}></Route>\r\n            <Route path=\"/projects\" component={FolderPage}></Route> \r\n            <Route path=\"/element\" component={ElementPage}></Route>\r\n            <Route path=\"/telement\" component={TemplateElementPage}></Route>\r\n            <Route path=\"/library\" component={GeneralLibrary}></Route>  \r\n            <Route path=\"/settings\" component={Settings}></Route>\r\n            <Redirect from=\"/\" to={{pathname: `/main`, state: {body:token}}}/>          \r\n            </Switch>\r\n            </Router>\r\n  );\r\n}\r\n\r\nexport default withRouter(App);","import { useState } from 'react';\r\n\r\nexport default function useToken() {\r\n  const getToken = () => {\r\n    const tokenString = localStorage.getItem('token');\r\n    const userToken = JSON.parse(tokenString);\r\n    console.log(userToken);\r\n    return userToken;\r\n  };\r\n\r\n  const [token, setToken] = useState(getToken());\r\n\r\n  const saveToken = userToken => {\r\n    localStorage.setItem('token', JSON.stringify(userToken));\r\n    setToken(userToken);\r\n  };\r\n\r\n  return {\r\n    setToken: saveToken,\r\n    token\r\n  }\r\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'normalize.css';\nimport './index.css';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App/>\n    </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
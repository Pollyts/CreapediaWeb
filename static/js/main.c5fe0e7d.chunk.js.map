{"version":3,"sources":["components/App/logo4x.png","components/MainPage/MainPage.jsx","components/ModalForms/TemplateFolder/AddTemplateElement.jsx","components/ModalForms/TemplateFolder/AddTemplateFolder.jsx","components/ModalForms/TemplateFolder/DeleteTemplateFolder.jsx","components/ModalForms/TemplateFolder/EditTemplateFolder.jsx","components/ModalForms/TemplateFolder/ImportTemplateFolder.jsx","components/ModalForms/TemplateFolder/ExportTemplateFolder.jsx","components/Toolbar/ToolbarTemplateFolder.jsx","components/TemplatePage/TemplatePage.jsx","components/ModalForms/Folder/AddElement.jsx","components/ModalForms/Folder/AddFolder.jsx","components/ModalForms/Folder/DeleteFolder.jsx","components/ModalForms/Folder/EditFolder.jsx","components/ModalForms/Folder/ImportFolder.jsx","components/ModalForms/Folder/ExportFolder.jsx","components/Toolbar/ToolbarFolder.jsx","components/FolderPage/FolderPage.jsx","components/ModalForms/Element/AddCharacteristics.jsx","components/ModalForms/Element/AddTemplateElement.jsx","components/ModalForms/Element/DeleteElement.jsx","components/ModalForms/Element/EditElement.jsx","components/ModalForms/Element/ExportElement.jsx","components/ModalForms/Element/AddRelation.jsx","components/Toolbar/ToolbarElement.jsx","components/ElementPage/arrow.png","components/ElementPage/ElementPage.jsx","components/ElementPage/reverse arrow.png","components/ModalForms/TemplateElement/AddTemplateCharecterisctics.jsx","components/ModalForms/TemplateElement/AddTemplateElement.jsx","components/ModalForms/TemplateElement/DeleteTemplateElement.jsx","components/ModalForms/TemplateElement/EditTemplateElement.jsx","components/ModalForms/TemplateElement/ExportTemplateElement.jsx","components/Toolbar/ToolBarTemplateElement.jsx","components/TemplateElementPage/TemplateElementPage.jsx","components/Login/Login.jsx","components/Registration/Registration.jsx","components/Settings/Settings.jsx","components/GeneralLibrary/GeneralLibrary.jsx","components/App/App.js","components/App/useToken.js","reportWebVitals.js","index.js"],"names":["MainPage","props","console","log","state","user","mainfolders","handleClick","bind","e","preventDefault","this","history","push","localStorage","clear","window","location","reload","userid","a","fetch","process","then","response","json","data","setState","catch","err","login","password","body","loginUser","Mail","Password","GetMainFolders","Id","className","src","logo","alt","breadCrumbs","title","path","map","bc","to","pathname","onClick","mf","Name","Component","SaveTemplateElement","name","pfid","telem","Number","method","JSON","stringify","headers","AddElement","onChange","sendImage","val","target","value","event","folder","onClose","show","stopPropagation","type","SaveFolder","parentfolderid","status","AddTemplateFolder","changedirectory","param","handleSubmit","folders","DeleteFolder","folderid","DeleteComponent","component","isdeleted","prevpages","length","newparentfolderid","subfolders","elements","IdFolder","IdParent","Accept","EditTemplateFolder","RemoveSubfolder","prevState","filter","sf","RemoveElement","el","index","indexOf","ChangeShow","typeofedit","needupate","isupdated","text","showlocation","Close","parentid","prevProps","f","GetSubFoldersAndElements","slice","ImportFromFolder","importcompid","ImportFromLibrary","ImportFolder","importtype","selcomp","alert","selectelement","selectcomponent","libcomponents","setTypeOfImport","onPasswordChange","libcomps","lc","Typeofcomponent","ExportToUser","usermail","ExportToLibrary","ExportToFolder","newrootid","ExportFolder","exporttype","setTypeOfExport","onMailChange","Toolbar","useState","showAddElement","set_showAddElement","showAddFolder","set_showAddFolder","showDeleteComponent","set_showDeleteComponent","showEditComponent","set_showEditComponent","showExportComponent","set_showExportComponent","showImportComponent","set_showImportComponent","previouspages","parent","TemplatePage","GetFolders","GetElements","placeholder","SaveElement","element","elemid","SaveImage","id","elwithimg","filepath","file","handleImageChange","files","form","FormData","append","URL","createObjectURL","AddFolder","EditFolder","FolderPage","search","Search","Image","rel","includes","SaveCharacteristics","arrayofcharacteristics","idel","box","AddCharacteristics","ChangeName","newItems","characteristics","ChangeValue","currentchar","CreateNew","CreateNewName","CreateNewValue","Save","array","char","AddTemplate","templateid","elementid","AddTemplateElement","Selecttelement","GetFoldersAndElements","isneedupdate","telements","CloseWindow","idparent","DeleteElement","Edit","tchars","relations","IdElement","templatecharacteristics","EditImage","EditElement","DeleteChar","DeleteClass","DeleteRelation","chars","GetFoldersElementsRelations","group","Value","NameFirstElement","NameSecondElement","ExportElement","AddRelationTwoLines","firstelement","secondelement","firsttosec","sectofirst","Firstelementid","Secondelementid","Rel1to2","Rel2to1","AddRelationOneLine","AddRelation","typeofrel","defaultdirection","firstrel","secondrel","changedirection","changeonelinerel","changesecondlinerel","changetypeofrel","showRelation","set_showRelation","ElementPage","showcharacreristics","GetTemplateCharacteristics","GetCharacteristics","GetRelations","item","NameParent","setObj","Set","groups","reduce","acc","has","add","number","NameCharacter","ValueCharacter","IdCharacter","arrow","IdFirst","TemplateElementPage","Login","setToken","username","setUserName","setPassword","useHistory","token","onSubmit","SingUp","mail","Registration","ifregister","onChangeMail","onChangePassword","ChangeData","prevmail","DeleteAcc","Settings","Library","Import","showcomponents","components","GetLibrary","withRouter","tokenString","getItem","userToken","parse","getToken","setItem","useToken","GeneralLibrary","from","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c5fe0e7d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo4x.bffe58ac.png\";","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./MainPage.css\";\r\nimport logo from \"../App/logo4x.png\";\r\n\r\nexport default class MainPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(props);\r\n    this.state = { user: null, mainfolders: null };\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n  handleClick(e) {\r\n    e.preventDefault();\r\n    this.props.history.push(\"/\");\r\n    localStorage.clear();\r\n    window.location.reload();\r\n  }\r\n\r\n  async GetMainFolders(userid) {\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/main/${userid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ mainfolders: data });\r\n        console.log(data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n  async loginUser(login, password) {\r\n    return await fetch(\r\n      process.env.REACT_APP_API_USERS + `?mail=${login}&pass=${password}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ user: data });\r\n        return data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  async componentDidMount() {\r\n    if (this.props.location.state.body == null) {\r\n      localStorage.clear();\r\n      window.location.reload();\r\n    }\r\n    const user = await this.loginUser(\r\n      this.props.location.state.body.Mail,\r\n      this.props.location.state.body.Password\r\n    );\r\n    if (user) {\r\n      await this.GetMainFolders(user.Id);\r\n    } else {\r\n      localStorage.clear();\r\n      window.location.reload();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.user || !this.state.mainfolders) {\r\n      return <div className=\"waitingpage\">\r\n        <div className=\"Loading\">\r\n        <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n        <label className=\"formlabel\">Загрузка...</label>\r\n        </div>\r\n      </div>;\r\n    }\r\n    const mainfolders = this.state.mainfolders;\r\n    const breadCrumbs = [\r\n      {\r\n        title: \"Главная\",\r\n        path: \"/\",\r\n        body: {\r\n          Mail: this.state.user.Mail,\r\n          Password: this.state.user.Password,\r\n        },\r\n      },\r\n    ];\r\n    return (\r\n      <div>\r\n        <div className=\"Header\">\r\n          <div className=\"BreadCrumbs\">\r\n            {breadCrumbs.map((bc) => (\r\n              <div key={bc.title} className=\"gt\">\r\n                {/* <Link to={{pathname: `/template/${folder.Id}/${folder.Name}`}}> */}\r\n                <Link\r\n                  className=\"BreadCrumb\"\r\n                  to={{\r\n                    pathname: bc.path,\r\n                    state: { body: bc.body, breadCrumbs: breadCrumbs },\r\n                  }}\r\n                >\r\n                  {bc.title}\r\n                </Link>\r\n                &ensp;&rarr;&ensp;\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"settingsinheader\">\r\n            <Link\r\n              to={{ pathname: `/library`, state: { breadCrumbs: breadCrumbs } }}\r\n            >\r\n              {<button className=\"btn_logout\">общая библиотека</button>}\r\n            </Link>\r\n            <Link to={{ pathname: \"/settings\" , state: { breadCrumbs: breadCrumbs }}}>\r\n              {<button className=\"btn_logout\">настройки</button>}\r\n            </Link>\r\n            {\r\n              <button className=\"btn_logout\" onClick={this.handleClick}>\r\n                выход\r\n              </button>\r\n            }\r\n            <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"mainfolders\">\r\n          {mainfolders.map((mf) => (\r\n            <div key={mf.Id} className=\"mfolder\">\r\n              {mf.Name === \"Проекты\" ? (\r\n                <Link\r\n                  to={{\r\n                    pathname: `/projects`,\r\n                    state: {\r\n                      breadCrumbs: breadCrumbs,\r\n                      body: { Id: mf.Id, Name: mf.Name },\r\n                    },\r\n                  }}\r\n                >\r\n                  <button className=\"buttonfolder\">Проекты</button>\r\n                </Link>\r\n              ) : (\r\n                <Link\r\n                  to={{\r\n                    pathname: `/template`,\r\n                    state: {\r\n                      breadCrumbs: breadCrumbs,\r\n                      body: { Id: mf.Id, Name: mf.Name },\r\n                    },\r\n                  }}\r\n                >\r\n                  <button className=\"buttonfolder\">Библиотека</button>\r\n                </Link>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\nasync function SaveTemplateElement (name, pfid )\r\n{ \r\n    const telem =   {\r\n        \"Name\": name,\r\n        \"ParentfolderId\": Number(pfid)\r\n     }\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEELEMENTS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(telem), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }});\r\n    }\r\n\r\nexport default class AddElement extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={name:\"\"}\r\n        this.onChange = this.onChange.bind(this);\r\n        this.sendImage = this.sendImage.bind(this);  \r\n    }   \r\n    onChange(e) {\r\n        var val = e.target.value;\r\n        this.setState({name: val});\r\n    }\r\n\r\n    async sendImage(event) {\r\n        event.preventDefault();\r\n        await SaveTemplateElement(this.state.name, this.props.folder.Id);\r\n        this.props.onClose();        \r\n        window.location.reload();\r\n    }; \r\n    \r\n\r\n    render(){\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Создание класса</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.name} onChange={this.onChange}/>\r\n                {/* <label className=\"formlabel\">Расположение:</label>\r\n                <div className=\"place\">\r\n                <label>{this.props.folder.Name}</label> <button className=\"button arrow\"> -{'>'} </button>\r\n                </div> */}\r\n                {/* <div className=\"modal-image\">\r\n                <label className=\"formlabel\">Фото:</label>                \r\n                <input type=\"file\" onChange={(e)=>this.handleImageChange(e)}/>                \r\n                <img className=\"downloadimage\" src={this.state.filepath}/>\r\n                </div> */}\r\n                </div>                \r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\" onClick={this.sendImage}>Сохранить</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Назад</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\n\r\nasync function SaveFolder (name, parentfolderid)\r\n{   \r\n    const folder =   {\r\n      \"Name\": name,\r\n      \"ParentfolderId\": Number(parentfolderid)\r\n   }\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(folder), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\nexport default class AddTemplateFolder extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={name:\"\", folders:null, breadCrumbs:null}\r\n        this.onChange = this.onChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);   \r\n        this.changedirectory = this.changedirectory.bind(this);\r\n    }   \r\n    onChange(e) {\r\n        var val = e.target.value;\r\n        this.setState({name: val});\r\n    }\r\n\r\n    changedirectory = param => async e => {\r\n\r\n    };\r\n   \r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        console.log(this.props);\r\n        await SaveFolder(this.state.name,this.props.folder.Id );\r\n        this.props.onClose();\r\n        window.location.reload();\r\n      }\r\n\r\n    render(){\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Создание папки</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.name} onChange={this.onChange}/>\r\n                {/* <label className=\"formlabel\">Расположение:</label>\r\n                <div className=\"place\">\r\n                <label>{this.props.folder.Name}</label> <button className=\"button arrow\"> -{'>'} </button>\r\n                </div> */}\r\n                {/* <div>\r\n                <div>\r\n                {this.props.prevpages.map(bc=>\r\n                        <div key={bc.title} className=\"gt\">\r\n                            <button className=\"BreadCrumb\" onClick={this.changedirectory({body:bc.body})}>\r\n                             {bc.title} \r\n                              </button>\r\n                              &gt;&gt;\r\n                        </div>)}\r\n                        </div>                              \r\n\r\n                </div> */}\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\" onClick={this.handleSubmit}>Сохранить</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Назад</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nasync function DeleteFolder (folderid)\r\n{\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${folderid}`,{\r\n        method: 'DELETE', // или 'PUT'\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\nexport default class DeleteComponent extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        console.log(this.props);\r\n        this.state={isdeleted:null}\r\n        this.handleSubmit = this.handleSubmit.bind(this);        \r\n    }\r\n   \r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n          await DeleteFolder(this.props.component.Id);\r\n        this.props.onClose();\r\n        this.setState({isdeleted:true});\r\n      }\r\n\r\n    render(){\r\n        if(this.state.isdeleted)\r\n        {\r\n            let bc=this.props.prevpages;\r\n            bc.length=bc.length-1;\r\n            this.setState({isdeleted: false});\r\n            return <Redirect to={{pathname: bc[bc.length-1].path, state: { body: bc[bc.length-1].body, breadCrumbs:bc}            \r\n  }}/>\r\n        }\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }     \r\n        \r\n        console.log(this.props);\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Удаление папки {this.props.component.Name}</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Вы действительно хотите удалить папку {this.props.component.Name}?</label>\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\"  onClick={this.handleSubmit}>Да</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Отменить</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function SaveFolder(folderid, name, newparentfolderid,subfolders,elements) {\r\n  const folder = {\r\n    IdFolder: Number(folderid),\r\n    Name: name,\r\n    IdParent: Number(newparentfolderid),\r\n    subfolders: subfolders,\r\n    elements:elements\r\n  };\r\n  await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS, {\r\n    method: \"PUT\", // или 'PUT'\r\n    body: JSON.stringify(folder), // данные могут быть 'строкой' или {объектом}!\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  }).then(function (response) {\r\n    console.log(response.status);\r\n  });\r\n}\r\n\r\nexport default class EditTemplateFolder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: null,\r\n      folders: null,\r\n      isupdated: null,\r\n      breadCrumbs: null,\r\n      typeofedit:null,\r\n      path: null,\r\n      text: null,\r\n      needupate:true,\r\n      subfolders:null,\r\n      elements:null\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.showlocation = this.showlocation.bind(this);\r\n    this.Close = this.Close.bind(this);\r\n    this.onChange=this.onChange.bind(this);\r\n  }\r\n\r\n  Close(e) {    \r\n    this.props.onClose();\r\n    this.setState({needupate:true})\r\n  }\r\n  onChange(e) {\r\n    var val = e.target.value;\r\n    this.setState({ name: val });\r\n  }\r\n\r\n  RemoveSubfolder= (param) => e => {\r\n    this.setState((prevState) => ({\r\n        subfolders: prevState.subfolders.filter(\r\n          (sf) => sf.Id !== param\r\n        ),\r\n      }));   \r\n    }\r\n    RemoveElement= (param) => e => {\r\n        this.setState((prevState) => ({\r\n            elements: prevState.elements.filter(\r\n              (el) => el.Id !== param\r\n            ),\r\n          }));   \r\n        }\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/projects`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    \r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({\r\n          folders: data,\r\n          breadCrumbs: breadCrumbs,\r\n          path: { Name: param.Name, Id: param.Id },\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  };\r\n\r\n  async GetSubFoldersAndElements(parentid){\r\n      let subfolders;\r\n      let elements;    \r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS+`/${parentid}`) \r\n    .then(response=>{ return response.json()})\r\n    .then(data=>{\r\n        subfolders=data;\r\n    }).catch(err => console.log(err));  \r\n    console.log(this.state);\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEELEMENTS+`/${parentid}`) \r\n    .then(response=>{ return response.json()})\r\n    .then(data=>{\r\n        elements=data;\r\n    }).catch(err => console.log(err));\r\n    this.setState({subfolders:subfolders, elements:elements});\r\n}\r\n\r\nChangeShow = (param) => (e) => {\r\n    this.setState({ typeofedit: param });\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await SaveFolder(this.props.folder.Id,this.state.name,this.state.path.Id,this.state.subfolders,this.state.elements)\r\n    this.props.onClose();\r\n    this.setState({needupate:true})\r\n    window.location.reload();\r\n  };\r\n\r\n  async showlocation(event) {\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.state.text === \"Показать\"\r\n          ? this.setState({ text: \"Свернуть\", folders: data })\r\n          : this.setState({ text: \"Показать\" });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n  \r\n  async componentDidUpdate(prevProps) {\r\n    if ((this.props.show)&&(this.state.needupate)) {\r\n      this.setState({\r\n        name: this.props.folder.Name,\r\n        folders: null,\r\n        typeofedit:\"folder\",\r\n        isupdated: null,\r\n        needupate:false,\r\n        breadCrumbs: this.props.prevpages.filter((f) => f.body.Id !== this.props.folder.Id),\r\n        path: {Name: this.props.prevpages[this.props.prevpages.length-2].body.Name, Id: this.props.prevpages[this.props.prevpages.length-2].body.Id },\r\n        text: \"Показать\",\r\n      });\r\n      await this.GetSubFoldersAndElements(this.props.folder.Id)\r\n    }\r\n  }\r\n  render() {\r\n    // if (this.state.isupdated) {\r\n    //   let bc = this.props.prevpages;\r\n    //   bc[bc.length - 1].title = this.state.name;\r\n    //   bc[bc.length - 1].body.Name = this.state.name;\r\n    //   this.setState({ isupdated: false });\r\n    //   return (\r\n    //     <Redirect\r\n    //       to={{\r\n    //         pathname: bc[bc.length - 1].path,\r\n    //         state: { body: bc[bc.length - 1].body, breadCrumbs: bc },\r\n    //       }}\r\n    //     />\r\n    //   );\r\n    // }\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    if((!this.state.elements)||(!this.state.subfolders)){\r\n        return null;\r\n    }\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.Close}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">Редактировать папку</div>\r\n          </div>\r\n          {this.state.typeofedit === \"folder\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal current\">папка</button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"subfolders\")}\r\n                >\r\n                  подпапки\r\n                </button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"elements\")}\r\n                >\r\n                  элементы\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n          {this.state.typeofedit === \"subfolders\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal\" onClick={this.ChangeShow(\"folder\")}>\r\n                  папка\r\n                </button>\r\n                <button className=\"button-selector-modal current\">подпапки</button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"elements\")}\r\n                >\r\n                  элементы\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"elements\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal\" onClick={this.ChangeShow(\"folder\")}>\r\n                  папка\r\n                </button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"subfolders\")}\r\n                >\r\n                  подпапки\r\n                </button>\r\n                <button className=\"button-selector-modal current\">элементы</button>\r\n              </div>\r\n            ) : null}\r\n\r\n            {this.state.typeofedit === \"folder\" ? (<div className=\"modal-body\">\r\n            <label className=\"formlabel\"> Название:</label>\r\n            <input\r\n              className=\"forminput\"\r\n              type=\"text\"\r\n              value={this.state.name}\r\n              onChange={this.onChange}\r\n            />\r\n            <label className=\"formlabel\">Расположение:</label>\r\n            <div className=\"selectedpath\">\r\n              <label>{this.state.path.Name}</label>{\" \"}\r\n              <button className=\"arrow\" onClick={this.showlocation}>\r\n                {\" \"}\r\n                {this.state.text}{\" \"}\r\n                {this.state.text === \"Показать\" ? (\r\n                  <div>&ensp;&darr;</div>\r\n                ) : (\r\n                  <div>&ensp;&uarr;</div>\r\n                )}{\" \"}\r\n              </button>\r\n            </div>                \r\n              <div className=\"place\">\r\n              {this.state.text === \"Показать\" ? null : (\r\n                <div className=\"parentwindowforselectingpath\">\r\n                  <div className=\"modalbreadcrumbs\">\r\n                    {this.state.breadCrumbs.slice(1).map((bc) => (\r\n                      <div key={bc.title} className=\"gt\">\r\n                        <button\r\n                          className=\"BreadCrumb withoutframe\"\r\n                          onClick={this.changedirectory({\r\n                            Id: bc.body.Id,\r\n                            Name: bc.body.Name,\r\n                          })}\r\n                        >\r\n                          {bc.title}\r\n                        </button>\r\n                        &ensp;&rarr;&ensp;\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  <div className=\"windowforselectingpath\">\r\n                    <div className=\"modalfolders\">\r\n                      {this.state.folders.filter((f) => f.Id !== this.props.folder.Id).map((folder) => (\r\n                        <div key={folder.Id}>\r\n                          <button\r\n                            className=\"modalbuttonfolder\"\r\n                            onClick={this.changedirectory({\r\n                              Id: folder.Id,\r\n                              Name: folder.Name,\r\n                            })}\r\n                          >\r\n                            <div>{folder.Name}</div>\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div></div>) : null}\r\n            {this.state.typeofedit === \"subfolders\" ? (\r\n              <div className=\"modal-body-withoutcenter\">\r\n                {this.state.subfolders.map((folder) => (\r\n                          <div key={folder.Id} className=\"element-with-delete-button\">\r\n                              <button className=\"arrow\" onClick={this.RemoveSubfolder(folder.Id)}>&otimes;</button>\r\n                            <label>\r\n                              {folder.Name}\r\n                            </label>\r\n                          </div>\r\n                        ))}\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"elements\" ? (\r\n              <div className=\"modal-body-withoutcenter\">\r\n                {this.state.elements.map((folder) => (\r\n                          <div key={folder.Id} className=\"element-with-delete-button\">\r\n                              <button className=\"arrow\" onClick={this.RemoveElement(folder.Id)}>&otimes;</button>\r\n                            <label>\r\n                              {folder.Name}\r\n                            </label>\r\n                          </div>\r\n                        ))}\r\n              </div>\r\n            ) : null}\r\n            \r\n\r\n          <div className=\"modal-footer\">\r\n            <button className=\"SaveButton button\" onClick={this.handleSubmit}>\r\n              Сохранить\r\n            </button>\r\n            <button className=\"CloseButton button\" onClick={this.Close}>\r\n              Назад\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function ImportFromFolder(folderid, importcompid, type) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_TEMPLATEFOLDERS +\r\n      `/importfromfolder?folderid=${folderid}&importcompid=${importcompid}&type=${type}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nasync function ImportFromLibrary(folderid, importcompid, password) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_TEMPLATEFOLDERS +\r\n      `/importfromlib?folderid=${folderid}&importcompid=${importcompid}&password=${password}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\nexport default class ImportFolder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(this.props);\r\n    this.state = {\r\n      importtype: null,\r\n      body: null,\r\n      path: {\r\n        Name: this.props.folder.Name,\r\n        Id: this.props.folder.Id,\r\n        type: \"folder\",\r\n      },\r\n      selcomp: { Id: null, Name: \"\", type:\"\" },\r\n      libcomponents: null,\r\n      folders: null,\r\n      elements: null,\r\n      breadCrumbs: this.props.prevpages,\r\n      text: \"Показать\",\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.setTypeOfImport = this.setTypeOfImport.bind(this);\r\n    this.showlocation = this.showlocation.bind(this);\r\n    this.onPasswordChange = this.onPasswordChange.bind(this);\r\n  }\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (this.state.importtype === \"fromfolder\") {\r\n      await ImportFromFolder(this.props.folder.Id, this.state.path.Id, this.state.path.type);\r\n      this.props.onClose();\r\n    } else if (this.state.importtype === \"fromlibrary\") {\r\n      await ImportFromLibrary(this.props.folder.Id,this.state.selcomp.Id,this.state.body);\r\n      this.props.onClose();\r\n    } else alert(\"Выберите тип импорта\");\r\n  };\r\n\r\n  selectelement = (param) => async (event) => {\r\n    this.setState({\r\n      path: { Name: param.Name, Id: param.Id, type: \"element\" },\r\n    });\r\n  };\r\n  selectcomponent = (param) => async (event) => {\r\n    this.setState({ selcomp: { Name: param.Name, Id: param.Id, type: param.type } });\r\n  };\r\n\r\n  async setTypeOfImport(event) {\r\n    if (event.target.value === \"fromfolder\") {\r\n      let folders;\r\n      let elements;\r\n      await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${this.state.path.Id}`)\r\n        .then((response) => {\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          folders = data;\r\n        })\r\n        .catch((err) => console.log(err));\r\n      await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${this.state.path.Id}`)\r\n        .then((response) => {\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          elements = data;\r\n        })\r\n        .catch((err) => console.log(err));\r\n      this.setState({\r\n        elements: elements,\r\n        folders: folders,\r\n        importtype: event.target.value,\r\n        path: {\r\n          Name: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body\r\n            .Name,\r\n          Id: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id,\r\n        },\r\n      });\r\n    } else {\r\n      let libcomps;\r\n      await fetch(process.env.REACT_APP_API_LIBRARY + `/папка с классами`)\r\n        .then((response) => {\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          libcomps = data;\r\n        })\r\n        .catch((err) => console.log(err));\r\n      this.setState({\r\n        selcomp: { Id: null, Name: \"\" },\r\n        libcomponents: libcomps,\r\n        importtype: event.target.value,\r\n      });\r\n    }\r\n  }\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/projects`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    let folders;\r\n    let elements;\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        folders = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEELEMENTS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        elements = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    this.setState({\r\n      elements: elements,\r\n      folders: folders,\r\n      path: {\r\n        Name: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body\r\n          .Name,\r\n        Id: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id,\r\n        type: \"folder\",\r\n      },\r\n    });\r\n  };\r\n\r\n  async showlocation(event) {\r\n    let folders;\r\n    let elements;\r\n    await fetch(\r\n      process.env.REACT_APP_API_TEMPLATEFOLDERS +\r\n        `/${this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        folders = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(\r\n      process.env.REACT_APP_API_TEMPLATEELEMENTS +\r\n        `/${this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        elements = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    this.state.text === \"Показать\"\r\n      ? this.setState({\r\n          text: \"Свернуть\",\r\n          folders: folders,\r\n          elements: elements,\r\n        })\r\n      : this.setState({ text: \"Показать\" });\r\n  }\r\n\r\n  onPasswordChange(event) {\r\n    this.setState({ body: event.target.value });\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (prevProps.folder.Id !== this.props.folder.Id) {\r\n      this.setState({\r\n        importtype: null,\r\n        body: \"\",\r\n        selcomp: { Id: null, Name: \"\" },\r\n        path: {\r\n          Name: this.props.folder.Name,\r\n          Id: this.props.folder.Id,\r\n          type: \"folder\",\r\n        },\r\n        libcomponents: null,\r\n        folders: null,\r\n        breadCrumbs: this.props.prevpages,\r\n        text: \"Показать\",\r\n      });\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  render() {\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">\r\n              Импорт в папку {this.props.folder.Name}\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <div className=\"formwithradio\">\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfImport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"fromfolder\" name=\"gender\" /> Из\r\n                другой папки\r\n              </div>\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfImport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"fromlibrary\" name=\"gender\" /> Из\r\n                общей библиотеки\r\n              </div>\r\n            </div>\r\n            {this.state.importtype === \"fromlibrary\" ? (\r\n              <div className=\"exportdiv\">\r\n                <label className=\"formlabel\">Импорт:</label>\r\n                <div className=\"selectedpath\">\r\n                  <label>{this.state.selcomp.Name}</label>{\" \"}\r\n                </div>\r\n                <div className=\"place\">\r\n                  <div className=\"parentwindowforselectingpath\">\r\n                    <div className=\"windowforselectingpath\">\r\n                      <div>\r\n                        {this.state.libcomponents.map((lc) => (\r\n                          <div key={lc.Id}>\r\n                            <div\r\n                              onClick={this.selectcomponent({\r\n                                Id: lc.Id,\r\n                                Name: lc.Name,\r\n                                type:lc.Typeofcomponent\r\n                              })}\r\n                              className=\"libcomponent\"\r\n                            >\r\n                              <div>{lc.Name}</div>{\" \"}\r\n                              <div>{lc.Typeofcomponent}</div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"exportdiv\">\r\n                  <label className=\"formlabel\"> Задайте пароль:</label>\r\n                  <input\r\n                    className=\"forminput\"\r\n                    type=\"text\"\r\n                    value={this.state.body}\r\n                    onChange={this.onPasswordChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n            {this.state.importtype === \"fromfolder\" ? (\r\n              <div className=\"exportdiv\">\r\n                <label className=\"formlabel\">Импорт:</label>\r\n                <div className=\"selectedpath\">\r\n                  <label>{this.state.path.Name}</label>{\" \"}\r\n                  <button className=\"arrow\" onClick={this.showlocation}>\r\n                    {\" \"}\r\n                    {this.state.text}{\" \"}\r\n                    {this.state.text === \"Показать\" ? (\r\n                      <div>&ensp;&darr;</div>\r\n                    ) : (\r\n                      <div>&ensp;&uarr;</div>\r\n                    )}{\" \"}\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"place\">\r\n                  {this.state.text === \"Показать\" ? null : (\r\n                    <div className=\"parentwindowforselectingpath\">\r\n                      <div className=\"modalbreadcrumbs\">\r\n                        {this.state.breadCrumbs.slice(1).map((bc) => (\r\n                          <div key={bc.title} className=\"gt\">\r\n                            <button\r\n                              className=\"BreadCrumb withoutframe\"\r\n                              onClick={this.changedirectory({\r\n                                Id: bc.body.Id,\r\n                                Name: bc.body.Name,\r\n                              })}\r\n                            >\r\n                              {bc.title}\r\n                            </button>\r\n                            &ensp;&rarr;&ensp;\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                      <div className=\"windowforselectingpath\">\r\n                        <div className=\"modalfolders import\">\r\n                          {this.state.folders.map((folder) => (\r\n                            <div key={folder.Id}>\r\n                              <button\r\n                                className=\"modalbuttonfolder\"\r\n                                onClick={this.changedirectory({\r\n                                  Id: folder.Id,\r\n                                  Name: folder.Name,\r\n                                })}\r\n                              >\r\n                                <div>{folder.Name}</div>\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n\r\n                          {this.state.elements.map((el) => (\r\n                            <div key={el.Id}>\r\n                              <button\r\n                                className=\"modalbuttonelement\"\r\n                                onClick={this.selectelement({\r\n                                  Id: el.Id,\r\n                                  Name: el.Name,\r\n                                })}\r\n                              >\r\n                                <div>{el.Name}</div>\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.handleSubmit}>\r\n              Импортировать\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.props.onClose}>\r\n              Отменить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function ExportToUser(folderid, usermail) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_TEMPLATEFOLDERS +\r\n      `/exporttouser?folderid=${folderid}&usermail=${usermail}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nasync function ExportToLibrary(folderid,name, password) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_TEMPLATEFOLDERS +\r\n      `/exporttolibrary?folderid=${folderid}&name=${name}&password=${password}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nasync function ExportToFolder(folderid, newrootid) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_TEMPLATEFOLDERS +\r\n      `/exporttofolder?folderid=${folderid}&newrootid=${newrootid}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\nexport default class ExportFolder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(this.props);\r\n    this.state = {\r\n      exporttype: null,\r\n      body: '',\r\n      path: { Name: this.props.folder.Name, Id: this.props.folder.Id },\r\n      folders: null,\r\n      breadCrumbs: this.props.prevpages,\r\n      text: \"Показать\",\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.setTypeOfExport = this.setTypeOfExport.bind(this);\r\n    this.onMailChange = this.onMailChange.bind(this);\r\n    this.onPasswordChange = this.onPasswordChange.bind(this);\r\n    this.showlocation = this.showlocation.bind(this);\r\n    this.changedirectory = this.changedirectory.bind(this);\r\n  }\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (this.state.exporttype === \"user\") {\r\n      await ExportToUser(this.props.folder.Id, this.state.body);\r\n    } else if (this.state.exporttype === \"library\") {\r\n      await ExportToLibrary(this.props.folder.Id, this.props.folder.Name, this.state.body);\r\n    } else if (this.state.exporttype === \"folder\") {\r\n      await ExportToFolder(this.props.folder.Id, this.state.path.Id);\r\n    }\r\n    this.props.onClose();\r\n  };\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/projects`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({\r\n          folders: data,\r\n          breadCrumbs: breadCrumbs,\r\n          path: { Name: param.Name, Id: param.Id },\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  };\r\n\r\n  async showlocation(event) {\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.state.text === \"Показать\"\r\n          ? this.setState({ text: \"Свернуть\", folders: data })\r\n          : this.setState({ text: \"Показать\" });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  setTypeOfExport(event) {\r\n    if (event.target.value === \"folder\") {\r\n      this.setState({\r\n        exporttype: event.target.value,\r\n        path: { Name: this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Name, Id: this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Id },\r\n      });\r\n    } else {\r\n      this.setState({ exporttype: event.target.value, body:'' });\r\n    }\r\n    console.log(\"wow\");\r\n  }\r\n  onMailChange(event) {\r\n    this.setState({ body: event.target.value });\r\n  }\r\n  onPasswordChange(event) {\r\n    this.setState({ body: event.target.value });\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (prevProps.folder.Id !== this.props.folder.Id) {\r\n      this.setState({\r\n        exporttype: null,\r\n        body: '',\r\n        path: { Name: this.props.folder.Name, Id: this.props.folder.Id },\r\n        folders: null,\r\n        breadCrumbs: this.props.prevpages,\r\n        text: \"Показать\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {  \r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">\r\n              Экспорт папки {this.props.folder.Name}\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <div className=\"formwithradio\">\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"user\" name=\"gender\" /> Другому\r\n                пользователю\r\n              </div>\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"folder\" name=\"gender\" /> В другую\r\n                папку\r\n              </div>\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"library\" name=\"gender\" /> В общую\r\n                библиотеку\r\n              </div>\r\n            </div>\r\n          \r\n          {this.state.exporttype === \"user\" ? (\r\n            <div className=\"exportdiv\">\r\n              <label className=\"formlabel\"> Введите почту получателя:</label>\r\n              <input\r\n                className=\"forminput\"\r\n                type=\"text\"\r\n                value={this.state.body}\r\n                onChange={this.onMailChange}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {this.state.exporttype === \"library\" ? (\r\n            <div className=\"exportdiv\">\r\n              <label className=\"formlabel\"> Задайте пароль:</label>\r\n              <input\r\n                className=\"forminput\"\r\n                type=\"text\"\r\n                value={this.state.body}\r\n                onChange={this.onPasswordChange}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {this.state.exporttype === \"folder\" ? (\r\n            <div className=\"exportdiv\">\r\n              <label className=\"formlabel\">Экспорт в папку:</label>\r\n              <div className=\"selectedpath\">\r\n                <label>{this.state.path.Name}</label>{\" \"}\r\n                <button className=\"arrow\" onClick={this.showlocation}>\r\n                  {\" \"}\r\n                  {this.state.text}{\" \"}\r\n                  {this.state.text === \"Показать\" ? (\r\n                    <div>&ensp;&darr;</div>\r\n                  ) : (\r\n                    <div>&ensp;&uarr;</div>\r\n                  )}{\" \"}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"place\">\r\n                {this.state.text === \"Показать\" ? null : (\r\n                  <div className=\"parentwindowforselectingpath\">\r\n                    <div className=\"modalbreadcrumbs\">\r\n                      {this.state.breadCrumbs.slice(1).map((bc) => (\r\n                        <div key={bc.title} className=\"gt\">\r\n                          <button\r\n                            className=\"BreadCrumb withoutframe\"\r\n                            onClick={this.changedirectory({\r\n                              Id: bc.body.Id,\r\n                              Name: bc.body.Name,\r\n                            })}\r\n                          >\r\n                            {bc.title}\r\n                          </button>\r\n                          &ensp;&rarr;&ensp;\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    <div className=\"windowforselectingpath\">\r\n                      <div className=\"modalfolders\">\r\n                        {this.state.folders.map((folder) => (\r\n                          <div key={folder.Id}>\r\n                            <button\r\n                              className=\"modalbuttonfolder\"\r\n                              onClick={this.changedirectory({\r\n                                Id: folder.Id,\r\n                                Name: folder.Name,\r\n                              })}\r\n                            >\r\n                              <div>{folder.Name}</div>\r\n                            </button>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.handleSubmit}>\r\n              Экспортировать\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.props.onClose}>\r\n              Отменить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from 'react';\r\nimport AddElement from '../ModalForms/TemplateFolder/AddTemplateElement';\r\nimport AddFolder from '../ModalForms/TemplateFolder/AddTemplateFolder';\r\nimport DeleteComponent from '../ModalForms/TemplateFolder/DeleteTemplateFolder';\r\nimport EditFolder from '../ModalForms/TemplateFolder/EditTemplateFolder';\r\nimport ImportFolder from '../ModalForms/TemplateFolder/ImportTemplateFolder';\r\nimport ExportFolder from '../ModalForms/TemplateFolder/ExportTemplateFolder';\r\n\r\nimport './Toolbar.css';\r\n\r\nexport default function Toolbar(props) {\r\n\r\n    const [showAddElement, set_showAddElement] = useState(false);\r\n    const [showAddFolder, set_showAddFolder] = useState(false);\r\n    const [showDeleteComponent, set_showDeleteComponent] = useState(false);\r\n    const [showEditComponent, set_showEditComponent] = useState(false);\r\n    const [showExportComponent, set_showExportComponent] = useState(false);\r\n    const [showImportComponent, set_showImportComponent] = useState(false);\r\n    \r\n    \r\n    return(\r\n        <div className=\"ToolbarRelative\">\r\n        <div className=\"Toolbar\">\r\n        <button className=\"Toolbarbutton\" onClick={() => set_showAddElement(true)}>Добавить класс</button>\r\n        <AddElement prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showAddElement(false)} show={showAddElement}/>\r\n        <button className=\"Toolbarbutton\" onClick={() => set_showAddFolder(true)}>Добавить папку</button>\r\n        <AddFolder prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showAddFolder(false)} show={showAddFolder}/>\r\n        <button className=\"Toolbarbutton\" onClick={() => set_showDeleteComponent(true)}>Удалить папку</button>\r\n        <DeleteComponent prevpages={props.previouspages} component={props.parent} onClose={()=>set_showDeleteComponent(false)} show={showDeleteComponent}/>\r\n        <button className=\"Toolbarbutton\" onClick={() => set_showEditComponent(true)}>Изменить папку</button>\r\n        <EditFolder prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showEditComponent(false)} show={showEditComponent}/>\r\n        <button className=\"Toolbarbutton\" onClick={() => set_showExportComponent(true)}>Экспорт папки</button>\r\n        <ExportFolder prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showExportComponent(false)} show={showExportComponent}/>\r\n        <button className=\"Toolbarbutton\" onClick={() => set_showImportComponent(true)}>Импорт в папку</button>\r\n        <ImportFolder prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showImportComponent(false)} show={showImportComponent}/>\r\n        </div>\r\n        </div>\r\n)   \r\n    \r\n  \r\n}","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./TemplatePage.css\";\r\nimport Toolbar from \"../Toolbar/ToolbarTemplateFolder\";\r\nimport logo from \"../App/logo4x.png\";\r\n\r\nexport default class TemplatePage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { folders: null, elements: null, breadCrumbs: null };\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n  handleClick(e) {\r\n    e.preventDefault();\r\n    this.props.history.push(\"/\");\r\n    localStorage.clear();\r\n    window.location.reload();\r\n  }\r\n\r\n  async GetFolders(parentid) {\r\n    const breadCrumbs = this.props.location.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(this.props.location.state.body.Id);\r\n    // const index=breadCrumbs.indexOf(elem => elem.path==`/template/${this.props.match.params.id}/${this.props.match.params.name}`);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: this.props.location.state.body.Name,\r\n        path: `/template`,\r\n        body: {\r\n          Name: this.props.location.state.body.Name,\r\n          Id: this.props.location.state.body.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    console.log(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${parentid}`);\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ folders: data, breadCrumbs: breadCrumbs });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  }\r\n  GetElements(parentid) {\r\n    console.log(process.env.REACT_APP_API_TEMPLATEELEMENTS + `/${parentid}`);\r\n    fetch(process.env.REACT_APP_API_TEMPLATEELEMENTS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ elements: data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await this.GetFolders(this.props.location.state.body.Id);\r\n    await this.GetElements(this.props.location.state.body.Id);\r\n  }\r\n  async componentDidUpdate(prevProps) {\r\n    console.log(\"Я в обновлении темплэйта\");\r\n    if (\r\n      prevProps.location.state.body.Id !== this.props.location.state.body.Id\r\n    ) {\r\n      this.setState({ folders: null, elements: null, breadCrumbs: null\r\n      })\r\n      await this.GetFolders(this.props.location.state.body.Id);\r\n      await this.GetElements(this.props.location.state.body.Id);\r\n      // window.location.reload();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.folders || !this.state.elements) {\r\n      return <div className=\"waitingpage\">\r\n        <div className=\"Loading\">\r\n        <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n        <label className=\"formlabel\">Загрузка...</label>\r\n        </div>\r\n      </div>;\r\n    }\r\n    const { folders, elements, breadCrumbs } = this.state; //сначала\r\n    return (\r\n      <div className=\"folderPage\">\r\n        <div className=\"Header\">\r\n          <div className=\"BreadCrumbs\">\r\n            {breadCrumbs.map((bc) => (\r\n              <div key={bc.title} className=\"gt\">\r\n                <Link\r\n                  className=\"BreadCrumb\"\r\n                  to={{\r\n                    pathname: bc.path,\r\n                    state: { body: bc.body, breadCrumbs: breadCrumbs },\r\n                  }}\r\n                >\r\n                  {bc.title}\r\n                </Link>\r\n                &ensp;&rarr;&ensp;\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"settingsinheader\">\r\n            <input type=\"text\" className=\"search\" placeholder=\"поиск\"></input>\r\n            <Link\r\n              to={{ pathname: `/library`, state: { breadCrumbs: breadCrumbs } }}\r\n            >\r\n              {<button className=\"btn_logout\">общая библиотека</button>}\r\n            </Link>\r\n            <Link\r\n              to={{\r\n                pathname: \"/settings\",\r\n                state: { breadCrumbs: breadCrumbs },\r\n              }}\r\n            >\r\n              {<button className=\"btn_logout\">настройки</button>}\r\n            </Link>\r\n            {\r\n              <button className=\"btn_logout\" onClick={this.handleClick}>\r\n                выход\r\n              </button>\r\n            }\r\n            <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"listview\">\r\n          {folders.map((folder) => (\r\n            <div key={folder.Id}>\r\n              <Link\r\n                className=\"folderinlist\"\r\n                to={{\r\n                  pathname: `/template`,\r\n                  state: { breadCrumbs: breadCrumbs, body: folder },\r\n                }}\r\n              >\r\n                <div className=\"NameElementOfList\">{folder.Name}</div>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n          {elements.map((folder) => (\r\n            <div key={folder.Id}>\r\n              <Link\r\n                className=\"elementinlist\"\r\n                to={{\r\n                  pathname: `/telement`,\r\n                  state: { breadCrumbs: breadCrumbs, body: folder },\r\n                }}\r\n              >\r\n                {/* {folder.Image===undefined} */}\r\n                {/* <img className=\"elementimage\" src={`data:image/jpeg;base64,${folder.Image}`} /> */}\r\n                <div className=\"NameElementOfList\">{folder.Name}</div>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n\r\n          <div className=\"foldercomponents\"></div>\r\n        </div>\r\n        <div className=\"foldercomponents\">\r\n          <Toolbar\r\n            previouspages={breadCrumbs}\r\n            parent={this.props.location.state.body}\r\n          ></Toolbar>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\nasync function SaveElement (name, pfid)\r\n{ \r\n    const element =   {\r\n        \"Name\": name,\r\n        \"ParentfolderId\": Number(pfid)\r\n     }\r\n     let elemid;\r\n    await fetch(process.env.REACT_APP_API_ELEMENTS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(element), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(response=>{ return response.json()})\r\n          .then(data=>{\r\n              elemid=data;\r\n          }).catch(err => console.log(err));\r\n    return elemid\r\n    }\r\n    async function SaveImage (id,elwithimg){\r\n        await fetch(process.env.REACT_APP_API_ELEMENTS+`/image/${id}`,{\r\n            method: 'POST', // или 'PUT'\r\n            body: elwithimg, // данные могут быть 'строкой' или {объектом}!\r\n            headers: {\r\n                'Accept': 'application/json'\r\n              }}).then(function(response) {\r\n                console.log(response.status)});\r\n    }\r\n\r\nexport default class AddElement extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={name:\"\", filepath:null, file: null}\r\n        this.onChange = this.onChange.bind(this);\r\n        this.sendImage = this.sendImage.bind(this); \r\n        this.handleImageChange = this.handleImageChange.bind(this);     \r\n    }   \r\n    onChange(e) {\r\n        var val = e.target.value;\r\n        this.setState({name: val});\r\n    }\r\n\r\n    async sendImage(event) {\r\n        event.preventDefault();\r\n        const elemid=await SaveElement(this.state.name, this.props.folder.Id);\r\n        if (this.state.file!=null)\r\n        await SaveImage(elemid, this.state.file);\r\n        this.props.onClose();        \r\n        window.location.reload();\r\n    };\r\n    \r\n    handleImageChange(e) {\r\n        e.preventDefault();\r\n        if(e.target.files.length>0)\r\n        {\r\n        let form = new FormData();\r\n        for (var index = 0; index < e.target.files.length; index++) {\r\n            var element = e.target.files[index];\r\n            form.append('image', element);\r\n        }\r\n        this.setState({ file: form, filepath: URL.createObjectURL(e.target.files[0])});\r\n    }\r\n    else if (this.state.file!=null)\r\n    {\r\n        this.setState({ file: null, filepath: null})\r\n    }\r\n    };  \r\n\r\n    render(){\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Создание элемента</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.name} onChange={this.onChange}/>\r\n                {/* <label className=\"formlabel\">Расположение:</label>\r\n                <div className=\"place\">\r\n                <label>{this.props.folder.Name}</label> <button className=\"button arrow\"> -{'>'} </button>\r\n                </div> */}\r\n                <div className=\"modal-image\">\r\n                <label className=\"formlabel\">Изображение:</label>   \r\n                <label className=\"custom-file-upload\">Загрузить изображение           \r\n                <input type=\"file\" onChange={(e)=>this.handleImageChange(e)}/>  \r\n                </label>  \r\n                {this.state.filepath===null ? <div/> :<img className=\"downloadimage\" src={this.state.filepath}/>}             \r\n                \r\n                </div>\r\n                </div>                \r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\" onClick={this.sendImage}>Сохранить</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Назад</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\n\r\nasync function SaveFolder (name, parentfolderid)\r\n{   \r\n    const folder =   {\r\n      \"Name\": name,\r\n      \"ParentfolderId\": Number(parentfolderid)\r\n   }\r\n    await fetch(process.env.REACT_APP_API_FOLDERS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(folder), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\nexport default class AddFolder extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={name:\"\", folders:null, breadCrumbs:null}\r\n        this.onChange = this.onChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);   \r\n        this.changedirectory = this.changedirectory.bind(this);\r\n    }   \r\n    onChange(e) {\r\n        var val = e.target.value;\r\n        this.setState({name: val});\r\n    }\r\n\r\n    changedirectory = param => async e => {\r\n\r\n    };\r\n   \r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        console.log(this.props);\r\n        await SaveFolder(this.state.name,this.props.folder.Id );\r\n        this.props.onClose();\r\n        window.location.reload();\r\n      }\r\n\r\n    render(){\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Создание папки</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.name} onChange={this.onChange}/>\r\n                {/* <label className=\"formlabel\">Расположение:</label>\r\n                <div className=\"place\">\r\n                <label>{this.props.folder.Name}</label> <button className=\"button arrow\"> -{'>'} </button>\r\n                </div> */}\r\n                {/* <div>\r\n                <div>\r\n                {this.props.prevpages.map(bc=>\r\n                        <div key={bc.title} className=\"gt\">\r\n                            <button className=\"BreadCrumb\" onClick={this.changedirectory({body:bc.body})}>\r\n                             {bc.title} \r\n                              </button>\r\n                              &gt;&gt;\r\n                        </div>)}\r\n                        </div>                              \r\n\r\n                </div> */}\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\" onClick={this.handleSubmit}>Сохранить</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Назад</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function DeleteFolder(folderid) {\r\n  await fetch(process.env.REACT_APP_API_FOLDERS + `/${folderid}`, {\r\n    method: \"DELETE\", // или 'PUT'\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  }).then(function (response) {\r\n    console.log(response.status);\r\n  });\r\n}\r\n\r\nexport default class DeleteComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(this.props);\r\n    this.state = { isdeleted: null };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await DeleteFolder(this.props.component.Id);\r\n    this.props.onClose();\r\n    this.setState({ isdeleted: true });\r\n  };\r\n\r\n  render() {\r\n    console.log(\"рендер удаления\");\r\n    if (this.state.isdeleted) {\r\n      let bc = this.props.prevpages;\r\n      bc.length = bc.length - 1;\r\n      this.setState({ isdeleted: false });\r\n      console.log(\"Я в удалении\");\r\n      return (\r\n        <Redirect\r\n          to={{\r\n            pathname: bc[bc.length - 1].path,\r\n            state: { body: bc[bc.length - 1].body, breadCrumbs: bc },\r\n          }}\r\n        />\r\n      );\r\n    }\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">\r\n              Удаление папки {this.props.component.Name}\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <label className=\"formlabel\">\r\n              {\" \"}\r\n              Вы действительно хотите удалить папку {this.props.component.Name}?\r\n            </label>\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.handleSubmit}>\r\n              Да\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.props.onClose}>\r\n              Отменить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function SaveFolder(folderid, name, newparentfolderid,subfolders,elements) {\r\n  const folder = {\r\n    IdFolder: Number(folderid),\r\n    Name: name,\r\n    IdParent: Number(newparentfolderid),\r\n    subfolders: subfolders,\r\n    elements:elements\r\n  };\r\n  await fetch(process.env.REACT_APP_API_FOLDERS, {\r\n    method: \"PUT\", // или 'PUT'\r\n    body: JSON.stringify(folder), // данные могут быть 'строкой' или {объектом}!\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  }).then(function (response) {\r\n    console.log(response.status);\r\n  });\r\n}\r\n\r\nexport default class EditFolder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: null,\r\n      folders: null,\r\n      isupdated: null,\r\n      breadCrumbs: null,\r\n      typeofedit:null,\r\n      path: null,\r\n      text: null,\r\n      needupate:true,\r\n      subfolders:null,\r\n      elements:null\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.showlocation = this.showlocation.bind(this);\r\n    this.Close = this.Close.bind(this);\r\n    this.onChange=this.onChange.bind(this);\r\n  }\r\n\r\n  Close(e) {    \r\n    this.props.onClose();\r\n    this.setState({needupate:true})\r\n  }\r\n  onChange(e) {\r\n    var val = e.target.value;\r\n    this.setState({ name: val });\r\n  }\r\n\r\n  RemoveSubfolder= (param) => e => {\r\n    this.setState((prevState) => ({\r\n        subfolders: prevState.subfolders.filter(\r\n          (sf) => sf.Id !== param\r\n        ),\r\n      }));   \r\n    }\r\n    RemoveElement= (param) => e => {\r\n        this.setState((prevState) => ({\r\n            elements: prevState.elements.filter(\r\n              (el) => el.Id !== param\r\n            ),\r\n          }));   \r\n        }\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/projects`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    \r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({\r\n          folders: data,\r\n          breadCrumbs: breadCrumbs,\r\n          path: { Name: param.Name, Id: param.Id },\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  };\r\n\r\n  async GetSubFoldersAndElements(parentid){\r\n      let subfolders;\r\n      let elements;    \r\n    await fetch(process.env.REACT_APP_API_FOLDERS+`/${parentid}`) \r\n    .then(response=>{ return response.json()})\r\n    .then(data=>{\r\n        subfolders=data;\r\n    }).catch(err => console.log(err));  \r\n    console.log(this.state);\r\n    await fetch(process.env.REACT_APP_API_ELEMENTS+`/${parentid}`) \r\n    .then(response=>{ return response.json()})\r\n    .then(data=>{\r\n        elements=data;\r\n    }).catch(err => console.log(err));\r\n    this.setState({subfolders:subfolders, elements:elements});\r\n}\r\n\r\nChangeShow = (param) => (e) => {\r\n    this.setState({ typeofedit: param });\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await SaveFolder(this.props.folder.Id,this.state.name,this.state.path.Id,this.state.subfolders,this.state.elements)\r\n    this.props.onClose();\r\n    this.setState({needupate:true})\r\n    window.location.reload();\r\n  };\r\n\r\n  async showlocation(event) {\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.state.text === \"Показать\"\r\n          ? this.setState({ text: \"Свернуть\", folders: data })\r\n          : this.setState({ text: \"Показать\" });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n  \r\n  async componentDidUpdate(prevProps) {\r\n    if ((this.props.show)&&(this.state.needupate)) {\r\n      this.setState({\r\n        name: this.props.folder.Name,\r\n        folders: null,\r\n        typeofedit:\"folder\",\r\n        isupdated: null,\r\n        needupate:false,\r\n        breadCrumbs: this.props.prevpages.filter((f) => f.body.Id !== this.props.folder.Id),\r\n        path: {Name: this.props.prevpages[this.props.prevpages.length-2].body.Name, Id: this.props.prevpages[this.props.prevpages.length-2].body.Id },\r\n        text: \"Показать\",\r\n      });\r\n      await this.GetSubFoldersAndElements(this.props.folder.Id)\r\n    }\r\n  }\r\n  render() {\r\n    // if (this.state.isupdated) {\r\n    //   let bc = this.props.prevpages;\r\n    //   bc[bc.length - 1].title = this.state.name;\r\n    //   bc[bc.length - 1].body.Name = this.state.name;\r\n    //   this.setState({ isupdated: false });\r\n    //   return (\r\n    //     <Redirect\r\n    //       to={{\r\n    //         pathname: bc[bc.length - 1].path,\r\n    //         state: { body: bc[bc.length - 1].body, breadCrumbs: bc },\r\n    //       }}\r\n    //     />\r\n    //   );\r\n    // }\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    if((!this.state.elements)||(!this.state.subfolders)){\r\n        return null;\r\n    }\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.Close}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">Редактировать папку</div>\r\n          </div>\r\n          {this.state.typeofedit === \"folder\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal current\">папка</button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"subfolders\")}\r\n                >\r\n                  подпапки\r\n                </button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"elements\")}\r\n                >\r\n                  элементы\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n          {this.state.typeofedit === \"subfolders\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal\" onClick={this.ChangeShow(\"folder\")}>\r\n                  папка\r\n                </button>\r\n                <button className=\"button-selector-modal current\">подпапки</button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"elements\")}\r\n                >\r\n                  элементы\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"elements\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal\" onClick={this.ChangeShow(\"folder\")}>\r\n                  папка\r\n                </button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"subfolders\")}\r\n                >\r\n                  подпапки\r\n                </button>\r\n                <button className=\"button-selector-modal current\">элементы</button>\r\n              </div>\r\n            ) : null}\r\n\r\n            {this.state.typeofedit === \"folder\" ? (<div className=\"modal-body\">\r\n            <label className=\"formlabel\"> Название:</label>\r\n            <input\r\n              className=\"forminput\"\r\n              type=\"text\"\r\n              value={this.state.name}\r\n              onChange={this.onChange}\r\n            />\r\n            <label className=\"formlabel\">Расположение:</label>\r\n            <div className=\"selectedpath\">\r\n              <label>{this.state.path.Name}</label>{\" \"}\r\n              <button className=\"arrow\" onClick={this.showlocation}>\r\n                {\" \"}\r\n                {this.state.text}{\" \"}\r\n                {this.state.text === \"Показать\" ? (\r\n                  <div>&ensp;&darr;</div>\r\n                ) : (\r\n                  <div>&ensp;&uarr;</div>\r\n                )}{\" \"}\r\n              </button>\r\n            </div>                \r\n              <div className=\"place\">\r\n              {this.state.text === \"Показать\" ? null : (\r\n                <div className=\"parentwindowforselectingpath\">\r\n                  <div className=\"modalbreadcrumbs\">\r\n                    {this.state.breadCrumbs.slice(1).map((bc) => (\r\n                      <div key={bc.title} className=\"gt\">\r\n                        <button\r\n                          className=\"BreadCrumb withoutframe\"\r\n                          onClick={this.changedirectory({\r\n                            Id: bc.body.Id,\r\n                            Name: bc.body.Name,\r\n                          })}\r\n                        >\r\n                          {bc.title}\r\n                        </button>\r\n                        &ensp;&rarr;&ensp;\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  <div className=\"windowforselectingpath\">\r\n                    <div className=\"modalfolders\">\r\n                      {this.state.folders.filter((f) => f.Id !== this.props.folder.Id).map((folder) => (\r\n                        <div key={folder.Id}>\r\n                          <button\r\n                            className=\"modalbuttonfolder\"\r\n                            onClick={this.changedirectory({\r\n                              Id: folder.Id,\r\n                              Name: folder.Name,\r\n                            })}\r\n                          >\r\n                            <div>{folder.Name}</div>\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div></div>) : null}\r\n            {this.state.typeofedit === \"subfolders\" ? (\r\n              <div className=\"modal-body-withoutcenter\">\r\n                {this.state.subfolders.map((folder) => (\r\n                          <div key={folder.Id} className=\"element-with-delete-button\">\r\n                              <button className=\"arrow\" onClick={this.RemoveSubfolder(folder.Id)}>&otimes;</button>\r\n                            <label>\r\n                              {folder.Name}\r\n                            </label>\r\n                          </div>\r\n                        ))}\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"elements\" ? (\r\n              <div className=\"modal-body-withoutcenter\">\r\n                {this.state.elements.map((folder) => (\r\n                          <div key={folder.Id} className=\"element-with-delete-button\">\r\n                              <button className=\"arrow\" onClick={this.RemoveElement(folder.Id)}>&otimes;</button>\r\n                            <label>\r\n                              {folder.Name}\r\n                            </label>\r\n                          </div>\r\n                        ))}\r\n              </div>\r\n            ) : null}\r\n            \r\n\r\n          <div className=\"modal-footer\">\r\n            <button className=\"SaveButton button\" onClick={this.handleSubmit}>\r\n              Сохранить\r\n            </button>\r\n            <button className=\"CloseButton button\" onClick={this.Close}>\r\n              Назад\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function ImportFromFolder(folderid, importcompid, type) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_FOLDERS +\r\n      `/importfromfolder?folderid=${folderid}&importcompid=${importcompid}&type=${type}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nasync function ImportFromLibrary(folderid, importcompid, password) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_FOLDERS +\r\n      `/importfromlib?folderid=${folderid}&importcompid=${importcompid}&password=${password}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\nexport default class ImportFolder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(this.props);\r\n    this.state = {\r\n      importtype: null,\r\n      body: null,\r\n      path: {\r\n        Name: this.props.folder.Name,\r\n        Id: this.props.folder.Id,\r\n        type: \"folder\",\r\n      },\r\n      selcomp: { Id: null, Name: \"\", type:\"\" },\r\n      libcomponents: null,\r\n      folders: null,\r\n      elements: null,\r\n      breadCrumbs: this.props.prevpages,\r\n      text: \"Показать\",\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.setTypeOfImport = this.setTypeOfImport.bind(this);\r\n    this.showlocation = this.showlocation.bind(this);\r\n    this.onPasswordChange = this.onPasswordChange.bind(this);\r\n  }\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (this.state.importtype === \"fromfolder\") {\r\n      await ImportFromFolder(this.props.folder.Id, this.state.path.Id, this.state.path.type);\r\n      this.props.onClose();\r\n      window.location.reload();\r\n    } else if (this.state.importtype === \"fromlibrary\") {\r\n      await ImportFromLibrary(this.props.folder.Id,this.state.selcomp.Id,this.state.body);\r\n      this.props.onClose();\r\n      window.location.reload();\r\n    } else alert(\"Выберите тип импорта\");\r\n  };\r\n\r\n  selectelement = (param) => async (event) => {\r\n    this.setState({\r\n      path: { Name: param.Name, Id: param.Id, type: \"element\" },\r\n    });\r\n  };\r\n  selectcomponent = (param) => async (event) => {\r\n    this.setState({ selcomp: { Name: param.Name, Id: param.Id, type: param.type } });\r\n  };\r\n\r\n  async setTypeOfImport(event) {\r\n    if (event.target.value === \"fromfolder\") {\r\n      let folders;\r\n      let elements;\r\n      await fetch(process.env.REACT_APP_API_FOLDERS + `/${this.state.path.Id}`)\r\n        .then((response) => {\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          folders = data;\r\n        })\r\n        .catch((err) => console.log(err));\r\n      await fetch(process.env.REACT_APP_API_ELEMENTS + `/${this.state.path.Id}`)\r\n        .then((response) => {\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          elements = data;\r\n        })\r\n        .catch((err) => console.log(err));\r\n      this.setState({\r\n        elements: elements,\r\n        folders: folders,\r\n        importtype: event.target.value,\r\n        path: {\r\n          Name: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body\r\n            .Name,\r\n          Id: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id,\r\n        },\r\n      });\r\n    } else {\r\n      let libcomps;\r\n      await fetch(process.env.REACT_APP_API_LIBRARY + `/папка с элементами`)\r\n        .then((response) => {\r\n          return response.json();\r\n        })\r\n        .then((data) => {\r\n          libcomps = data;\r\n        })\r\n        .catch((err) => console.log(err));\r\n      this.setState({\r\n        selcomp: { Id: null, Name: \"\" },\r\n        libcomponents: libcomps,\r\n        importtype: event.target.value,\r\n      });\r\n    }\r\n  }\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/projects`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    let folders;\r\n    let elements;\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        folders = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(process.env.REACT_APP_API_ELEMENTS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        elements = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    this.setState({\r\n      elements: elements,\r\n      folders: folders,\r\n      path: {\r\n        Name: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body\r\n          .Name,\r\n        Id: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id,\r\n        type: \"folder\",\r\n      },\r\n    });\r\n  };\r\n\r\n  async showlocation(event) {\r\n    let folders;\r\n    let elements;\r\n    await fetch(\r\n      process.env.REACT_APP_API_FOLDERS +\r\n        `/${this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        folders = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(\r\n      process.env.REACT_APP_API_ELEMENTS +\r\n        `/${this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        elements = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    this.state.text === \"Показать\"\r\n      ? this.setState({\r\n          text: \"Свернуть\",\r\n          folders: folders,\r\n          elements: elements,\r\n        })\r\n      : this.setState({ text: \"Показать\" });\r\n  }\r\n\r\n  onPasswordChange(event) {\r\n    this.setState({ body: event.target.value });\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (prevProps.folder.Id !== this.props.folder.Id) {\r\n      this.setState({\r\n        importtype: null,\r\n        body: \"\",\r\n        selcomp: { Id: null, Name: \"\" },\r\n        path: {\r\n          Name: this.props.folder.Name,\r\n          Id: this.props.folder.Id,\r\n          type: \"folder\",\r\n        },\r\n        libcomponents: null,\r\n        folders: null,\r\n        breadCrumbs: this.props.prevpages,\r\n        text: \"Показать\",\r\n      });\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  render() {\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">\r\n              Импорт в папку {this.props.folder.Name}\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <div className=\"formwithradio\">\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfImport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"fromfolder\" name=\"gender\" /> Из\r\n                другой папки\r\n              </div>\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfImport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"fromlibrary\" name=\"gender\" /> Из\r\n                общей библиотеки\r\n              </div>\r\n            </div>\r\n            {this.state.importtype === \"fromlibrary\" ? (\r\n              <div className=\"exportdiv\">\r\n                <label className=\"formlabel\">Импорт:</label>\r\n                <div className=\"selectedpath\">\r\n                  <label>{this.state.selcomp.Name}</label>{\" \"}\r\n                </div>\r\n                <div className=\"place\">\r\n                  <div className=\"parentwindowforselectingpath\">\r\n                    <div className=\"windowforselectingpath\">\r\n                      <div>\r\n                        {this.state.libcomponents.map((lc) => (\r\n                          <div key={lc.Id}>\r\n                            <div\r\n                              onClick={this.selectcomponent({\r\n                                Id: lc.Id,\r\n                                Name: lc.Name,\r\n                                type:lc.Typeofcomponent\r\n                              })}\r\n                              className=\"libcomponent\"\r\n                            >\r\n                              <div>{lc.Name}</div>{\" \"}\r\n                              <div>{lc.Typeofcomponent}</div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"exportdiv\">\r\n                  <label className=\"formlabel\"> Введите пароль:</label>\r\n                  <input\r\n                    className=\"forminput\"\r\n                    type=\"text\"\r\n                    value={this.state.body}\r\n                    onChange={this.onPasswordChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n            {this.state.importtype === \"fromfolder\" ? (\r\n              <div className=\"exportdiv\">\r\n                <label className=\"formlabel\">Импорт:</label>\r\n                <div className=\"selectedpath\">\r\n                  <label>{this.state.path.Name}</label>{\" \"}\r\n                  <button className=\"arrow\" onClick={this.showlocation}>\r\n                    {\" \"}\r\n                    {this.state.text}{\" \"}\r\n                    {this.state.text === \"Показать\" ? (\r\n                      <div>&ensp;&darr;</div>\r\n                    ) : (\r\n                      <div>&ensp;&uarr;</div>\r\n                    )}{\" \"}\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"place\">\r\n                  {this.state.text === \"Показать\" ? null : (\r\n                    <div className=\"parentwindowforselectingpath\">\r\n                      <div className=\"modalbreadcrumbs\">\r\n                        {this.state.breadCrumbs.slice(1).map((bc) => (\r\n                          <div key={bc.title} className=\"gt\">\r\n                            <button\r\n                              className=\"BreadCrumb withoutframe\"\r\n                              onClick={this.changedirectory({\r\n                                Id: bc.body.Id,\r\n                                Name: bc.body.Name,\r\n                              })}\r\n                            >\r\n                              {bc.title}\r\n                            </button>\r\n                            &ensp;&rarr;&ensp;\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                      <div className=\"windowforselectingpath\">\r\n                        <div className=\"modalfolders import\">\r\n                          {this.state.folders.map((folder) => (\r\n                            <div key={folder.Id}>\r\n                              <button\r\n                                className=\"modalbuttonfolder\"\r\n                                onClick={this.changedirectory({\r\n                                  Id: folder.Id,\r\n                                  Name: folder.Name,\r\n                                })}\r\n                              >\r\n                                <div>{folder.Name}</div>\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n\r\n                          {this.state.elements.map((el) => (\r\n                            <div key={el.Id}>\r\n                              <button\r\n                                className=\"modalbuttonelement\"\r\n                                onClick={this.selectelement({\r\n                                  Id: el.Id,\r\n                                  Name: el.Name,\r\n                                })}\r\n                              >\r\n                                <div>{el.Name}</div>\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.handleSubmit}>\r\n              Импортировать\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.props.onClose}>\r\n              Отменить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function ExportToUser(folderid, usermail) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_FOLDERS +\r\n      `/exporttouser?folderid=${folderid}&usermail=${usermail}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nasync function ExportToLibrary(folderid,name, password) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_FOLDERS +\r\n      `/exporttolibrary?folderid=${folderid}&name=${name}&password=${password}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nasync function ExportToFolder(folderid, newrootid) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_FOLDERS +\r\n      `/exporttofolder?folderid=${folderid}&newrootid=${newrootid}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\nexport default class ExportFolder extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(this.props);\r\n    this.state = {\r\n      exporttype: null,\r\n      body: '',\r\n      path: { Name: this.props.folder.Name, Id: this.props.folder.Id },\r\n      folders: null,\r\n      breadCrumbs: this.props.prevpages,\r\n      text: \"Показать\",\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.setTypeOfExport = this.setTypeOfExport.bind(this);\r\n    this.onMailChange = this.onMailChange.bind(this);\r\n    this.onPasswordChange = this.onPasswordChange.bind(this);\r\n    this.showlocation = this.showlocation.bind(this);\r\n    this.changedirectory = this.changedirectory.bind(this);\r\n  }\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (this.state.exporttype === \"user\") {\r\n      await ExportToUser(this.props.folder.Id, this.state.body);\r\n    } else if (this.state.exporttype === \"library\") {\r\n      await ExportToLibrary(this.props.folder.Id, this.props.folder.Name, this.state.body);\r\n    } else if (this.state.exporttype === \"folder\") {\r\n      await ExportToFolder(this.props.folder.Id, this.state.path.Id);\r\n    }\r\n    this.props.onClose();\r\n  };\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/projects`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({\r\n          folders: data,\r\n          breadCrumbs: breadCrumbs,\r\n          path: { Name: param.Name, Id: param.Id },\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  };\r\n\r\n  async showlocation(event) {\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.state.text === \"Показать\"\r\n          ? this.setState({ text: \"Свернуть\", folders: data })\r\n          : this.setState({ text: \"Показать\" });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  setTypeOfExport(event) {\r\n    if (event.target.value === \"folder\") {\r\n      this.setState({\r\n        exporttype: event.target.value,\r\n        path: { Name: this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Name, Id: this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Id },\r\n      });\r\n    } else {\r\n      this.setState({ exporttype: event.target.value, body:'' });\r\n    }\r\n    console.log(\"wow\");\r\n  }\r\n  onMailChange(event) {\r\n    this.setState({ body: event.target.value });\r\n  }\r\n  onPasswordChange(event) {\r\n    this.setState({ body: event.target.value });\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (prevProps.folder.Id !== this.props.folder.Id) {\r\n      this.setState({\r\n        exporttype: null,\r\n        body: '',\r\n        path: { Name: this.props.folder.Name, Id: this.props.folder.Id },\r\n        folders: null,\r\n        breadCrumbs: this.props.prevpages,\r\n        text: \"Показать\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {  \r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">\r\n              Экспорт папки {this.props.folder.Name}\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <div className=\"formwithradio\">\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"user\" name=\"gender\" /> Другому\r\n                пользователю\r\n              </div>\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"folder\" name=\"gender\" /> В другую\r\n                папку\r\n              </div>\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"library\" name=\"gender\" /> В общую\r\n                библиотеку\r\n              </div>\r\n            </div>\r\n          \r\n          {this.state.exporttype === \"user\" ? (\r\n            <div className=\"exportdiv\">\r\n              <label className=\"formlabel\"> Введите почту получателя:</label>\r\n              <input\r\n                className=\"forminput\"\r\n                type=\"text\"\r\n                value={this.state.body}\r\n                onChange={this.onMailChange}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {this.state.exporttype === \"library\" ? (\r\n            <div className=\"exportdiv\">\r\n              <label className=\"formlabel\"> Задайте пароль:</label>\r\n              <input\r\n                className=\"forminput\"\r\n                type=\"text\"\r\n                value={this.state.body}\r\n                onChange={this.onPasswordChange}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {this.state.exporttype === \"folder\" ? (\r\n            <div className=\"exportdiv\">\r\n              <label className=\"formlabel\">Экспорт в папку:</label>\r\n              <div className=\"selectedpath\">\r\n                <label>{this.state.path.Name}</label>{\" \"}\r\n                <button className=\"arrow\" onClick={this.showlocation}>\r\n                  {\" \"}\r\n                  {this.state.text}{\" \"}\r\n                  {this.state.text === \"Показать\" ? (\r\n                    <div>&ensp;&darr;</div>\r\n                  ) : (\r\n                    <div>&ensp;&uarr;</div>\r\n                  )}{\" \"}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"place\">\r\n                {this.state.text === \"Показать\" ? null : (\r\n                  <div className=\"parentwindowforselectingpath\">\r\n                    <div className=\"modalbreadcrumbs\">\r\n                      {this.state.breadCrumbs.slice(1).map((bc) => (\r\n                        <div key={bc.title} className=\"gt\">\r\n                          <button\r\n                            className=\"BreadCrumb withoutframe\"\r\n                            onClick={this.changedirectory({\r\n                              Id: bc.body.Id,\r\n                              Name: bc.body.Name,\r\n                            })}\r\n                          >\r\n                            {bc.title}\r\n                          </button>\r\n                          &ensp;&rarr;&ensp;\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    <div className=\"windowforselectingpath\">\r\n                      <div className=\"modalfolders\">\r\n                        {this.state.folders.map((folder) => (\r\n                          <div key={folder.Id}>\r\n                            <button\r\n                              className=\"modalbuttonfolder\"\r\n                              onClick={this.changedirectory({\r\n                                Id: folder.Id,\r\n                                Name: folder.Name,\r\n                              })}\r\n                            >\r\n                              <div>{folder.Name}</div>\r\n                            </button>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.handleSubmit}>\r\n              Экспортировать\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.props.onClose}>\r\n              Отменить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from 'react';\r\nimport AddElement from '../ModalForms/Folder/AddElement';\r\nimport AddFolder from '../ModalForms/Folder/AddFolder';\r\nimport DeleteComponent from '../ModalForms/Folder/DeleteFolder';\r\nimport EditFolder from '../ModalForms/Folder/EditFolder';\r\nimport ImportFolder from '../ModalForms/Folder/ImportFolder';\r\nimport ExportFolder from '../ModalForms/Folder/ExportFolder';\r\n\r\nimport './Toolbar.css';\r\n\r\nexport default function Toolbar(props) {\r\n\r\n    const [showAddElement, set_showAddElement] = useState(false);\r\n    const [showAddFolder, set_showAddFolder] = useState(false);\r\n    const [showDeleteComponent, set_showDeleteComponent] = useState(false);\r\n    const [showEditComponent, set_showEditComponent] = useState(false);\r\n    const [showExportComponent, set_showExportComponent] = useState(false);\r\n    const [showImportComponent, set_showImportComponent] = useState(false);\r\n    \r\n    \r\n    return(\r\n            <div className=\"ToolbarRelative\">\r\n            <div className=\"Toolbar\">\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddElement(true)}>Добавить элемент</button>\r\n            <AddElement prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showAddElement(false)} show={showAddElement}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddFolder(true)}>Добавить папку</button>\r\n            <AddFolder prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showAddFolder(false)} show={showAddFolder}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showDeleteComponent(true)}>Удалить папку</button>\r\n            <DeleteComponent prevpages={props.previouspages} component={props.parent} onClose={()=>set_showDeleteComponent(false)} show={showDeleteComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showEditComponent(true)}>Изменить папку</button>\r\n            <EditFolder prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showEditComponent(false)} show={showEditComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showExportComponent(true)}>Экспорт папки</button>\r\n            <ExportFolder prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showExportComponent(false)} show={showExportComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showImportComponent(true)}>Импорт в папку</button>\r\n            <ImportFolder prevpages={props.previouspages} folder={props.parent} onClose={()=>set_showImportComponent(false)} show={showImportComponent}/>\r\n            </div>\r\n            </div>\r\n    )    \r\n  \r\n}","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Toolbar from \"../Toolbar/ToolbarFolder\";\r\nimport logo from \"../App/logo4x.png\";\r\nimport \"./FolderPage.css\";\r\n\r\nexport default class FolderPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { search:\"\", folders: null, elements: null, breadCrumbs: null };\r\n    this.handleClick = this.handleClick.bind(this);\r\n    this.Search = this.Search.bind(this);\r\n  }\r\n  handleClick(e) {\r\n    e.preventDefault();\r\n    this.props.history.push(\"/\");\r\n    localStorage.clear();\r\n    window.location.reload();\r\n  }\r\n\r\n  Search(e) {\r\n    this.setState({search: e.target.value})\r\n  }\r\n\r\n  async GetFolders(parentid) {\r\n    const breadCrumbs = this.props.location.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(this.props.location.state.body.Id);    \r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: this.props.location.state.body.Name,\r\n        path: `/projects`,\r\n        body: {\r\n          Name: this.props.location.state.body.Name,\r\n          Id: this.props.location.state.body.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ folders: data, breadCrumbs: breadCrumbs , search:\"  \"});\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  }\r\n  async GetElements(parentid) {\r\n    await fetch(process.env.REACT_APP_API_ELEMENTS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ elements: data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await this.GetFolders(this.props.location.state.body.Id);\r\n    await this.GetElements(this.props.location.state.body.Id);\r\n  }\r\n  async componentDidUpdate(prevProps) {\r\n    console.log(\"Я в обновлении темплэйта\");\r\n    if (\r\n      prevProps.location.state.body.Id !== this.props.location.state.body.Id\r\n    ) {\r\n      this.setState({\r\n        search:\"\", folders: null, elements: null, breadCrumbs: null\r\n      })\r\n      await this.GetFolders(this.props.location.state.body.Id);\r\n      await this.GetElements(this.props.location.state.body.Id);\r\n      // window.location.reload();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.folders || !this.state.elements) {\r\n      return <div className=\"waitingpage\">\r\n        <div className=\"Loading\">\r\n        <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n        <label className=\"formlabel\">Загрузка...</label>\r\n        </div>\r\n      </div>;\r\n    }\r\n    const { folders, elements, breadCrumbs } = this.state; //сначала\r\n    return (\r\n      <div className=\"folderPage\">\r\n        <div className=\"Header\">\r\n          <div className=\"BreadCrumbs\">\r\n            {breadCrumbs.map((bc) => (\r\n              <div key={bc.title} className=\"gt\">\r\n                <Link\r\n                  className=\"BreadCrumb\"\r\n                  to={{\r\n                    pathname: bc.path,\r\n                    state: { body: bc.body, breadCrumbs: breadCrumbs },\r\n                  }}\r\n                >\r\n                  {bc.title}\r\n                </Link>\r\n                &ensp;&rarr;&ensp;\r\n              </div>\r\n            ))}\r\n          </div>          \r\n          <div className=\"settingsinheader\">\r\n          <input type=\"text\" className=\"search\" onChange={this.Search} placeholder=\"поиск\" ></input>\r\n            <Link\r\n              to={{ pathname: `/library`, state: { breadCrumbs: breadCrumbs } }}\r\n            >\r\n              {<button className=\"btn_logout\">общая библиотека</button>}\r\n            </Link>\r\n            <Link to={{ pathname: \"/settings\", state: { breadCrumbs: breadCrumbs } }}>\r\n              {<button className=\"btn_logout\">настройки</button>}\r\n            </Link>\r\n            {\r\n              <button className=\"btn_logout\" onClick={this.handleClick}>\r\n                выход\r\n              </button>\r\n            }\r\n            <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n          </div>\r\n        </div>\r\n        {this.state.search==='  '?<div className=\"listview\">\r\n          {folders.map((folder) => (\r\n            <div key={folder.Id}>\r\n              <Link\r\n                className=\"folderinlist\"\r\n                to={{\r\n                  pathname: `/projects`,\r\n                  state: { breadCrumbs: breadCrumbs, body: folder },\r\n                }}\r\n              >\r\n                <div className=\"NameElementOfList\">{folder.Name}</div>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n          {elements.map((el) => (\r\n            <div key={el.Id}>\r\n              <Link\r\n                className=\"elementinlist\"\r\n                to={{\r\n                  pathname: `/element`,\r\n                  state: { breadCrumbs: breadCrumbs, body: el },\r\n                }}\r\n              >\r\n                {el.Image!==null?\r\n                <img\r\n                  className=\"elementimage\"\r\n                  src={`data:image/jpeg;base64,${el.Image}`}\r\n                  alt=\"No Image\"\r\n                />\r\n  :<div className=\"NoImage\">No Image</div>}\r\n                <div className=\"NameElementOfList\">{el.Name}</div>\r\n              </Link>\r\n            </div>\r\n          ))}          \r\n        </div>:<div className=\"listview\">\r\n          {folders.filter(\r\n          (rel) => rel.Name.includes(this.state.search)\r\n        ).map((folder) => (\r\n            <div key={folder.Id}>\r\n              <Link\r\n                className=\"folderinlist\"\r\n                to={{\r\n                  pathname: `/projects`,\r\n                  state: { breadCrumbs: breadCrumbs, body: folder },\r\n                }}\r\n              >\r\n                <div className=\"NameElementOfList\">{folder.Name}</div>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n          {elements.filter(\r\n          (rel) => rel.Name.includes(this.state.search)\r\n        ).map((el) => (\r\n            <div key={el.Id}>\r\n              <Link\r\n                className=\"elementinlist\"\r\n                to={{\r\n                  pathname: `/element`,\r\n                  state: { breadCrumbs: breadCrumbs, body: el },\r\n                }}\r\n              >\r\n                {el.Image!==null?\r\n                <img\r\n                  className=\"elementimage\"\r\n                  src={`data:image/jpeg;base64,${el.Image}`}\r\n                  alt=\"No Image\"\r\n                />\r\n  :<div className=\"NoImage\">No Image</div>}\r\n                <div className=\"NameElementOfList\">{el.Name}</div>\r\n              </Link>\r\n            </div>\r\n          ))}          \r\n        </div>}\r\n\r\n        \r\n        <div className=\"foldercomponents\">\r\n          <Toolbar\r\n            previouspages={breadCrumbs}\r\n            parent={this.props.location.state.body}\r\n          ></Toolbar>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\n\r\n\r\nasync function SaveCharacteristics (arrayofcharacteristics, idel)\r\n{\r\n    const box =   {\r\n        \"characteristics\": arrayofcharacteristics,\r\n        \"elementid\": Number(idel)\r\n     }\r\n    await fetch(process.env.REACT_APP_API_CHARACTERISTICS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(box), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\nexport default class AddCharacteristics extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={characteristics:null, currentchar:{name:'', value:''}}\r\n        this.ChangeName = this.ChangeName.bind(this);\r\n        this.ChangeValue = this.ChangeValue.bind(this);\r\n        this.CreateNew = this.CreateNew.bind(this);  \r\n        this.CreateNewName = this.CreateNewName.bind(this);\r\n        this.CreateNewValue = this.CreateNewValue.bind(this);   \r\n        this.Save = this.Save.bind(this);   \r\n    }  \r\n\r\n    async Save(e){\r\n        e.preventDefault();\r\n        let array=[];\r\n        if((this.state.currentchar.name!=='')||(this.state.currentchar.name!=='')){\r\n            if(this.state.characteristics===null)\r\n        {\r\n            array=[{name:this.state.currentchar.name, value:this.state.currentchar.value, id:0}]            \r\n        }  \r\n        else{\r\n            array=[...this.state.characteristics, {name:this.state.currentchar.name, value:this.state.currentchar.value, id:this.state.characteristics.length}];            \r\n        }               \r\n        }\r\n        else{\r\n            array=this.state.characteristics;\r\n        }\r\n        await SaveCharacteristics(array, this.props.element.Id);\r\n        this.props.onClose();        \r\n        window.location.reload();\r\n    }\r\n    CreateNewName(e){\r\n        var val = e.target.value;\r\n        this.setState(prevState => ({currentchar:{name:val, value:prevState.currentchar.value}}))\r\n    }\r\n    CreateNewValue(e){\r\n        var val = e.target.value;\r\n        this.setState(prevState => ({currentchar:{name:prevState.currentchar.name, value:val}}))\r\n    }\r\n    \r\n    ChangeName = param => e => {\r\n        this.setState(prevState => {\r\n            const newItems = [...prevState.characteristics];\r\n            newItems[param].name = e.target.value;\r\n            return {characteristics: newItems};\r\n        })\r\n    }\r\n    ChangeValue= param => e => {\r\n        this.setState(prevState => {\r\n            const newItems = [...prevState.characteristics];\r\n            newItems[param].value = e.target.value;\r\n            return {characteristics: newItems};\r\n        })\r\n    }\r\n    \r\n    CreateNew(e) {\r\n        e.preventDefault();  \r\n        if(this.state.characteristics===null)\r\n        {\r\n            this.setState(prevState => ({\r\n                characteristics: [{name:prevState.currentchar.name, value:prevState.currentchar.value, id:0}]\r\n              , currentchar:{name:'', value:''}}))\r\n        }  \r\n        else{\r\n            this.setState(prevState => ({\r\n                characteristics: [...prevState.characteristics, {name:prevState.currentchar.name, value:prevState.currentchar.value, id:prevState.characteristics.length}]\r\n              , currentchar:{name:'', value:''}}))\r\n        }        \r\n    }\r\n\r\n    render(){\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Добавление характеристик</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                    \r\n                    <div className=\"newcharswindow\">\r\n                <div className=\"newcharacter\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.currentchar.name} onChange={this.CreateNewName}/>\r\n                </div>\r\n                <div className=\"newcharacter\">\r\n                <label className=\"formlabel\"> Значение:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.currentchar.value} onChange={this.CreateNewValue}/>  \r\n                </div>\r\n                {this.state.characteristics!==null? this.state.characteristics.map(char=>\r\n                        <div key={char.id} className=\"linenewchar\">\r\n                            <div className=\"newcharacter\">\r\n                            <label className=\"formlabel\"> Название:</label>\r\n                            <input className=\"forminput\" type=\"text\" value={char.name} onChange={this.ChangeName(char.id)}/>\r\n                            </div>\r\n                            <div className=\"newcharacter\">\r\n                            <label className=\"formlabel\"> Значение:</label>\r\n                            <input className=\"forminput\" type=\"text\" value={char.value} onChange={this.ChangeValue(char.id)}/>  \r\n                            </div></div>):null}\r\n                            </div> \r\n                        <button className=\"arrow\" onClick={this.CreateNew}>+ Добавить еще одну</button>   \r\n                </div>                             \r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\" onClick={this.Save}>Сохранить</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Назад</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function AddTemplate(templateid, elementid) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_ELEMENTS +\r\n      `/templatefolder?templateid=${templateid}&elementid=${elementid}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\nexport default class AddTemplateElement extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(this.props);\r\n    this.state = {\r\n      path: { Name: \"\", Id: null },\r\n      isneedupdate: true,\r\n      folders: null,\r\n      telements: null,\r\n      breadCrumbs: null,\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.changedirectory = this.changedirectory.bind(this);\r\n    this.Selecttelement = this.Selecttelement.bind(this);\r\n    this.CloseWindow = this.CloseWindow.bind(this);\r\n  }\r\n\r\n  CloseWindow() {\r\n    this.props.onClose();\r\n    this.setState({ isneedupdate: true });\r\n  }\r\n\r\n  Selecttelement = (param) => async (event) => {\r\n    this.setState({ path: { Name: param.Name, Id: param.Id } });\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await AddTemplate(this.state.path.Id, this.props.element.Id);\r\n    this.props.onClose();\r\n    window.location.reload();\r\n  };\r\n\r\n  async GetFoldersAndElements(idparent) {\r\n    let folders;\r\n    let telements;\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${idparent}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        folders=data\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEELEMENTS + `/${idparent}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        telements=data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n      this.setState({ telements: telements,  folders:folders});\r\n  }\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/templates`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    this.setState({ breadCrumbs: breadCrumbs });\r\n    await this.GetFoldersAndElements(param.Id, breadCrumbs);\r\n  };\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (this.props.show) {\r\n      if (this.state.isneedupdate === true) {\r\n        this.setState({\r\n          path: { Name: \"\", Id: null },\r\n          folders: null,\r\n          telements: null,\r\n          breadCrumbs: [\r\n            {\r\n              title: \"Библиотека\",\r\n              path: \"/templae\",\r\n              body: {\r\n                Name: \"Библиотека\",\r\n                Id: 0,\r\n              },\r\n            },\r\n          ],\r\n          isneedupdate: false,\r\n        });\r\n        await this.GetFoldersAndElements(0, null);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    if (\r\n      !this.state.breadCrumbs ||\r\n      !this.state.folders ||\r\n      !this.state.telements\r\n    ) {\r\n      return null;\r\n    }\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">Добавление класса</div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n              <div className=\"flexdiv\">\r\n            <label className=\"formlabel\">Расположение класса:</label>\r\n              <label>{this.state.path.Name}</label>\r\n            </div>\r\n            <div className=\"place\">\r\n              <div className=\"parentwindowforselectingpath\">\r\n                <div className=\"modalbreadcrumbs\">\r\n                  {this.state.breadCrumbs.map((bc) => (\r\n                    <div key={bc.title} className=\"gt\">\r\n                      <button\r\n                        className=\"BreadCrumb withoutframe\"\r\n                        onClick={this.changedirectory({\r\n                          Id: bc.body.Id,\r\n                          Name: bc.body.Name,\r\n                        })}\r\n                      >\r\n                        {bc.title}\r\n                      </button>\r\n                      &ensp;&rarr;&ensp;\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                <div className=\"windowforselectingpath\">\r\n                  {this.state.folders.length > 0 ? (\r\n                    <div className=\"modalfolders\">\r\n                      {this.state.folders.map((folder) => (\r\n                        <div key={folder.Id}>\r\n                          <button\r\n                            className=\"modalbuttonfolder\"\r\n                            onClick={this.changedirectory({\r\n                              Id: folder.Id,\r\n                              Name: folder.Name,\r\n                            })}\r\n                          >\r\n                            <div>{folder.Name}</div>\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : null}\r\n\r\n                  {this.state.telements.length > 0 ? (\r\n                    <div className=\"modalfolders\">\r\n                      {this.state.telements.map((el) => (\r\n                        <div key={el.Id}>\r\n                          <button\r\n                            className=\"modalbuttonelement\"\r\n                            onClick={this.Selecttelement({\r\n                              Id: el.Id,\r\n                              Name: el.Name,\r\n                            })}\r\n                          >\r\n                            <div>{el.Name}</div>\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.handleSubmit}>\r\n              Добавить класс\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.CloseWindow}>\r\n              Отменить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nasync function DeleteElement (elementid)\r\n{   \r\n    await fetch(process.env.REACT_APP_API_ELEMENTS + `/${elementid}`,{\r\n        method: 'DELETE', // или 'PUT'\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\nexport default class DeleteComponent extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        console.log(this.props);\r\n        this.state={isdeleted:null}\r\n        this.handleSubmit = this.handleSubmit.bind(this);        \r\n    }\r\n   \r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        await DeleteElement(this.props.element.Id);\r\n        this.props.onClose();\r\n        this.setState({isdeleted:true});\r\n      }\r\n\r\n    render(){\r\n        console.log(\"рендер удаления\");\r\n        if(this.state.isdeleted)\r\n        {\r\n            let bc=this.props.prevpages;\r\n            bc.length=bc.length-1;\r\n            this.setState({isdeleted: false});\r\n            console.log(\"Я в удалении\");\r\n            return <Redirect to={{pathname: bc[bc.length-1].path, state: { body: bc[bc.length-1].body, breadCrumbs:bc}            \r\n  }}/>\r\n        }\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }     \r\n        \r\n        console.log(this.props);\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Удаление элемента {this.props.element.Name}</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Вы действительно хотите удалить элемент {this.props.element.Name}?</label>\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\"  onClick={this.handleSubmit}>Да</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Отменить</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\n\r\nasync function Edit (elementid, name,characteristics,tchars,relations) {\r\n  let elemid;\r\n  const element = {\r\n    IdElement: Number(elementid),\r\n    Name: name,\r\n    characteristics: characteristics,\r\n    templatecharacteristics: tchars,\r\n    relations:relations\r\n  };\r\n  await fetch(process.env.REACT_APP_API_ELEMENTS, {\r\n    method: \"PUT\", // или 'PUT'\r\n    body: JSON.stringify(element), // данные могут быть 'строкой' или {объектом}!\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  }).then(response=>{ return response.json()})\r\n  .then(data=>{\r\n      elemid=data;\r\n  }).catch(err => console.log(err));\r\nreturn elemid\r\n}\r\n    async function EditImage (id,elwithimg){\r\n        await fetch(process.env.REACT_APP_API_ELEMENTS+`/image/${id}`,{\r\n            method: 'POST', // или 'PUT'\r\n            body: elwithimg, // данные могут быть 'строкой' или {объектом}!\r\n            headers: {\r\n                'Accept': 'application/json'\r\n              }}).then(function(response) {\r\n                console.log(response.status)});\r\n    }\r\n\r\nexport default class EditElement extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      templatecharacteristics: null,\r\n      characteristics: null,\r\n      typeofedit: \"element\",\r\n      relations: null,\r\n      file:null,\r\n      filepath:null,\r\n      name:this.props.element.Name,\r\n      isneedupdate: true,\r\n    };\r\n    this.onChange = this.onChange.bind(this);\r\n    this.Save = this.Save.bind(this);\r\n    this.handleImageChange = this.handleImageChange.bind(this);\r\n  }\r\n  //Для характеристик: изменить название характеристики\r\n  // ChangeName = (param) => (e) => {\r\n  //   this.setState((prevState) => {\r\n  //     const newItems = [...prevState.characteristics];\r\n  //     newItems[param].name = e.target.value;\r\n  //     return { characteristics: newItems };\r\n  //   });\r\n  // };\r\n\r\n  ChangeShow = (param) => (e) => {\r\n    this.setState({ typeofedit: param });\r\n  };\r\n\r\n  //Для характеристик: удалить характеристику\r\n  DeleteChar = (param) => (e) => {\r\n    this.setState((prevState) => ({\r\n      characteristics: prevState.characteristics.filter(\r\n        (char) => char.Id !== param\r\n      ),\r\n    }));\r\n  };\r\n  //Для классов: удалить класс\r\n  DeleteClass = (param) => (e) => {\r\n    this.setState((prevState) => ({\r\n      templatecharacteristics: prevState.templatecharacteristics.filter(\r\n        (char) => char.Id !== param\r\n      ),\r\n    }));\r\n  };\r\n  //Для характеристик: изменить значение характеристики\r\n  // ChangeValue = (param) => (e) => {\r\n  //   this.setState((prevState) => {\r\n  //     const newItems = [...prevState.characteristics];\r\n  //     newItems[param].value = e.target.value;\r\n  //     return { characteristics: newItems };\r\n  //   });\r\n  // };\r\n\r\n  //Для свзяли: удалить связь\r\n  DeleteRelation = (param) => (e) => {\r\n    this.setState((prevState) => ({\r\n      relations: prevState.relations.filter((rel) => rel.Id !== param),\r\n    }));\r\n  };\r\n  //Для элемента: изменить имя\r\n  onChange(e) {\r\n    var val = e.target.value;\r\n    this.setState({ name: val });\r\n  }\r\n  \r\n  async Save(event) {\r\n    event.preventDefault();\r\n    const elemid=await Edit(this.props.element.Id, this.state.name, this.state.characteristics, this.state.templatecharacteristics, this.state.relations);\r\n    if (this.state.file != null) \r\n    {\r\n      await EditImage(elemid, this.state.file);\r\n    }    \r\n    this.props.onClose();\r\n    window.location.reload();\r\n  }\r\n//Для элемента: изменить фото\r\n  handleImageChange(e) {\r\n    e.preventDefault();\r\n    if (e.target.files.length > 0) {\r\n      let form = new FormData();\r\n      for (var index = 0; index < e.target.files.length; index++) {\r\n        var element = e.target.files[index];\r\n        form.append(\"image\", element);\r\n      }\r\n      this.setState({\r\n        file: form,\r\n        filepath: URL.createObjectURL(e.target.files[0]),\r\n      });\r\n    } else if (this.state.file != null) {\r\n      this.setState({ file: null, filepath: null });\r\n    }\r\n  }\r\n  async GetFoldersElementsRelations(parentid) {\r\n    let tchars;\r\n    let chars;\r\n    let relations;\r\n    await fetch(\r\n      process.env.REACT_APP_API_CHARACTERISTICS + `/only?idelement=${parentid}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n          tchars=data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(process.env.REACT_APP_API_CHARACTERISTICS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        chars=data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(process.env.REACT_APP_API_RELATIONS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        relations=data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    this.setState({\r\n      templatecharacteristics: tchars,\r\n      characteristics: chars,\r\n      relations: relations,\r\n    });\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (this.props.show) {\r\n      if (this.state.isneedupdate === true) {\r\n        this.setState({\r\n            templatecharacteristics: null,\r\n            characteristics: null,\r\n            typeofedit: \"element\",\r\n            relations: null,\r\n            file:null,\r\n            filepath:null,\r\n            name:this.props.element.Name,\r\n            isneedupdate: false,\r\n          });\r\n        await this.GetFoldersElementsRelations(this.props.element.Id);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    if ((!this.state.characteristics)||(!this.state.templatecharacteristics)||(!this.state.relations)) {\r\n        return null;\r\n      }\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">Редактирование элемента</div>\r\n          </div>\r\n            {this.state.typeofedit === \"element\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal current\">элемент</button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"characteristics\")}\r\n                >\r\n                  харакеристики\r\n                </button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"relations\")}\r\n                >\r\n                  связи\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"characteristics\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal\" onClick={this.ChangeShow(\"element\")}>\r\n                  элемент\r\n                </button>\r\n                <button className=\"button-selector-modal current\">харакеристики</button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"relations\")}\r\n                >\r\n                  связи\r\n                </button>\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"relations\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal\" onClick={this.ChangeShow(\"element\")}>\r\n                  элемент\r\n                </button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"characteristics\")}\r\n                >\r\n                  харакеристики\r\n                </button>\r\n                <button className=\"button-selector-modal current\">связи</button>\r\n              </div>\r\n            ) : null}\r\n\r\n            {this.state.typeofedit === \"element\" ? (\r\n              <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input\r\n                  className=\"forminput\"\r\n                  type=\"text\"\r\n                  value={this.state.name}\r\n                  onChange={this.onChange}\r\n                />\r\n                <div className=\"modal-image\">\r\n                  <label className=\"formlabel\">Изображение:</label>\r\n                  <label className=\"custom-file-upload\">Загрузить изображение           \r\n                <input type=\"file\" onChange={(e)=>this.handleImageChange(e)}/>  \r\n                </label>\r\n                  {this.state.filepath === null ? (\r\n                    <div>\r\n                    <img className=\"downloadimage\" src={`data:image/jpeg;base64,${this.props.element.Image}`} /></div>\r\n                  ) : (\r\n                    <img className=\"downloadimage\" src={this.state.filepath} />\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"characteristics\" ? (\r\n              <div>\r\n                {this.state.templatecharacteristics.map((group) => (\r\n                  <div key={group.Id} onClick={this.DeleteClass(group.Id)} className=\"element-with-delete-button ParentElement\">\r\n                    <button className=\"arrow\">&otimes;</button>{group.Name}\r\n                  </div>\r\n                ))}\r\n\r\n                {this.state.characteristics.map((folder) => (\r\n                  <div key={folder.Id} onClick={this.DeleteChar(folder.Id)} className=\"element-with-delete-button\">\r\n                    <button className=\"arrow\">&otimes;</button> {folder.Name}: {folder.Value}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"relations\" ? (\r\n              <div>\r\n                {this.state.relations.map((folder) => (\r\n                  <div key={folder.Id} className=\"element-with-delete-button\">\r\n                      <button className=\"arrow\" onClick={this.DeleteRelation(folder.Id)}>&otimes;</button>\r\n                    {folder.NameFirstElement}&ensp;&mdash;&ensp;\r\n                    {folder.NameSecondElement}                   \r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : null}\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.Save}>\r\n              Сохранить\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.props.onClose}>\r\n              Назад\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function ExportToUser(elementid, usermail) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_ELEMENTS +\r\n      `/exporttouser?elementid=${elementid}&usermail=${usermail}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nasync function ExportToLibrary(elementid, name, password) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_ELEMENTS +\r\n      `/exporttolibrary?elementid=${elementid}&name=${name}&password=${password}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nasync function ExportToFolder(elementid, newrootid) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_ELEMENTS +\r\n      `/exporttofolder?elementid=${elementid}&newrootid=${newrootid}`,\r\n    {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nexport default class ExportElement extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(this.props);\r\n    this.state = {\r\n      exporttype: null,\r\n      body: \"\",\r\n      path: {\r\n        Name: this.props.prevpages[this.props.prevpages.length - 2].Name,\r\n        Id: this.props.prevpages[this.props.prevpages.length - 2].Id,\r\n      },\r\n      folders: null,\r\n      breadCrumbs: this.props.prevpages.filter(\r\n        (rel) => rel.body.Id !== this.props.element.Id\r\n      ),\r\n      text: \"Показать\",\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.setTypeOfExport = this.setTypeOfExport.bind(this);\r\n    this.onMailChange = this.onMailChange.bind(this);\r\n    this.onPasswordChange = this.onPasswordChange.bind(this);\r\n    this.showlocation = this.showlocation.bind(this);\r\n    this.changedirectory = this.changedirectory.bind(this);\r\n  }\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (this.state.exporttype === \"user\") {\r\n      await ExportToUser(this.props.element.Id, this.element.body);\r\n    } else if (this.state.exporttype === \"library\") {\r\n      await ExportToLibrary(\r\n        this.props.element.Id,\r\n        this.props.element.Name,\r\n        this.state.body\r\n      );\r\n    } else if (this.state.exporttype === \"folder\") {\r\n      await ExportToFolder(this.props.element.Id, this.state.path.Id);\r\n    }\r\n    this.props.onClose();\r\n  };\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/projects`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({\r\n          folders: data,\r\n          breadCrumbs: breadCrumbs,\r\n          path: { Name: param.Name, Id: param.Id },\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  };\r\n\r\n  async showlocation(event) {\r\n    await fetch(\r\n      process.env.REACT_APP_API_FOLDERS +\r\n        `/${this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.state.text === \"Показать\"\r\n          ? this.setState({ text: \"Свернуть\", folders: data })\r\n          : this.setState({ text: \"Показать\" });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  setTypeOfExport(event) {\r\n    if (event.target.value === \"folder\") {\r\n      this.setState({\r\n        exporttype: event.target.value,\r\n        path: {\r\n          Name: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body\r\n            .Name,\r\n          Id: this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id,\r\n        },\r\n      });\r\n    } else {\r\n      this.setState({ exporttype: event.target.value, body: \"\" });\r\n    }\r\n    console.log(\"wow\");\r\n  }\r\n  onMailChange(event) {\r\n    this.setState({ body: event.target.value });\r\n  }\r\n  onPasswordChange(event) {\r\n    this.setState({ body: event.target.value });\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (prevProps.element.Id !== this.props.element.Id) {\r\n      this.setState({\r\n        exporttype: null,\r\n        body: \"\",\r\n        path: {\r\n          Name: this.props.prevpages[this.props.prevpages.length - 1].Name,\r\n          Id: this.props.prevpages[this.props.prevpages.length - 1].Id,\r\n        },\r\n        folders: null,\r\n        breadCrumbs: this.props.prevpages.filter(\r\n          (rel) => rel.body.Id !== this.props.element.Id\r\n        ),\r\n        text: \"Показать\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">\r\n              Экспорт элемента {this.props.element.Name}\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <div className=\"formwithradio\">\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"user\" name=\"gender\" /> Другому\r\n                пользователю\r\n              </div>\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"folder\" name=\"gender\" /> В другую\r\n                папку\r\n              </div>\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"library\" name=\"gender\" /> В общую\r\n                библиотеку\r\n              </div>\r\n            </div>\r\n\r\n            {this.state.exporttype === \"user\" ? (\r\n              <div className=\"exportdiv\">\r\n                <label className=\"formlabel\"> Введите почту получателя:</label>\r\n                <input\r\n                  className=\"forminput\"\r\n                  type=\"text\"\r\n                  value={this.state.body}\r\n                  onChange={this.onMailChange}\r\n                />\r\n              </div>\r\n            ) : null}\r\n            {this.state.exporttype === \"library\" ? (\r\n              <div className=\"exportdiv\">\r\n                <label className=\"formlabel\"> Задайте пароль:</label>\r\n                <input\r\n                  className=\"forminput\"\r\n                  type=\"text\"\r\n                  value={this.state.body}\r\n                  onChange={this.onPasswordChange}\r\n                />\r\n              </div>\r\n            ) : null}\r\n            {this.state.exporttype === \"folder\" ? (\r\n              <div className=\"exportdiv\">\r\n                <label className=\"formlabel\">Экспорт в папку:</label>\r\n                <div className=\"selectedpath\">\r\n                  <label>{this.state.path.Name}</label>{\" \"}\r\n                  <button className=\"arrow\" onClick={this.showlocation}>\r\n                    {\" \"}\r\n                    {this.state.text}{\" \"}\r\n                    {this.state.text === \"Показать\" ? (\r\n                      <div>&ensp;&darr;</div>\r\n                    ) : (\r\n                      <div>&ensp;&uarr;</div>\r\n                    )}{\" \"}\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"place\">\r\n                  {this.state.text === \"Показать\" ? null : (\r\n                    <div className=\"parentwindowforselectingpath\">\r\n                      <div className=\"modalbreadcrumbs\">\r\n                        {this.state.breadCrumbs.slice(1).map((bc) => (\r\n                          <div key={bc.title} className=\"gt\">\r\n                            <button\r\n                              className=\"BreadCrumb withoutframe\"\r\n                              onClick={this.changedirectory({\r\n                                Id: bc.body.Id,\r\n                                Name: bc.body.Name,\r\n                              })}\r\n                            >\r\n                              {bc.title}\r\n                            </button>\r\n                            &ensp;&rarr;&ensp;\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                      <div className=\"windowforselectingpath\">\r\n                        <div className=\"modalfolders\">\r\n                          {this.state.folders.map((folder) => (\r\n                            <div key={folder.Id}>\r\n                              <button\r\n                                className=\"modalbuttonfolder\"\r\n                                onClick={this.changedirectory({\r\n                                  Id: folder.Id,\r\n                                  Name: folder.Name,\r\n                                })}\r\n                              >\r\n                                <div>{folder.Name}</div>\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.handleSubmit}>\r\n              Экспортировать\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.props.onClose}>\r\n              Отменить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function AddRelationTwoLines(\r\n  firstelement,\r\n  secondelement,\r\n  firsttosec,\r\n  sectofirst\r\n) {\r\n  const box = {\r\n    Firstelementid: Number(firstelement),\r\n    Secondelementid: Number(secondelement),\r\n    Rel1to2: firsttosec,\r\n    Rel2to1: sectofirst,\r\n  };\r\n  await fetch(process.env.REACT_APP_API_RELATIONS + `/relation2`, {\r\n    method: \"POST\", // или 'PUT'\r\n    body: JSON.stringify(box), // данные могут быть 'строкой' или {объектом}!\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  }).then(function (response) {\r\n    console.log(response.status);\r\n  });\r\n}\r\n\r\nasync function AddRelationOneLine(firstelement, secondelement, firsttosec) {\r\n  const box = {\r\n    Firstelementid: Number(firstelement),\r\n    Secondelementid: Number(secondelement),\r\n    Rel1to2: firsttosec,\r\n    Rel2to1: null,\r\n  };\r\n  await fetch(process.env.REACT_APP_API_RELATIONS + `/relation1`, {\r\n    method: \"POST\", // или 'PUT'\r\n    body: JSON.stringify(box), // данные могут быть 'строкой' или {объектом}!\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  }).then(function (response) {\r\n    console.log(response.status);\r\n  });\r\n}\r\n\r\nexport default class AddRelation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(this.props);\r\n    this.state = {\r\n      path: { Name: \"\", Id: null },\r\n      typeofrel: \"Односторонняя\",\r\n      firstrel: null,\r\n      secondrel: null,\r\n      defaultdirection: true,\r\n      isneedupdate: true,\r\n      folders: null,\r\n      elements: null,\r\n      breadCrumbs: this.props.prevpages.slice(0, -1),\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.changedirectory = this.changedirectory.bind(this);\r\n    this.Selecttelement = this.Selecttelement.bind(this);\r\n    this.CloseWindow = this.CloseWindow.bind(this);\r\n    this.changedirection = this.changedirection.bind(this);\r\n    this.changeonelinerel = this.changeonelinerel.bind(this);\r\n    this.changesecondlinerel = this.changesecondlinerel.bind(this);\r\n    this.changetypeofrel = this.changetypeofrel.bind(this);\r\n  }\r\n\r\n  changetypeofrel(e) {\r\n    this.state.typeofrel === \"Односторонняя\"\r\n      ? this.setState({ typeofrel: \"Двусторонняя\" })\r\n      : this.setState({ typeofrel: \"Односторонняя\" });\r\n  }\r\n\r\n  changeonelinerel(e) {\r\n    this.setState({ firstrel: e.target.value });\r\n  }\r\n\r\n  changesecondlinerel(e) {\r\n    this.setState({ secondrel: e.target.value });\r\n  }\r\n\r\n  changedirection(e) {\r\n    this.state.defaultdirection\r\n      ? this.setState({ defaultdirection: false })\r\n      : this.setState({ defaultdirection: true });\r\n  }\r\n\r\n  CloseWindow() {\r\n    this.props.onClose();\r\n    this.setState({ isneedupdate: true });\r\n  }\r\n\r\n  Selecttelement = (param) => async (event) => {\r\n    this.setState({ path: { Name: param.Name, Id: param.Id } });\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (this.state.typeofrel === \"Односторонняя\") {\r\n      if (this.state.defaultdirection) {\r\n        await AddRelationOneLine(\r\n          this.props.element.Id,\r\n          this.state.path.Id,\r\n          this.state.firstrel\r\n        );\r\n      } else {\r\n        await AddRelationOneLine(\r\n          this.state.path.Id,\r\n          this.props.element.Id,\r\n          this.state.firstrel\r\n        );\r\n      }\r\n    } else {\r\n      if (this.state.defaultdirection) {\r\n        await AddRelationTwoLines(\r\n          this.props.element.Id,\r\n          this.state.path.Id,\r\n          this.state.firstrel,\r\n          this.state.secondrel\r\n        );\r\n      } else {\r\n        await AddRelationTwoLines(\r\n          this.state.path.Id,\r\n          this.props.element.Id,\r\n          this.state.firstrel,\r\n          this.state.secondrel\r\n        );\r\n      }\r\n    }\r\n    window.location.reload();    \r\n    this.props.onClose();\r\n  };\r\n\r\n  async GetFoldersAndElements(idparent) {\r\n    let folders;\r\n    let elements;\r\n    await fetch(process.env.REACT_APP_API_FOLDERS + `/${idparent}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        folders = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(process.env.REACT_APP_API_ELEMENTS + `/${idparent}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        elements = data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    this.setState({ folders: folders, elements: elements });\r\n  }\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/templates`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    this.setState({ breadCrumbs: breadCrumbs });\r\n    await this.GetFoldersAndElements(param.Id, breadCrumbs);\r\n  };\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (this.props.show) {\r\n      if (this.state.isneedupdate === true) {\r\n        this.setState({\r\n          path: { Name: \"\", Id: null },\r\n          defaultdirection: true,\r\n          isneedupdate: false,\r\n          folders: null,\r\n          elements: null,\r\n          breadCrumbs: this.props.prevpages.slice(0, -1),\r\n        });\r\n        await this.GetFoldersAndElements(\r\n          this.state.breadCrumbs[this.state.breadCrumbs.length - 1].body.Id\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    if (\r\n      !this.state.breadCrumbs ||\r\n      !this.state.folders ||\r\n      !this.state.elements\r\n    ) {\r\n      return null;\r\n    }\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">Добавление связи</div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <div className=\"flexdiv\">\r\n            <label className=\"formlabel\">Связать элемент с:</label>\r\n              <label>\r\n                {this.state.path.Name !== \"\" ? (\r\n                  <div>{this.state.path.Name}</div>\r\n                ) : (\r\n                  <div>&ensp; Элемент не выбран</div>\r\n                )}\r\n              </label>\r\n            </div>\r\n            <div className=\"place\">\r\n              <div className=\"parentwindowforselectingpath\">\r\n                <div className=\"modalbreadcrumbs\">\r\n                  {this.state.breadCrumbs.slice(1).map((bc) => (\r\n                    <div key={bc.title} className=\"gt\">\r\n                      <button\r\n                        className=\"BreadCrumb withoutframe\"\r\n                        onClick={this.changedirectory({\r\n                          Id: bc.body.Id,\r\n                          Name: bc.body.Name,\r\n                        })}\r\n                      >\r\n                        {bc.title}\r\n                      </button>\r\n                      &ensp;&rarr;&ensp;\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                <div className=\"windowforselectingpath\">\r\n                  {this.state.folders.length > 0 ? (\r\n                    <div className=\"modalfolders\">\r\n                      {this.state.folders.map((folder) => (\r\n                        <div key={folder.Id}>\r\n                          <button\r\n                            className=\"modalbuttonfolder\"\r\n                            onClick={this.changedirectory({\r\n                              Id: folder.Id,\r\n                              Name: folder.Name,\r\n                            })}\r\n                          >\r\n                            <div>{folder.Name}</div>\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : null}\r\n\r\n                  {this.state.elements.length > 0 ? (\r\n                    <div className=\"modalfolders\">\r\n                      {this.state.elements.map((el) => (\r\n                        <div key={el.Id}>\r\n                          <button\r\n                            className=\"modalbuttonelement\"\r\n                            onClick={this.Selecttelement({\r\n                              Id: el.Id,\r\n                              Name: el.Name,\r\n                            })}\r\n                          >\r\n                            <div>{el.Name}</div>\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {this.state.path.Name !== \"\" ? (\r\n              <div>\r\n              <div className=\"Relations\">\r\n                <div className=\"flexdiv\">                  \r\n                {this.state.defaultdirection ? (\r\n                  <label className=\"formlabel\">\r\n                    Связь {this.props.element.Name} с {this.state.path.Name}\r\n                  </label>\r\n                ) : (\r\n                  <label className=\"formlabel\">\r\n                    Связь {this.state.path.Name} с {this.props.element.Name}\r\n                  </label>\r\n                )}\r\n                <button className=\"button arrow\" onClick={this.changedirection}>\r\n                  &harr;\r\n                </button>\r\n                </div>\r\n                <input\r\n                  className=\"forminput\"\r\n                  type=\"text\"\r\n                  value={this.state.firstrel}\r\n                  onChange={this.changeonelinerel}\r\n                />\r\n                </div>\r\n                \r\n                {this.state.typeofrel === \"Двусторонняя\" ? (\r\n                  <div className=\"Relations\">\r\n                    <div className=\"flexdiv\">\r\n                    {this.state.defaultdirection ? (\r\n                      <label className=\"formlabel\">\r\n                        Связь {this.state.path.Name} с {this.props.element.Name}\r\n                      </label>\r\n                    ) : (\r\n                      <label className=\"formlabel\">\r\n                        Связь {this.props.element.Name} с {this.state.path.Name}\r\n                      </label>\r\n                    )}\r\n                    </div>\r\n                    <input\r\n                      className=\"forminput\"\r\n                      type=\"text\"\r\n                      value={this.state.secondrel}\r\n                      onChange={this.changesecondlinerel}\r\n                    />\r\n                  </div>\r\n                ) : null}\r\n                <div className=\"flexdiv\">\r\n                  <label className=\"formlabel\">\r\n                    Тип связи: {this.state.typeofrel}\r\n                  </label>\r\n                  <button\r\n                    className=\"arrow\"\r\n                    onClick={this.changetypeofrel}\r\n                  >\r\n                    Изменить\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.handleSubmit}>\r\n              Связать\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.CloseWindow}>\r\n              Отменить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from 'react';\r\nimport AddCharacteristics from '../ModalForms/Element/AddCharacteristics';\r\nimport AddTemplateElement from '../ModalForms/Element/AddTemplateElement';\r\nimport DeleteElement from '../ModalForms/Element/DeleteElement';\r\nimport EditElement from '../ModalForms/Element/EditElement';\r\nimport ExportElement from '../ModalForms/Element/ExportElement';\r\nimport AddRelation from '../ModalForms/Element/AddRelation';\r\n\r\n\r\nimport './Toolbar.css';\r\n\r\nexport default function Toolbar(props) {\r\n\r\n    const [showAddElement, set_showAddElement] = useState(false);\r\n    const [showAddFolder, set_showAddFolder] = useState(false);\r\n    const [showDeleteComponent, set_showDeleteComponent] = useState(false);\r\n    const [showExportComponent, set_showExportComponent] = useState(false);\r\n    const [showEditComponent, set_showEditComponent] = useState(false);\r\n    const [showRelation, set_showRelation] = useState(false);\r\n    \r\n        return(\r\n            <div className=\"ToolbarRelative\">\r\n            <div className=\"Toolbar\">\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddElement(true)}>Добавить характеристики</button>\r\n            <AddCharacteristics element={props.parent} prevpages={props.previouspages} onClose={()=>set_showAddElement(false)} show={showAddElement}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddFolder(true)}>Добавить класс</button>            \r\n            <AddTemplateElement element={props.parent} prevpages={props.previouspages} onClose={()=>set_showAddFolder(false)} show={showAddFolder}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showRelation(true)}>Добавить связь</button>\r\n            <AddRelation element={props.parent} prevpages={props.previouspages} onClose={()=>set_showRelation(false)} show={showRelation}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showDeleteComponent(true)}>Удалить элемент</button>\r\n            <DeleteElement prevpages={props.previouspages} element={props.parent} onClose={()=>set_showDeleteComponent(false)} show={showDeleteComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showEditComponent(true)}>Изменить элемент</button>\r\n            <EditElement element={props.parent} prevpages={props.previouspages} onClose={()=>set_showEditComponent(false)} show={showEditComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showExportComponent(true)}>Экспорт элемента</button>\r\n            <ExportElement element={props.parent} prevpages={props.previouspages} onClose={()=>set_showExportComponent(false)} show={showExportComponent}/>\r\n            </div>\r\n            </div>\r\n          )\r\n  \r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAxYAAAAoCAYAAABjJmznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPESURBVHgB7d2xbhN3HMDx3/8SOWVq3qDmCZqlE6rkhE4VQ/IEOCPQChiSsgFbm1ZKhkLGJk9AO7QSC3YHJLbyBvgR0i3Q5v69MyKiwQ4YuxVwn8/m+50jK4Plr+7+908BAAA0RufadrtonbmaU17KTw/X+jvXD2IGUgAAAB+8zsb2UlF8dDVy7r44VsXA46NnT5dnERdFAAAAH7witVZfjopajliaay30qqsYizElYQEAAA1QFsVeFRKDk8dnFRduhQIAgIbo3NhtpzL3qghon5xNe1uUsAAAgAap46Ioyz+qFBh1hWJQPo+LQUzIrVAAANAg/W8vDcocyxF51JWJdvH8tqh2TEhYAABAw/S/v/K4LMu1MeO3igthAQAADdT/4et+mfP6mPHEcSEsAACgoaorF3sR+faY8URxMRcAAEBjPXn4W//suS9TROqMGC+mufnVTz774pfBo/unPi3KU6EAAIBY2bizEyldHTMelDmv1Wszxr1fWAAAAEPLmz/upSgujhkfVHGxPC4uhAUAAHDs/MZuL6fcGTcvI7r9rcv7J49bvA0AABw7+utwLUeMveWpCoi9lc3dmyePW7wNAAAcGzy6f9j+/ML9yLGaIhbHnNY5e+5CPHn46+8vDqSVjTvdUWemlA6OyqNTV37DG/t7fhAwtcOD/s5130sA8D/o3NhtpzL3qrhojz8r3XqwdWn4uNq0snk3BwA0Sq4CNYlUppZzGgTMQPXjfRDvoBS5nVN0XnPSzoPvLl8XFgAAwHRy3rN4GwAAmE5KXWEBAABMpX6KlLAAAADeWh0V+dmZ5fkAAIBXvD8POah+2B4U+T35rKn6v74nn7XyZxTxceTcPeWcn6uoWO/vrB/YeRsAAHhF59p2u2gt9GLM42ZzlPu9ra+6L14LCwAA4F8mjYqaNRYAAMCxKioW51oL92KCqKgJCwAA4FgVFb0csTR6mm+PioqasAAAAIZWvrnz02lR8WDryq1x7xUWAABArGzu3oycuqOnp0dFzeJtAABouGFURL41evr6qKgJCwAAaLBZREVNWAAAQEN1Nu9eLCL2Rk/fPCpqwgIAABro/Obd1Rxxb/R0sqioCQsAAGiYzsb2UpFavSoHFl+dTh4VtfkAAAAaY7irdhpugDezqKi5YgEAAA0xjIrWQnWlYtSu2m8fFTVhAQAADXBaVOQo98ftqP2mbJAHAAANULRa3fiPomL49wMAAPjglUWxlyP2Xz5WvX48i6iouRUKAAAapHNjt53K4YZ4n+ZnZ5b7O+sHMQP/AMBKP3wl6wERAAAAAElFTkSuQmCC\"","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Toolbar from \"../Toolbar/ToolbarElement\";\r\nimport \"./ElementPage.css\";\r\nimport logo from \"../App/logo4x.png\";\r\nimport arrow from \"./arrow.png\";\r\nimport reversearrow from \"./reverse arrow.png\";\r\n\r\nexport default class ElementPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      templatecharacteristics: null,\r\n      breadCrumbs: null,\r\n      characteristics: null,\r\n      showcharacreristics: true,\r\n      relations: null,\r\n    };\r\n  }\r\n\r\n  ChangeShow = (param) => (e) => {\r\n    this.setState({ showcharacreristics: param });\r\n  };\r\n\r\n  async GetTemplateCharacteristics(parentid) {\r\n    const breadCrumbs = this.props.location.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(this.props.location.state.body.Id);\r\n    // const index=breadCrumbs.indexOf(elem => elem.path==`/template/${this.props.match.params.id}/${this.props.match.params.name}`);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: this.props.location.state.body.Name,\r\n        path: `/element`,\r\n        body: {\r\n          Name: this.props.location.state.body.Name,\r\n          Id: this.props.location.state.body.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    console.log(\r\n      process.env.REACT_APP_API_CHARACTERISTICS + `?idelement=${parentid}`\r\n    );\r\n    await fetch(\r\n      process.env.REACT_APP_API_CHARACTERISTICS + `?idelement=${parentid}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({\r\n          templatecharacteristics: data,\r\n          breadCrumbs: breadCrumbs,\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  }\r\n  async GetCharacteristics(parentid) {\r\n    await fetch(process.env.REACT_APP_API_CHARACTERISTICS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ characteristics: data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  async GetRelations(parentid) {\r\n    await fetch(process.env.REACT_APP_API_RELATIONS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ relations: data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await this.GetTemplateCharacteristics(this.props.location.state.body.Id);\r\n    await this.GetCharacteristics(this.props.location.state.body.Id);\r\n    await this.GetRelations(this.props.location.state.body.Id);\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.templatecharacteristics || !this.state.characteristics) {\r\n      return <div className=\"waitingpage\">\r\n        <div className=\"Loading\">\r\n        <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n        <label className=\"formlabel\">Загрузка...</label>\r\n        </div>\r\n      </div>;\r\n    }\r\n    const {\r\n      templatecharacteristics,\r\n      characteristics,\r\n      breadCrumbs,\r\n      showcharacreristics,\r\n      relations,\r\n    } = this.state; //сначала\r\n    const array = templatecharacteristics.map(function (item) {\r\n      return { idparent: item.IdParent, name: item.NameParent };\r\n    });\r\n    var setObj = new Set(); // create key value pair from array of array\r\n\r\n    var groups = array.reduce((acc, item) => {\r\n      if (!setObj.has(item.idparent)) {\r\n        setObj.add(item.idparent, item);\r\n        acc.push(item);\r\n      }\r\n      return acc;\r\n    }, []); //converting back to array from mapobject\r\n    return (\r\n      <div>\r\n        <div className=\"Header\">\r\n          <div className=\"BreadCrumbs\">\r\n            {breadCrumbs.map((bc) => (\r\n              <div key={bc.title} className=\"gt\">\r\n                <Link\r\n                  className=\"BreadCrumb\"\r\n                  to={{\r\n                    pathname: bc.path,\r\n                    state: { body: bc.body, breadCrumbs: breadCrumbs },\r\n                  }}\r\n                >\r\n                  {bc.title}\r\n                </Link>\r\n                &ensp;&rarr;&ensp;\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"settingsinheader\">\r\n          <input type=\"text\" className=\"search\" placeholder=\"поиск\" ></input>\r\n            <Link\r\n              to={{ pathname: `/library`, state: { breadCrumbs: breadCrumbs } }}\r\n            >\r\n              {<button className=\"btn_logout\">общая библиотека</button>}\r\n            </Link>\r\n            <Link to={{ pathname: \"/settings\" , state: { breadCrumbs: breadCrumbs }}}>\r\n              {<button className=\"btn_logout\">настройки</button>}\r\n            </Link>\r\n            {\r\n              <button className=\"btn_logout\" onClick={this.handleClick}>\r\n                выход\r\n              </button>\r\n            }\r\n            <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"ElementBody\">\r\n          <div className=\"Characteristics\">\r\n            {showcharacreristics ? (\r\n              <div className=\"ShowMenu\">\r\n                <button className=\"button current\">характеристики</button>\r\n                <button className=\"button\" onClick={this.ChangeShow(false)}>\r\n                  связи\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <div className=\"ShowMenu\">\r\n                <button className=\"button\" onClick={this.ChangeShow(true)}>\r\n                  характеристики\r\n                </button>\r\n                <button className=\"button current\">связи</button>\r\n              </div>\r\n            )}\r\n            {showcharacreristics ? (\r\n              <div>\r\n                {groups.map((group) => (\r\n                  <div key={group.idparent} className=\"ParentElement\">\r\n                    {group.name}\r\n                    {templatecharacteristics\r\n                      .filter((number) => number.IdParent === group.idparent)\r\n                      .map((number) => (\r\n                        <div\r\n                          key={number.IdCharacter}\r\n                          className=\"ParentCharacteristic\"\r\n                        >\r\n                          {number.NameCharacter}: {number.ValueCharacter}\r\n                        </div>\r\n                      ))}\r\n                  </div>\r\n                ))}\r\n\r\n                {characteristics.map((folder) => (\r\n                  <div key={folder.Id}>\r\n                    {folder.Name}: {folder.Value}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"container-center\">\r\n              <div className=\"relations\">\r\n                {relations.map((folder) => (\r\n                  <div key={folder.IdFirst}>\r\n                    {folder.Rel2to1 == null ? <div className=\"onerelation\">\r\n                      {folder.NameFirstElement}\r\n                      <div className=\"relation\">\r\n                      <div className=\"firstelement\">\r\n                      {folder.Rel1to2}\r\n                      </div>\r\n                      <img src={arrow} className=\"imagearrow\" alt=\"toolbaritem\" />\r\n                      </div>\r\n                      {folder.NameSecondElement} \r\n                    </div>    \r\n                       :\r\n                       <div className=\"onerelation\">\r\n                       {folder.NameFirstElement}\r\n                       <div className=\"relation\">\r\n                         <div className=\"firstelement\">\r\n                       {folder.Rel1to2}\r\n                       </div>\r\n                       <img src={arrow} className=\"imagearrow\" alt=\"toolbaritem\" />\r\n                       <img src={reversearrow} className=\"imagearrow\" alt=\"toolbaritem\" />\r\n                       <div className=\"secondelement\">\r\n                       {folder.Rel2to1}\r\n                       </div>\r\n                       </div>\r\n                       {folder.NameSecondElement} \r\n                     </div> \r\n                     }\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <img\r\n            className=\"ImageElement\"\r\n            src={`data:image/jpeg;base64,${this.props.location.state.body.Image}`}\r\n          />\r\n        </div>\r\n        <Toolbar\r\n          previouspages={breadCrumbs}\r\n          parent={this.props.location.state.body}\r\n        ></Toolbar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAxYAAAAoCAYAAABjJmznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOsSURBVHgB7d2xbxtVHMDx37sUp2z+Dwj/QTowsdiGBSb4D9wxCYh0aMrWdKtcpGRJOyaMTO2ExBJ7QWIjbGz4T8jYVuDHXUmhLTk7sQNqcp/PFN+9WCdHivzVu/cuxQXpbO60l1rLw5zS0eTZ03uj3VvjAAAAGiHFBflo6+HPOWL1n3dOBwIDAACaoYgL0Luzt/9aVFRy7hetVj8AAIAr71osqIqKyKn/5vEyNMa5KA4CAAC48haasehtPbpbHxWpO7q/Ng4AAODKm3uNxYuoiLz95nFRAQAAzbMUc6iLivLYcc7xyWiw/msAAACNce41FvVRUU1/pJujB+tHAQAANMq5wmJaVExyLqNi40kAAACNc+bF29Oiojx+r4yKgwAAABrpTIu3Z0XF4WBjOwAAgMaaGRaiAgAAmGVqWEyLihyTb4eDL/oBAAA0Xm1YTI+KOBoO1m8EAABA1OwK1buztx859087V0VFfv5uNwAAAE78a1eov6Ii9U8bfPJU7c9HuzePAwAA4MRrt0KdISq6o/tr4wAAAHjFi7DobO60i9byfvnjZ/Uj00EZHceRczsug5TbOadLca1Fda0Rl+Nzjervfzk+VwAA/j+pioql1vKw/GK7GgAAAHMoRAUAALCoQlQAAACLKqoH3QUAAMACXize7t3e242Uvpo2MOc0KgeP4y1UXtdKwAXIKa8ELMwmBwA0z9/bzfa29rbLl3enjB1Pnj/rjnZvjQMA+M91NvfLQH0qUlnctd9XAi5CjnZRFKf+X3r9ORbiAgAAmMPSqy9++/H70fsffpqqXWhrxreLpWud9z74+LvxTz88DQAAgFLx5oHDwcb2JOebdb9Q7SKV3rn+OAAAAE6kuhOd23urRYph7QLEnA8OH2zUBggAANAcRd2J0YONo0mObq7bCSqlfu/Ow50AAAAar5h2soqLXKT6uMix2dt6NG2xNwAA0ADpLIM6Xz9aSZM8rH9eRNo+HKzdCwAAoJHOFBaVWXExieiPBuue4g0AAA105rCozIyLyR/d0TdfjgIAAGiUc4VFZUZcHE9y7lZrMwIAAGiMc4dFZWZcPH92w9O5AQCgOYqYw+j+2jiX8ZAjTpuZaBet5WFnc2clAACARphrxuKlMh7aqYyI8k1WTzk9LmcuumYuAADg6ptrxuKlMhqOy5mLbs3MxUrRavUDAAC48hYKi0ptXKR0MMnxJAAAgCtvoVuhXlXdFrW0fP1xnsQvk6XYrdZhBAAA0Ah/AtYESHtuzTU8AAAAAElFTkSuQmCC\"","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\n\r\n\r\nasync function SaveCharacteristics (arrayofcharacteristics, idel)\r\n{\r\n    const box =   {\r\n        \"characteristics\": arrayofcharacteristics,\r\n        \"elementid\": Number(idel)\r\n     }\r\n    await fetch(process.env.REACT_APP_API_TEMPLATECHARACTERISTICS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(box), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\nexport default class AddCharacteristics extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={characteristics:null, currentchar:{name:'', value:''}}\r\n        this.ChangeName = this.ChangeName.bind(this);\r\n        this.ChangeValue = this.ChangeValue.bind(this);\r\n        this.CreateNew = this.CreateNew.bind(this);  \r\n        this.CreateNewName = this.CreateNewName.bind(this);\r\n        this.CreateNewValue = this.CreateNewValue.bind(this);   \r\n        this.Save = this.Save.bind(this);   \r\n    }  \r\n\r\n    async Save(e){\r\n        e.preventDefault();\r\n        let array=[];\r\n        if((this.state.currentchar.name!=='')||(this.state.currentchar.name!=='')){\r\n            if(this.state.characteristics===null)\r\n        {\r\n            array=[{name:this.state.currentchar.name, value:this.state.currentchar.value, id:0}]            \r\n        }  \r\n        else{\r\n            array=[...this.state.characteristics, {name:this.state.currentchar.name, value:this.state.currentchar.value, id:this.state.characteristics.length}];            \r\n        }               \r\n        }\r\n        else{\r\n            array=this.state.characteristics;\r\n        }\r\n        await SaveCharacteristics(array, this.props.element.Id);\r\n        this.props.onClose();        \r\n        window.location.reload();\r\n    }\r\n    CreateNewName(e){\r\n        var val = e.target.value;\r\n        this.setState(prevState => ({currentchar:{name:val, value:prevState.currentchar.value}}))\r\n    }\r\n    CreateNewValue(e){\r\n        var val = e.target.value;\r\n        this.setState(prevState => ({currentchar:{name:prevState.currentchar.name, value:val}}))\r\n    }\r\n    \r\n    ChangeName = param => e => {\r\n        this.setState(prevState => {\r\n            const newItems = [...prevState.characteristics];\r\n            newItems[param].name = e.target.value;\r\n            return {characteristics: newItems};\r\n        })\r\n    }\r\n    ChangeValue= param => e => {\r\n        this.setState(prevState => {\r\n            const newItems = [...prevState.characteristics];\r\n            newItems[param].value = e.target.value;\r\n            return {characteristics: newItems};\r\n        })\r\n    }\r\n    \r\n    CreateNew(e) {\r\n        e.preventDefault();  \r\n        if(this.state.characteristics===null)\r\n        {\r\n            this.setState(prevState => ({\r\n                characteristics: [{name:prevState.currentchar.name, value:prevState.currentchar.value, id:0}]\r\n              , currentchar:{name:'', value:''}}))\r\n        }  \r\n        else{\r\n            this.setState(prevState => ({\r\n                characteristics: [...prevState.characteristics, {name:prevState.currentchar.name, value:prevState.currentchar.value, id:prevState.characteristics.length}]\r\n              , currentchar:{name:'', value:''}}))\r\n        }        \r\n    }\r\n\r\n    render(){\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Добавление характеристик</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                    \r\n                    <div className=\"newcharswindow\">\r\n                <div className=\"newcharacter\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.currentchar.name} onChange={this.CreateNewName}/>\r\n                </div>\r\n                <div className=\"newcharacter\">\r\n                <label className=\"formlabel\"> Значение:</label>\r\n                <input className=\"forminput\" type=\"text\" value={this.state.currentchar.value} onChange={this.CreateNewValue}/>  \r\n                </div>\r\n                {this.state.characteristics!==null? this.state.characteristics.map(char=>\r\n                        <div key={char.id} className=\"linenewchar\">\r\n                            <div className=\"newcharacter\">\r\n                            <label className=\"formlabel\"> Название:</label>\r\n                            <input className=\"forminput\" type=\"text\" value={char.name} onChange={this.ChangeName(char.id)}/>\r\n                            </div>\r\n                            <div className=\"newcharacter\">\r\n                            <label className=\"formlabel\"> Значение:</label>\r\n                            <input className=\"forminput\" type=\"text\" value={char.value} onChange={this.ChangeValue(char.id)}/>  \r\n                            </div></div>):null}\r\n                            </div> \r\n                        <button className=\"arrow\" onClick={this.CreateNew}>+ Добавить еще одну</button>   \r\n                </div>                             \r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\" onClick={this.Save}>Сохранить</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Назад</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function AddTemplate(templateid, elementid) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_TEMPLATEELEMENTS +\r\n      `/templatefolder?templateid=${templateid}&elementid=${elementid}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\nexport default class AddTemplateElement extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(this.props);\r\n    this.state = {\r\n      path: { Name: \"\", Id: null },\r\n      isneedupdate: true,\r\n      folders: null,\r\n      telements: null,\r\n      breadCrumbs: null,\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.changedirectory = this.changedirectory.bind(this);\r\n    this.Selecttelement = this.Selecttelement.bind(this);\r\n    this.CloseWindow = this.CloseWindow.bind(this);\r\n  }\r\n\r\n  CloseWindow() {\r\n    this.props.onClose();\r\n    this.setState({ isneedupdate: true });\r\n  }\r\n\r\n  Selecttelement = (param) => async (event) => {\r\n    this.setState({ path: { Name: param.Name, Id: param.Id } });\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await AddTemplate(this.state.path.Id, this.props.element.Id);\r\n    this.props.onClose();\r\n    window.location.reload();\r\n  };\r\n\r\n  async GetFoldersAndElements(idparent) {\r\n    let folders;\r\n    let telements;\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${idparent}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        folders=data\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEELEMENTS + `/${idparent}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        telements=data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n      this.setState({ telements: telements,  folders:folders});\r\n  }\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/templates`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    this.setState({ breadCrumbs: breadCrumbs });\r\n    await this.GetFoldersAndElements(param.Id, breadCrumbs);\r\n  };\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (this.props.show) {\r\n      if (this.state.isneedupdate === true) {\r\n        this.setState({\r\n          path: { Name: \"\", Id: null },\r\n          folders: null,\r\n          telements: null,\r\n          breadCrumbs: [\r\n            {\r\n              title: \"Библиотека\",\r\n              path: \"/templae\",\r\n              body: {\r\n                Name: \"Библиотека\",\r\n                Id: 0,\r\n              },\r\n            },\r\n          ],\r\n          isneedupdate: false,\r\n        });\r\n        await this.GetFoldersAndElements(0, null);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    if (\r\n      !this.state.breadCrumbs ||\r\n      !this.state.folders ||\r\n      !this.state.telements\r\n    ) {\r\n      return null;\r\n    }\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">Добавление класса</div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n              <div className=\"flexdiv\">\r\n            <label className=\"formlabel\">Расположение класса:</label>\r\n              <label>{this.state.path.Name}</label>\r\n            </div>\r\n            <div className=\"place\">\r\n              <div className=\"parentwindowforselectingpath\">\r\n                <div className=\"modalbreadcrumbs\">\r\n                  {this.state.breadCrumbs.map((bc) => (\r\n                    <div key={bc.title} className=\"gt\">\r\n                      <button\r\n                        className=\"BreadCrumb withoutframe\"\r\n                        onClick={this.changedirectory({\r\n                          Id: bc.body.Id,\r\n                          Name: bc.body.Name,\r\n                        })}\r\n                      >\r\n                        {bc.title}\r\n                      </button>\r\n                      &ensp;&rarr;&ensp;\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                <div className=\"windowforselectingpath\">\r\n                  {this.state.folders.length > 0 ? (\r\n                    <div className=\"modalfolders\">\r\n                      {this.state.folders.map((folder) => (\r\n                        <div key={folder.Id}>\r\n                          <button\r\n                            className=\"modalbuttonfolder\"\r\n                            onClick={this.changedirectory({\r\n                              Id: folder.Id,\r\n                              Name: folder.Name,\r\n                            })}\r\n                          >\r\n                            <div>{folder.Name}</div>\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : null}\r\n\r\n                  {this.state.telements.length > 0 ? (\r\n                    <div className=\"modalfolders\">\r\n                      {this.state.telements.map((el) => (\r\n                        <div key={el.Id}>\r\n                          <button\r\n                            className=\"modalbuttonelement\"\r\n                            onClick={this.Selecttelement({\r\n                              Id: el.Id,\r\n                              Name: el.Name,\r\n                            })}\r\n                          >\r\n                            <div>{el.Name}</div>\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.handleSubmit}>\r\n              Добавить класс\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.CloseWindow}>\r\n              Отменить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport '../ModalPages.css';\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nasync function DeleteElement (elementid)\r\n{   \r\n    await fetch(process.env.REACT_APP_API_TEMPLATEELEMENTS + `/${elementid}`,{\r\n        method: 'DELETE', // или 'PUT'\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\nexport default class DeleteComponent extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        console.log(this.props);\r\n        this.state={isdeleted:null}\r\n        this.handleSubmit = this.handleSubmit.bind(this);        \r\n    }\r\n   \r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        await DeleteElement(this.props.component.Id);\r\n        this.props.onClose();\r\n        this.setState({isdeleted:true});\r\n      }\r\n\r\n    render(){\r\n        if(this.state.isdeleted)\r\n        {\r\n            let bc=this.props.prevpages;\r\n            bc.length=bc.length-1;\r\n            this.setState({isdeleted: false});\r\n            return <Redirect to={{pathname: bc[bc.length-1].path, state: { body: bc[bc.length-1].body, breadCrumbs:bc}            \r\n  }}/>\r\n        }\r\n        if(!this.props.show)\r\n        {\r\n            return null\r\n        }     \r\n        \r\n        console.log(this.props);\r\n        return(\r\n            <div className=\"ModalPage\" onClick={this.props.onClose}> \r\n            <div className=\"modal-content\" onClick={e=>e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <div className=\"modal-title\">Удаление класса {this.props.component.Name}</div>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Вы действительно хотите удалить класс {this.props.component.Name}?</label>\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                <button className=\"button SaveButton\"  onClick={this.handleSubmit}>Да</button>\r\n                <button className=\"button CloseButton\" onClick={this.props.onClose}>Отменить</button>\r\n                </div>\r\n            </div>            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\n\r\nasync function Edit (elementid, name,characteristics,tchars) {\r\n  let elemid;\r\n  const element = {\r\n    IdElement: Number(elementid),\r\n    Name: name,\r\n    characteristics: characteristics,\r\n    templatecharacteristics: tchars\r\n  };\r\n  await fetch(process.env.REACT_APP_API_TEMPLATEELEMENTS, {\r\n    method: \"PUT\", // или 'PUT'\r\n    body: JSON.stringify(element), // данные могут быть 'строкой' или {объектом}!\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  }).then(response=>{ return response.json()})\r\n  .then(data=>{\r\n      elemid=data;\r\n  }).catch(err => console.log(err));\r\nreturn elemid\r\n}\r\n\r\nexport default class EditElement extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      templatecharacteristics: null,\r\n      characteristics: null,\r\n      typeofedit: \"element\",\r\n      name:this.props.element.Name,\r\n      isneedupdate: true,\r\n    };\r\n    this.onChange = this.onChange.bind(this);\r\n    this.Save = this.Save.bind(this);\r\n  }\r\n  //Для характеристик: изменить название характеристики\r\n  // ChangeName = (param) => (e) => {\r\n  //   this.setState((prevState) => {\r\n  //     const newItems = [...prevState.characteristics];\r\n  //     newItems[param].name = e.target.value;\r\n  //     return { characteristics: newItems };\r\n  //   });\r\n  // };\r\n\r\n  ChangeShow = (param) => (e) => {\r\n    this.setState({ typeofedit: param });\r\n  };\r\n\r\n  //Для характеристик: удалить характеристику\r\n  DeleteChar = (param) => (e) => {\r\n    this.setState((prevState) => ({\r\n      characteristics: prevState.characteristics.filter(\r\n        (char) => char.Id !== param\r\n      ),\r\n    }));\r\n  };\r\n  //Для классов: удалить класс\r\n  DeleteClass = (param) => (e) => {\r\n    this.setState((prevState) => ({\r\n      templatecharacteristics: prevState.templatecharacteristics.filter(\r\n        (char) => char.Id !== param\r\n      ),\r\n    }));\r\n  };\r\n  //Для характеристик: изменить значение характеристики\r\n  // ChangeValue = (param) => (e) => {\r\n  //   this.setState((prevState) => {\r\n  //     const newItems = [...prevState.characteristics];\r\n  //     newItems[param].value = e.target.value;\r\n  //     return { characteristics: newItems };\r\n  //   });\r\n  // };\r\n\r\n  //Для свзяли: удалить связь\r\n  DeleteRelation = (param) => (e) => {\r\n    this.setState((prevState) => ({\r\n      relations: prevState.relations.filter((rel) => rel.Id !== param),\r\n    }));\r\n  };\r\n  //Для элемента: изменить имя\r\n  onChange(e) {\r\n    var val = e.target.value;\r\n    this.setState({ name: val });\r\n  }\r\n  \r\n  async Save(event) {\r\n    event.preventDefault();\r\n    const elemid=await Edit(this.props.element.Id, this.state.name, this.state.characteristics, this.state.templatecharacteristics, this.state.relations);\r\n    this.props.onClose();\r\n    window.location.reload();\r\n  }\r\n//Для элемента: изменить фото\r\n  \r\n  async GetFoldersElementsRelations(parentid) {\r\n    let tchars;\r\n    let chars;\r\n    let relations;\r\n    await fetch(\r\n      process.env.REACT_APP_API_TEMPLATECHARACTERISTICS + `/only?idelement=${parentid}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n          tchars=data;\r\n      })\r\n      .catch((err) => console.log(err));\r\n    await fetch(process.env.REACT_APP_API_TEMPLATECHARACTERISTICS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        chars=data;\r\n      })\r\n      .catch((err) => console.log(err));    \r\n    this.setState({\r\n      templatecharacteristics: tchars,\r\n      characteristics: chars\r\n    });\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (this.props.show) {\r\n      if (this.state.isneedupdate === true) {\r\n        this.setState({\r\n            templatecharacteristics: null,\r\n            characteristics: null,\r\n            typeofedit: \"element\",            \r\n            name:this.props.element.Name,\r\n            isneedupdate: false,\r\n          });\r\n        await this.GetFoldersElementsRelations(this.props.element.Id);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    if ((!this.state.characteristics)||(!this.state.templatecharacteristics)) {\r\n        return null;\r\n      }\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">Редактирование класса</div>\r\n          </div>\r\n            {this.state.typeofedit === \"element\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal current\">класс</button>\r\n                <button\r\n                  className=\"button-selector-modal\"\r\n                  onClick={this.ChangeShow(\"characteristics\")}\r\n                >\r\n                  харакеристики\r\n                </button>                \r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"characteristics\" ? (\r\n              <div className=\"ShowSelector\">\r\n                <button className=\"button-selector-modal\" onClick={this.ChangeShow(\"element\")}>\r\n                  элемент\r\n                </button>\r\n                <button className=\"button-selector-modal current\">харакеристики</button>\r\n                \r\n              </div>\r\n            ) : null}           \r\n\r\n            {this.state.typeofedit === \"element\" ? (\r\n              <div className=\"modal-body\">\r\n                <label className=\"formlabel\"> Название:</label>\r\n                <input\r\n                  className=\"forminput\"\r\n                  type=\"text\"\r\n                  value={this.state.name}\r\n                  onChange={this.onChange}\r\n                />                \r\n              </div>\r\n            ) : null}\r\n            {this.state.typeofedit === \"characteristics\" ? (\r\n              <div>\r\n                {this.state.templatecharacteristics.map((group) => (\r\n                  <div key={group.Id} onClick={this.DeleteClass(group.Id)} className=\"element-with-delete-button ParentElement\">\r\n                    <button className=\"arrow\">&otimes;</button>{group.Name}\r\n                  </div>\r\n                ))}\r\n\r\n                {this.state.characteristics.map((folder) => (\r\n                  <div key={folder.Id} onClick={this.DeleteChar(folder.Id)} className=\"element-with-delete-button\">\r\n                    <button className=\"arrow\">&otimes;</button> {folder.Name}: {folder.Value}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : null}            \r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.Save}>\r\n              Сохранить\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.props.onClose}>\r\n              Назад\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"../ModalPages.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nasync function ExportToUser(elementid, usermail) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_TEMPLATEELEMENTS +\r\n      `/exporttouser?elementid=${elementid}&usermail=${usermail}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nasync function ExportToLibrary(elementid,name, password) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_TEMPLATEELEMENTS +\r\n      `/exporttolibrary?elementid=${elementid}&name=${name}&password=${password}`,\r\n    {\r\n      method: \"GET\", // или 'PUT'\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\nasync function ExportToFolder(elementid, newrootid) {\r\n  await fetch(\r\n    process.env.REACT_APP_API_TEMPLATEELEMENTS +\r\n      `/exporttofolder?elementid=${elementid}&newrootid=${newrootid}`,\r\n    {\r\n      method: \"GET\", \r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n}\r\n\r\nexport default class ExportElement extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(this.props);\r\n    this.state = {\r\n      exporttype: null,\r\n      body: '',\r\n      path: { Name: this.props.prevpages[this.props.prevpages.length-2].Name, Id: this.props.prevpages[this.props.prevpages.length-2].Id},\r\n      folders: null,\r\n      breadCrumbs: this.props.prevpages.filter((rel) => rel.body.Id !== this.props.element.Id),\r\n      text: \"Показать\",\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.setTypeOfExport = this.setTypeOfExport.bind(this);\r\n    this.onMailChange = this.onMailChange.bind(this);\r\n    this.onPasswordChange = this.onPasswordChange.bind(this);\r\n    this.showlocation = this.showlocation.bind(this);\r\n    this.changedirectory = this.changedirectory.bind(this);\r\n  }\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (this.state.exporttype === \"user\") {\r\n      await ExportToUser(this.props.folder.Id, this.state.body);\r\n    } else if (this.state.exporttype === \"library\") {\r\n      await ExportToLibrary(this.props.folder.Id, this.props.folder.Name, this.state.body);\r\n    } else if (this.state.exporttype === \"folder\") {\r\n      await ExportToFolder(this.props.folder.Id, this.state.path.Id);\r\n    }\r\n    this.props.onClose();\r\n  };\r\n\r\n  changedirectory = (param) => async (event) => {\r\n    const breadCrumbs = this.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(param.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: param.Name,\r\n        path: `/projects`,\r\n        body: {\r\n          Name: param.Name,\r\n          Id: param.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${param.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({\r\n          folders: data,\r\n          breadCrumbs: breadCrumbs,\r\n          path: { Name: param.Name, Id: param.Id },\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  };\r\n\r\n  async showlocation(event) {\r\n    await fetch(process.env.REACT_APP_API_TEMPLATEFOLDERS + `/${this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Id}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.state.text === \"Показать\"\r\n          ? this.setState({ text: \"Свернуть\", folders: data })\r\n          : this.setState({ text: \"Показать\" });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  setTypeOfExport(event) {\r\n    if (event.target.value === \"folder\") {\r\n      this.setState({\r\n        exporttype: event.target.value,\r\n        path: { Name: this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Name, Id: this.state.breadCrumbs[this.state.breadCrumbs.length-1].body.Id },\r\n      });\r\n    } else {\r\n      this.setState({ exporttype: event.target.value, body:'' });\r\n    }\r\n    console.log(\"wow\");\r\n  }\r\n  onMailChange(event) {\r\n    this.setState({ body: event.target.value });\r\n  }\r\n  onPasswordChange(event) {\r\n    this.setState({ body: event.target.value });\r\n  }\r\n\r\n  async componentDidUpdate(prevProps) {\r\n    if (prevProps.element.Id !== this.props.element.Id) {\r\n      this.setState({\r\n        exporttype: null,\r\n      body: '',\r\n      path: { Name: this.props.prevpages[this.props.prevpages.length-1].Name, Id: this.props.prevpages[this.props.prevpages.length-1].Id},\r\n      folders: null,\r\n      breadCrumbs: this.props.prevpages.filter((rel) => rel.body.Id !== this.props.element.Id),\r\n      text: \"Показать\",\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {  \r\n    if (!this.props.show) {\r\n      return null;\r\n    }\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"ModalPage\" onClick={this.props.onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <div className=\"modal-title\">\r\n              Экспорт элемента {this.props.element.Name}\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <div className=\"formwithradio\">\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"user\" name=\"gender\" /> Другому\r\n                пользователю\r\n              </div>\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"folder\" name=\"gender\" /> В другую\r\n                папку\r\n              </div>\r\n              <div\r\n                className=\"radiobutton\"\r\n                onChange={this.setTypeOfExport.bind(this)}\r\n              >\r\n                <input type=\"radio\" value=\"library\" name=\"gender\" /> В общую\r\n                библиотеку\r\n              </div>\r\n            </div>\r\n          \r\n          {this.state.exporttype === \"user\" ? (\r\n            <div className=\"exportdiv\">\r\n              <label className=\"formlabel\"> Введите почту получателя:</label>\r\n              <input\r\n                className=\"forminput\"\r\n                type=\"text\"\r\n                value={this.state.body}\r\n                onChange={this.onMailChange}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {this.state.exporttype === \"library\" ? (\r\n            <div className=\"exportdiv\">\r\n              <label className=\"formlabel\"> Задайте пароль:</label>\r\n              <input\r\n                className=\"forminput\"\r\n                type=\"text\"\r\n                value={this.state.body}\r\n                onChange={this.onPasswordChange}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {this.state.exporttype === \"folder\" ? (\r\n            <div className=\"exportdiv\">\r\n              <label className=\"formlabel\">Экспорт в папку:</label>\r\n              <div className=\"selectedpath\">\r\n                <label>{this.state.path.Name}</label>{\" \"}\r\n                <button className=\"arrow\" onClick={this.showlocation}>\r\n                  {\" \"}\r\n                  {this.state.text}{\" \"}\r\n                  {this.state.text === \"Показать\" ? (\r\n                    <div>&ensp;&darr;</div>\r\n                  ) : (\r\n                    <div>&ensp;&uarr;</div>\r\n                  )}{\" \"}\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"place\">\r\n                {this.state.text === \"Показать\" ? null : (\r\n                  <div className=\"parentwindowforselectingpath\">\r\n                    <div className=\"modalbreadcrumbs\">\r\n                      {this.state.breadCrumbs.slice(1).map((bc) => (\r\n                        <div key={bc.title} className=\"gt\">\r\n                          <button\r\n                            className=\"BreadCrumb withoutframe\"\r\n                            onClick={this.changedirectory({\r\n                              Id: bc.body.Id,\r\n                              Name: bc.body.Name,\r\n                            })}\r\n                          >\r\n                            {bc.title}\r\n                          </button>\r\n                          &ensp;&rarr;&ensp;\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    <div className=\"windowforselectingpath\">\r\n                      <div className=\"modalfolders\">\r\n                        {this.state.folders.map((folder) => (\r\n                          <div key={folder.Id}>\r\n                            <button\r\n                              className=\"modalbuttonfolder\"\r\n                              onClick={this.changedirectory({\r\n                                Id: folder.Id,\r\n                                Name: folder.Name,\r\n                              })}\r\n                            >\r\n                              <div>{folder.Name}</div>\r\n                            </button>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"button SaveButton\" onClick={this.handleSubmit}>\r\n              Экспортировать\r\n            </button>\r\n            <button className=\"button CloseButton\" onClick={this.props.onClose}>\r\n              Отменить\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from 'react';\r\nimport AddCharacteristics from '../ModalForms/TemplateElement/AddTemplateCharecterisctics';\r\nimport AddTemplateElement from '../ModalForms/TemplateElement/AddTemplateElement';\r\nimport DeleteElement from '../ModalForms/TemplateElement/DeleteTemplateElement';\r\nimport EditElement from '../ModalForms/TemplateElement/EditTemplateElement';\r\nimport ExportElement from '../ModalForms/TemplateElement/ExportTemplateElement';\r\n\r\n\r\nimport './Toolbar.css';\r\n\r\nexport default function Toolbar(props) {\r\n\r\n    const [showAddElement, set_showAddElement] = useState(false);\r\n    const [showAddFolder, set_showAddFolder] = useState(false);\r\n    const [showDeleteComponent, set_showDeleteComponent] = useState(false);\r\n    const [showExportComponent, set_showExportComponent] = useState(false);\r\n    const [showEditComponent, set_showEditComponent] = useState(false);\r\n    \r\n        return(\r\n            <div className=\"ToolbarRelative\">\r\n            <div className=\"Toolbar\">\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddElement(true)}>Добавить характеристики</button>\r\n            <AddCharacteristics element={props.parent} prevpages={props.previouspages} onClose={()=>set_showAddElement(false)} show={showAddElement}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showAddFolder(true)}>Добавить класс</button>\r\n            <AddTemplateElement element={props.parent} prevpages={props.previouspages} onClose={()=>set_showAddFolder(false)} show={showAddFolder}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showDeleteComponent(true)}>Удалить класс</button>\r\n            <DeleteElement prevpages={props.previouspages} component={props.parent} onClose={()=>set_showDeleteComponent(false)} show={showDeleteComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showEditComponent(true)}>Изменить класс</button>\r\n            <EditElement element={props.parent} prevpages={props.previouspages} onClose={()=>set_showEditComponent(false)} show={showEditComponent}/>\r\n            <button className=\"Toolbarbutton\" onClick={() => set_showExportComponent(true)}>Экспорт класса</button>\r\n            <ExportElement element={props.parent} prevpages={props.previouspages} onClose={()=>set_showExportComponent(false)} show={showExportComponent}/>\r\n            </div>\r\n            </div>\r\n          )\r\n  \r\n}","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Toolbar from \"../Toolbar/ToolBarTemplateElement\";\r\nimport \"./TempateElementPage.css\";\r\nimport logo from \"../App/logo4x.png\";\r\n\r\nexport default class TemplateElementPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      templatecharacteristics: null,\r\n      breadCrumbs: null,\r\n      characteristics: null\r\n    };\r\n    this.handleClick = this.handleClick.bind(this)\r\n  }\r\n\r\n  handleClick(e) {\r\n    e.preventDefault();\r\n    this.props.history.push(\"/\");\r\n    localStorage.clear();    \r\n    window.location.reload();      \r\n  }    \r\n\r\n  async GetTemplateCharacteristics(parentid) {\r\n    const breadCrumbs = this.props.location.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n      .map(function (e) {\r\n        return e.body.Id;\r\n      })\r\n      .indexOf(this.props.location.state.body.Id);\r\n    if (index === -1) {\r\n      breadCrumbs.push({\r\n        title: this.props.location.state.body.Name,\r\n        path: `/telement`,\r\n        body: {\r\n          Name: this.props.location.state.body.Name,\r\n          Id: this.props.location.state.body.Id,\r\n        },\r\n      });\r\n    } else {\r\n      breadCrumbs.length = index + 1;\r\n    }\r\n    await fetch(\r\n      process.env.REACT_APP_API_TEMPLATECHARACTERISTICS + `?idelement=${parentid}`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({\r\n          templatecharacteristics: data,\r\n          breadCrumbs: breadCrumbs,\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n    console.log(this.state);\r\n  }\r\n  async GetCharacteristics(parentid) {\r\n    await fetch(process.env.REACT_APP_API_TEMPLATECHARACTERISTICS + `/${parentid}`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ characteristics: data });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await this.GetTemplateCharacteristics(this.props.location.state.body.Id);\r\n    await this.GetCharacteristics(this.props.location.state.body.Id);\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.templatecharacteristics || !this.state.characteristics) {\r\n      return <div className=\"waitingpage\">\r\n        <div className=\"Loading\">\r\n        <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n        <label className=\"formlabel\">Загрузка...</label>\r\n        </div>\r\n      </div>;\r\n    }\r\n    const {\r\n      templatecharacteristics,\r\n      breadCrumbs,\r\n      characteristics\r\n    } = this.state; //сначала\r\n    const array = templatecharacteristics.map(function (item) {\r\n      return { idparent: item.IdParent, name: item.NameParent };\r\n    });\r\n    var setObj = new Set(); // create key value pair from array of array\r\n\r\n    var groups = array.reduce((acc, item) => {\r\n      if (!setObj.has(item.idparent)) {\r\n        setObj.add(item.idparent, item);\r\n        acc.push(item);\r\n      }\r\n      return acc;\r\n    }, []); //converting back to array from mapobject\r\n    return (\r\n      <div>\r\n        <div className=\"Header\">\r\n          <div className=\"BreadCrumbs\">\r\n            {breadCrumbs.map((bc) => (\r\n              <div key={bc.title} className=\"gt\">\r\n                <Link\r\n                  className=\"BreadCrumb\"\r\n                  to={{\r\n                    pathname: bc.path,\r\n                    state: { body: bc.body, breadCrumbs: breadCrumbs },\r\n                  }}\r\n                >\r\n                  {bc.title}\r\n                </Link>\r\n                &ensp;&rarr;&ensp;\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"settingsinheader\">\r\n          <input type=\"text\" className=\"search\" placeholder=\"поиск\" ></input>\r\n            <Link\r\n              to={{ pathname: `/library`, state: { breadCrumbs: breadCrumbs } }}\r\n            >\r\n              {<button className=\"btn_logout\">общая библиотека</button>}\r\n            </Link>\r\n            <Link to={{ pathname: \"/settings\", state: { breadCrumbs: breadCrumbs } }}>\r\n              {<button className=\"btn_logout\">настройки</button>}\r\n            </Link>\r\n            {\r\n              <button className=\"btn_logout\" onClick={this.handleClick}>\r\n                выход\r\n              </button>\r\n            }\r\n            <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"ElementBody\">\r\n          <div className=\"Characteristics\">\r\n              <div>\r\n                {groups.map((group) => (\r\n                  <div key={group.idparent} className=\"ParentElement\">\r\n                    {group.name}\r\n                    {templatecharacteristics\r\n                      .filter((number) => number.IdParent === group.idparent)\r\n                      .map((number) => (\r\n                        <div\r\n                          key={number.IdCharacter}\r\n                          className=\"ParentCharacteristic\"\r\n                        >\r\n                          {number.NameCharacter}: {number.ValueCharacter}\r\n                        </div>\r\n                      ))}\r\n                  </div>\r\n                ))}\r\n\r\n                {characteristics.map((folder) => (\r\n                  <div key={folder.Id}>\r\n                    {folder.Name}: {folder.Value}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n          </div> \r\n        </div>\r\n        <Toolbar\r\n          previouspages={breadCrumbs}\r\n          parent={this.props.location.state.body}\r\n        ></Toolbar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useHistory } from \"react-router\";\r\nimport {Link} from \"react-router-dom\";\r\nimport logo from '../App/logo4x.png';\r\nimport './Login.css';\r\n\r\nasync function loginUser (login, password)\r\n{\r\n    return fetch(process.env.REACT_APP_API_USERS+`?mail=${login}&pass=${password}`,{\r\n        method:'GET',\r\n        headers: {\r\n          'Content-Type':'application/json'\r\n      }}).then(data => data.json())\r\n}\r\n\r\n\r\nexport default function Login({ setToken }) {\r\n  const [username, setUserName] = useState();\r\n  const [password, setPassword] = useState();\r\n  const history = useHistory();\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    const user = await loginUser(\r\n      username,\r\n      password\r\n    );\r\n    const token={\r\n      \"Mail\": user.Mail,\r\n      \"Password\": user.Password \r\n    }\r\n    history.push({\r\n      pathname:  \"/\"\r\n   });\r\n    console.log(token);\r\n    setToken(token)\r\n  }\r\n\r\n  return(\r\n    <div className=\"body\">  \r\n    <div className=\"border\">       \r\n      <form className='login-wrapper' onSubmit={handleSubmit}>\r\n      <img className=\"logologin\" src={logo} alt=\"toolbaritem\"/>\r\n      <div className='header'>Creapedia</div>\r\n        <label className=\"form-row\">\r\n          <p>почта</p>\r\n          <input type=\"text\" placeholder=\"exapmle@email.com\" onChange={e => setUserName(e.target.value)} />\r\n        </label>\r\n        <label className=\"form-row\">\r\n          <p>пароль</p>\r\n          <input type=\"password\" placeholder=\"•••••••••••••\" onChange={e => setPassword(e.target.value)} />\r\n        </label>\r\n        <div className=\"loginlinks\">\r\n        <Link className=\"RegistrationLink\" to={{pathname:`/registration`, state: {body:null}}}> \r\n                             регистрация\r\n                              </Link>\r\n        <Link className=\"ForgotPass\" to={{pathname:`/registration`, state: {body:null}}}> \r\n                             забыли пароль?\r\n                              </Link>\r\n                              </div>\r\n        <label className=\"form-row\">\r\n          <button type=\"submit\">войти</button>\r\n        </label>\r\n      </form>\r\n           \r\n                              </div>                          \r\n      </div>\r\n  )\r\n}\r\n\r\nLogin.propTypes = {\r\n  setToken: PropTypes.func.isRequired\r\n};","import React, {Component} from 'react';\r\nimport {Redirect, Link} from \"react-router-dom\";\r\nimport logo from '../App/logo4x.png';\r\n\r\nasync function SingUp (mail, password)\r\n{   \r\n    const user =   {\r\n      \"Mail\":mail,\r\n      \"Password\": password\r\n   }\r\n    await fetch(process.env.REACT_APP_API_USERS,{\r\n        method: 'POST', // или 'PUT'\r\n        body: JSON.stringify(user), // данные могут быть 'строкой' или {объектом}!\r\n        headers: {\r\n            'Access-Control-Request-Method':'POST',\r\n            'Origin': 'http://localhost:3000',\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }}).then(function(response) {\r\n            console.log(response.status)});\r\n}\r\n\r\n\r\nexport default class Registration extends Component{\r\n    constructor(props){\r\n        super(props); \r\n        this.state={mail:\"\", password:\"\", ifregister:null};\r\n        this.onChangeMail = this.onChangeMail.bind(this);\r\n        this.onChangePassword = this.onChangePassword.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    } \r\n\r\n    onChangeMail(e) {\r\n        var val = e.target.value;\r\n        this.setState({mail: val});\r\n    }\r\n    onChangePassword(e) {\r\n        var val = e.target.value;\r\n        this.setState({password: val});\r\n    }\r\n   \r\n    handleSubmit = async e => {\r\n        e.preventDefault();\r\n        await SingUp(this.state.mail,this.state.password);\r\n        alert(\"Вы зарегистрировались! Для подтверждения адреса, пожалуйста, перейдите по ссылке, отправленную вам на указанную почту\");  \r\n        this.setState({ifregister: true});\r\n      }\r\n    render(){\r\n        if(this.state.ifregister)\r\n        {\r\n            return <Redirect to={{pathname: '/', state: { body: null}            \r\n  }}/>}\r\n       return(\r\n<div className=\"body\">  \r\n    <div className=\"border\">       \r\n      <form className='login-wrapper' onSubmit={this.handleSubmit}>\r\n      <img className=\"logologin\" src={logo} alt=\"toolbaritem\"/>\r\n      <div className='header'>Регистрация</div>\r\n        <label className=\"form-row\">\r\n          <p>почта</p>\r\n          <input type=\"text\" value={this.state.mail} onChange={this.onChangeMail} placeholder=\"exapmle@email.com\"/>\r\n        </label>\r\n        <label className=\"form-row\">\r\n          <p>пароль</p>\r\n          <input type=\"password\" value={this.state.password} onChange={this.onChangePassword} placeholder=\"•••••••••••••\"/>\r\n        </label>\r\n        <div className=\"loginlinks\">\r\n        <Link className=\"RegistrationLink\" to={{pathname:`/login`, state: {body:null}}}> \r\n                             назад\r\n                              </Link>        \r\n                              </div>\r\n        <label className=\"form-row\">\r\n          <button type=\"submit\">зарегистрироваться</button>\r\n        </label>\r\n      </form>\r\n           \r\n                              </div>                          \r\n      </div>            \r\n        )\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport logo from \"../App/logo4x.png\";\r\n\r\nasync function ChangeData(prevmail, mail, password) {\r\n  const user = {\r\n    Mail: mail,\r\n    Password: password,\r\n  };\r\n  await fetch(process.env.REACT_APP_API_USERS + `/${prevmail}`, {\r\n    method: \"PUT\", // или 'PUT'\r\n    body: JSON.stringify(user), // данные могут быть 'строкой' или {объектом}!\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  }).then(function (response) {\r\n    console.log(response.status);\r\n  });\r\n}\r\n\r\nasync function DeleteAcc(mail) {\r\n  await fetch(process.env.REACT_APP_API_USERS + `?mail=${mail}`, {\r\n    method: \"DELETE\", // или 'PUT'\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  }).then(function (response) {\r\n    console.log(response.status);\r\n  });\r\n}\r\n\r\nexport default class Settings extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      mail: this.props.location.state.breadCrumbs[\r\n        this.props.location.state.breadCrumbs.length -\r\n          this.props.location.state.breadCrumbs.length\r\n      ].body.Mail,\r\n      password:\r\n        this.props.location.state.breadCrumbs[\r\n          this.props.location.state.breadCrumbs.length -\r\n            this.props.location.state.breadCrumbs.length\r\n        ].body.Password,\r\n    };\r\n    this.onChangeMail = this.onChangeMail.bind(this);\r\n    this.onChangePassword = this.onChangePassword.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.DeleteAcc = this.DeleteAcc.bind(this);\r\n  }\r\n\r\n  onChangeMail(e) {\r\n    var val = e.target.value;\r\n    this.setState({ mail: val });\r\n  }\r\n  onChangePassword(e) {\r\n    var val = e.target.value;\r\n    this.setState({ password: val });\r\n  }\r\n  DeleteAcc = async (e) => {\r\n    e.preventDefault();\r\n    await DeleteAcc(\r\n      this.props.location.state.breadCrumbs[\r\n        this.props.location.state.breadCrumbs.length -\r\n          this.props.location.state.breadCrumbs.length\r\n      ].body.Mail\r\n    );\r\n    localStorage.clear();\r\n    window.location.reload();\r\n    alert(\"Аккаунт удален\");\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await ChangeData(\r\n      this.props.location.state.breadCrumbs[\r\n        this.props.location.state.breadCrumbs.length -\r\n          this.props.location.state.breadCrumbs.length\r\n      ].body.Mail,\r\n      this.state.mail,\r\n      this.state.password\r\n    );\r\n    alert(\"Данные успешно обновлены\");\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"body\">\r\n        <div className=\"border\">\r\n          <form className=\"login-wrapper\" onSubmit={this.handleSubmit}>\r\n            <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n            <div className=\"header\">настройки</div>\r\n            <label className=\"form-row\">\r\n              <p>почта</p>\r\n              <input\r\n                type=\"text\"\r\n                value={this.state.mail}\r\n                onChange={this.onChangeMail}\r\n                placeholder=\"exapmle@email.com\"\r\n              />\r\n            </label>\r\n            <label className=\"form-row\">\r\n              <p>пароль</p>\r\n              <input\r\n                type=\"password\"\r\n                value={this.state.password}\r\n                onChange={this.onChangePassword}\r\n                placeholder=\"•••••••••••••\"\r\n              />\r\n            </label>\r\n\r\n            <label className=\"form-row\">\r\n              <button type=\"submit\">изменить</button>\r\n            </label>\r\n            <label className=\"form-row\">\r\n              <button onClick={this.DeleteAcc}>удалить профиль</button>\r\n            </label>\r\n            <div className=\"loginlinks\">\r\n              <Link\r\n                className=\"RegistrationLink\"\r\n                to={{\r\n                  pathname:\r\n                    this.props.location.state.breadCrumbs[\r\n                      this.props.location.state.breadCrumbs.length - 1\r\n                    ].path,\r\n                    state: { breadCrumbs: this.props.location.state.breadCrumbs, body: this.props.location.state.breadCrumbs[\r\n                      this.props.location.state.breadCrumbs.length - 1\r\n                    ].body }\r\n                }}\r\n              >\r\n                назад\r\n              </Link>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport logo from \"../App/logo4x.png\";\r\nimport './GeneralLibrary.css';\r\n\r\nasync function ImportFromLibrary(importcompid, userid,type) {\r\n    await fetch(\r\n      process.env.REACT_APP_API_LIBRARY +\r\n        `/importfromlib?userid=${userid}&importcompid=${importcompid}`,\r\n      {\r\n        method: \"GET\", // или 'PUT'\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    );\r\n  }\r\n\r\n\r\nexport default class Library extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    breadCrumbs:this.props.location.state.breadCrumbs,\r\n      components: null,\r\n      showcomponents: true\r\n    };\r\n  }\r\n\r\n  \r\n\r\n  Import = (param) => async e => {\r\n    await ImportFromLibrary(param)\r\n    if(this.state.showcomponents)\r\n    {\r\n        alert('Элемент успешно перенесён в раздел \"Проекты\", папка \"Импорт\"');\r\n    }\r\n    else{\r\n        alert('Элемент успешно перенесён в раздел \"Библиотека\", папка \"Импорт\"');\r\n    }    \r\n  };\r\n\r\n  ChangeShow = (param) => (e) => {\r\n    this.setState({ showcomponents: param });\r\n  };\r\n\r\n  async GetLibrary() {\r\n    const breadCrumbs = this.props.location.state.breadCrumbs;\r\n    const index = breadCrumbs\r\n    .map(function (e) {\r\n      return e.body.Id;\r\n    })\r\n    .indexOf(0);\r\n  // const index=breadCrumbs.indexOf(elem => elem.path==`/template/${this.props.match.params.id}/${this.props.match.params.name}`);\r\n  if (index === -1) {\r\n    breadCrumbs.push({\r\n      title: 'Общая библиотека',\r\n      path: `/library`,\r\n      body: {\r\n        Name: 'Общая библиотека',\r\n        Id: 0,\r\n      },\r\n    });\r\n  } else {\r\n    breadCrumbs.length = index + 1;\r\n  }\r\n    await fetch(\r\n      process.env.REACT_APP_API_LIBRARY + `/all`\r\n    )\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({\r\n          components: data,\r\n          breadCrumbs: breadCrumbs,\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n  \r\n  async componentDidMount() {\r\n    await this.GetLibrary();\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.components) {\r\n      return <div className=\"waitingpage\">\r\n        <div className=\"Loading\">\r\n        <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n        <label className=\"formlabel\">Загрузка...</label>\r\n        </div>\r\n      </div>;\r\n    }\r\n    const {\r\n        breadCrumbs,\r\n        components,\r\n        showcomponents\r\n    } = this.state; //сначала\r\n    \r\n    return (\r\n      <div>\r\n        <div className=\"Header\">\r\n          <div className=\"BreadCrumbs\">\r\n            {breadCrumbs.map((bc) => (\r\n              <div key={bc.title} className=\"gt\">\r\n                <Link\r\n                  className=\"BreadCrumb\"\r\n                  to={{\r\n                    pathname: bc.path,\r\n                    state: { body: bc.body, breadCrumbs: breadCrumbs },\r\n                  }}\r\n                >\r\n                  {bc.title}\r\n                </Link>\r\n                &ensp;&rarr;&ensp;\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"settingsinheader\">\r\n          <input type=\"text\" className=\"search\" placeholder=\"поиск\" ></input>            \r\n            <Link\r\n              to={{ pathname: `/library`, state: { breadCrumbs: breadCrumbs } }}\r\n            >\r\n              {<button className=\"btn_logout\">общая библиотека</button>}\r\n            </Link>\r\n            <Link to={{ pathname: \"/settings\" }}>\r\n              {<button className=\"btn_logout\">настройки</button>}\r\n            </Link>\r\n            {\r\n              <button className=\"btn_logout\" onClick={this.handleClick}>\r\n                выход\r\n              </button>\r\n            }            \r\n            <img className=\"logo\" src={logo} alt=\"toolbaritem\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"libmenu\">\r\n          {showcomponents ? (\r\n              <div>\r\n              <div className=\"ShowMenu\">\r\n                <button className=\"button current\">элементы</button>\r\n                <button className=\"button\" onClick={this.ChangeShow(false)}>\r\n                  классы\r\n                </button>\r\n              </div>\r\n              <table className=\"LibTable\">\r\n  <tr>\r\n    <td className=\"td-header\">Название</td>\r\n    <td className=\"td-header\">Тип</td>\r\n    <td className=\"td-header\">Пароль</td>\r\n    <td className=\"td-header\"></td>\r\n  </tr>\r\n  {components.filter(\r\n        (rel) => rel.Typeofcomponent===\"папка с элементами\" || rel.Typeofcomponent===\"элемент\"\r\n      ).map((folder) => (\r\n                  <tr key={folder.Id}>\r\n                      <td>{folder.Name}</td>\r\n                      <td>{folder.Typeofcomponent}</td>\r\n                      <td>{folder.Password==null?<div>Нет</div>:<div>Есть</div>}</td>\r\n                      <td className=\"ImportButton\" onClick={this.Import(folder.Id)}>Импорт</td>\r\n                  </tr>\r\n                ))}\r\n</table>\r\n              </div>\r\n            ) : (\r\n                <div>\r\n              <div className=\"ShowMenu\">\r\n                <button className=\"button\" onClick={this.ChangeShow(true)}>\r\n                  элементы\r\n                </button>\r\n                <button className=\"button current\">классы</button>\r\n              </div>\r\n              <table className=\"LibTable\">\r\n  <tr>\r\n    <td className=\"td-header\">Название</td>\r\n    <td className=\"td-header\">Тип</td>\r\n    <td className=\"td-header\">Пароль</td>\r\n    <td className=\"td-header\"></td>\r\n  </tr>\r\n  {components.filter(\r\n        (rel) => rel.Typeofcomponent===\"папка с классами\" || rel.Typeofcomponent===\"класс\"\r\n      ).map((folder) => (\r\n                  <tr key={folder.Id}>\r\n                      <td>{folder.Name}</td>\r\n                      <td>{folder.Typeofcomponent}</td>\r\n                      <td>{folder.Password==null?<div>Нет</div>:<div>Есть</div>}</td>\r\n                      <td className=\"ImportButton\" onClick={this.Import(folder.Id)}>Импорт</td>\r\n                  </tr>\r\n                ))}\r\n</table>\r\n             \r\n              </div>\r\n            )}   \r\n        </div>\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport {BrowserRouter as Router,Switch,Route, Redirect, withRouter} from \"react-router-dom\";\r\nimport MainPage from '../MainPage/MainPage';\r\nimport TemplatePage from '../TemplatePage/TemplatePage';\r\nimport FolderPage from '../FolderPage/FolderPage';\r\nimport ElementPage from '../ElementPage/ElementPage';\r\nimport TemplateElementPage from '../TemplateElementPage/TemplateElementPage';\r\nimport Login from '../Login/Login';\r\nimport useToken from './useToken';\r\nimport Registration from '../Registration/Registration';\r\nimport Settings from '../Settings/Settings';\r\nimport GeneralLibrary from '../GeneralLibrary/GeneralLibrary';\r\nimport './App.css';\r\n\r\n\r\nfunction App(props) {\r\n  \r\n  const { token, setToken } = useToken();  //Получение данных из localstorage\r\n\r\n  if(!token) //при отсутствии данных в localstorage\r\n  {\r\n    return (\r\n        <Router>\r\n            <Switch>            \r\n            <Route path=\"/registration\" component={Registration}></Route>  \r\n            <Route path=\"/login\"><Login setToken={setToken}/></Route>     \r\n            <Redirect from=\"/\" to={{pathname: `/login`}}></Redirect>\r\n            </Switch>\r\n            </Router>  \r\n    )\r\n  }  \r\n  //при наличии данных в localstorage\r\n  return (\r\n    <Router>\r\n            <Switch>\r\n            <Route path=\"/main\" component={MainPage}></Route>\r\n            <Route path=\"/template\" component={TemplatePage}></Route>\r\n            <Route path=\"/projects\" component={FolderPage}></Route> \r\n            <Route path=\"/element\" component={ElementPage}></Route>\r\n            <Route path=\"/telement\" component={TemplateElementPage}></Route>\r\n            <Route path=\"/library\" component={GeneralLibrary}></Route>  \r\n            <Route path=\"/settings\" component={Settings}></Route>\r\n            <Redirect from=\"/\" to={{pathname: `/main`, state: {body:token}}}/>          \r\n            </Switch>\r\n            </Router>\r\n  );\r\n}\r\n\r\nexport default withRouter(App);","import { useState } from 'react';\r\n\r\nexport default function useToken() {\r\n  const getToken = () => {\r\n    const tokenString = localStorage.getItem('token');\r\n    const userToken = JSON.parse(tokenString);\r\n    console.log(userToken);\r\n    return userToken;\r\n  };\r\n\r\n  const [token, setToken] = useState(getToken());\r\n\r\n  const saveToken = userToken => {\r\n    localStorage.setItem('token', JSON.stringify(userToken));\r\n    setToken(userToken);\r\n  };\r\n\r\n  return {\r\n    setToken: saveToken,\r\n    token\r\n  }\r\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'normalize.css';\nimport './index.css';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App/>\n    </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}